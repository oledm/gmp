{% extends "base.html" %}
{% load staticfiles i18n %}

{% block css %}
<base href="/">
<!-- 
    <link rel="stylesheet" href="{% static 'angular-material/angular-material.css' %}">
    <link rel="stylesheet" href="{% static 'angular-material-data-table/dist/md-data-table.min.css' %}">
 -->
<link rel="stylesheet" href="{% static 'Ionicons/css/ionicons.min.css' %}">
<link rel="stylesheet" href="{% static 'src/assets/css/app.css' %}">
{% endblock %}

{% block angular %}
    <script src="{% static 'angular/angular.js' %}"></script>
    <!-- 
        <script src="{% static 'angular-i18n/ru-ru.js' %}"></script>
     -->
    <script src="{% static 'angular-aria/angular-aria.js' %}"></script>
    <script src="{% static 'angular-animate/angular-animate.js' %}"></script>
    <script src="{% static 'angular-messages/angular-messages.js' %}"></script>
    <script src="{% static 'angular-resource/angular-resource.js' %}"></script>
    <script src="{% static 'angular-cookies/angular-cookies.js' %}"></script>
    <script src="{% static 'angular-ui-router/release/angular-ui-router.min.js' %}"></script>
    <!-- 
        <script src="{% static 'angular-material/angular-material.min.js' %}"></script>
        <script src="{% static 'angular-material-data-table/dist/md-data-table.min.js' %}"></script>
     -->
    <script src="{% static 'ng-file-upload/ng-file-upload.js' %}"></script>
    <script src="{% static 'filesaver/FileSaver.js' %}"></script>
    <!-- 
        This app
     -->
    <script src="{% static 'src/app/user/app.userdata.service.module.js' %}"></script>
    <script src="{% static 'src/app/user/app.userdata.service.js' %}"></script>
    <script src="{% static 'src/app/user/app.userdata.controller.module.js' %}"></script>
    <script src="{% static 'src/app/user/app.userdata.controller.js' %}"></script>
    <script src="{% static 'src/app/engine/app.engine.service.module.js' %}"></script>
    <script src="{% static 'src/app/engine/app.engine.service.js' %}"></script>
    <script src="{% static 'src/app/filestorage/app.upload.module.js' %}"></script>
    <script src="{% static 'src/app/filestorage/app.upload.js' %}"></script>
    <script src="{% static 'src/app/filestorage/app.upload.service.module.js' %}"></script>
    <script src="{% static 'src/app/filestorage/app.upload.service.js' %}"></script>
    <script src="{% static 'src/app/report/app.passport.service.module.js' %}"></script>
    <script src="{% static 'src/app/report/app.passport.service.js' %}"></script>
    <script src="{% static 'src/app/report/app.passport.module.js' %}"></script>
    <script src="{% static 'src/app/report/app.passport.js' %}"></script>
    <script src="{% static 'src/app/authentication/app.authentication.service.module.js' %}"></script>
    <script src="{% static 'src/app/authentication/app.authentication.service.js' %}"></script>
    <script src="{% static 'src/app/authentication/app.department.service.module.js' %}"></script>
    <script src="{% static 'src/app/authentication/app.department.service.js' %}"></script>
    <script src="{% static 'src/app/authentication/app.cookies.service.module.js' %}"></script>
    <script src="{% static 'src/app/authentication/app.cookies.service.js' %}"></script>
    <script src="{% static 'src/app/authentication/app.main.module.js' %}"></script>
    <script src="{% static 'src/app/authentication/app.main.js' %}"></script>
    <!-- 
        <script src="{% static 'src/app/authentication/app.sidenav.module.js' %}"></script>
        <script src="{% static 'src/app/authentication/app.sidenav.js' %}"></script>
     -->
    <script src="{% static 'src/app/authentication/app.toolbar.module.js' %}"></script>
    <script src="{% static 'src/app/authentication/app.toolbar.js' %}"></script>
    <script src="{% static 'src/app/authentication/app.login.module.js' %}"></script>
    <script src="{% static 'src/app/authentication/app.login.js' %}"></script>
    <script src="{% static 'src/app/authentication/app.register.module.js' %}"></script>
    <script src="{% static 'src/app/authentication/app.register.js' %}"></script>
    <script src="{% static 'src/app/authentication/app.routes.module.js' %}"></script>
    <script src="{% static 'src/app/authentication/app.routes.js' %}"></script>
    <script src="{% static 'src/app/authentication/app.js' %}"></script>
    <script src="{% static 'src/app/user/gmp-input.directive.js' %}"></script>
{% endblock %}

{% block javascript  %}
{% if debug %}
    <script src="//localhost:35729/livereload.js"></script>
{% endif %}
{% endblock %}

{% block content %}
 
{% verbatim %}
<div ng-if="main.isAuthenticated()" ng-cloak>
    <div ng-controller="UserDataController as vm">
        <h1 class="md-headline">
              <i class="logo icon ion-earth"></i>
        </h1>
        <div>
            <span ng-bind-template="{{vm.userdata.data.last_name}} {{vm.userdata.data.first_name}}"></span>
            <span ng-bind="vm.userdata.data.email"></span>
            <span ng-bind="vm.userdata.data.department.name"></span>
        </div>

       <div>
           <ul ng-repeat="entry in main.menu">
               <a ui-sref="{{entry.ref}}"  aria-label="{{entry.link}}">
                        <div class="inset">
                            <i class="icon ion-{{entry.icon}}"></i>
                        </div>
                        <div class="inset" ng-class="{activeLink:true}" ng-bind="entry.name"></div>
                </a>
           </ul>
        </div>
    </div>
</div>

 <div ng-controller="ToolbarController as vm">
     <!-- 
         <div ng-if="main.isAuthenticated()">
               <div>
                    
                <h2><a ui-sref="home">
                          <i class="icon ion-home"></i>
                </a></h2>
              <a  href="#" ng-click="vm.logout()" ng-show="main.isAuthenticated()" aria-label="Выход">
                  <i class="icon ion-android-exit"></i>
              </a>
              </div>
         </div>
      -->
     
     <div ng-hide="main.isAuthenticated()" ng-cloak>
        <ul class="nav nav-tabs">
            <li ui-sref-active="active" class="item" role="presentation" class="active"><a ui-sref="login">Вход</a></li>
            <li ui-sref-active="active" class="item" role="presentation"><a ui-sref="register">Регистрация</a></li>
        </ul>
        <div class="container" ui-view></div>
    </div>

      <!-- 
          Main workspace content
       -->
     <div ng-if="main.isAuthenticated()" ng-cloak ui-view>
     </div>

     </div>
 </div>
{% endverbatim %}
{% endblock %}
