!function(){"use strict";angular.module("app.authentication",[])}(),function(){"use strict";angular.module("app.cookies",["ngCookies"])}(),function(){"use strict";angular.module("app.department",["ngResource"])}(),function(){"use strict";angular.module("app.login",["ngMessages","ui.router"])}(),function(){"use strict";angular.module("app.main",["ui.router"])}(),function(){"use strict";angular.module("app",["app.config","app.authentication","app.department","app.serverdata","app.engine.service","app.main","app.datepicker","app.login","app.register","app.cookies","app.userdata.service","app.userdata.controller","app.toolbar","app.upload","app.upload.service","app.passport","app.passport.service","app.report"])}(),function(){"use strict";angular.module("app.register",[])}(),function(){"use strict";angular.module("app.config",["ui.router","ngResource"])}(),function(){"use strict";angular.module("app.toolbar",[])}(),function(){"use strict";angular.module("app.engine.service",[])}(),function(){"use strict";angular.module("app.upload",["ngFileUpload"])}(),function(){"use strict";angular.module("app.upload.service",[])}(),function(){"use strict";angular.module("app.passport",["ngMessages","ngAnimate"])}(),function(){"use strict";angular.module("app.passport.service",[])}(),function(){"use strict";angular.module("app.serverdata",["ngResource"])}(),function(){"use strict";angular.module("app.datepicker",["ui.bootstrap"])}(),function(){"use strict";angular.module("app.userdata.controller",[])}(),function(){"use strict";angular.module("app.userdata.service",[])}(),function(){"use strict";angular.module("app.report",["ngMessages","ngAnimate"])}(),function(){"use strict";function e(e,t,n,r){function o(){return t.isSet()}function a(t,n){return e.post("/api/login/",{email:t,password:n}).then(s,c)}function i(){return e.post("/api/logout/",{}).then(u)}function l(t,n,r){return e.post("/api/department/"+r+"/user/",{email:t,password:n})}function s(e){t.set(e.data),n.$emit("cokkiesSet",""),r.go("home")}function u(){t.remove(),n.$emit("cokkiesSet",void 0),r.go("login")}function c(){}var p={isAuthenticated:o,login:a,logout:i,register:l};return p}angular.module("app.authentication").factory("Authentication",e),e.$inject=["$http","Cookies","$rootScope","$state"]}(),function(){"use strict";function e(e){"ngInject";function t(){try{return JSON.parse(e.get(a))}catch(t){return}}function n(){return!!e.get(a)}function r(t){e.put(a,JSON.stringify(t))}function o(){e.remove(a)}var a="authentcatedAccount",i={get:t,isSet:n,set:r,remove:o};return i}e.$inject=["$cookies"],angular.module("app.cookies").factory("Cookies",e)}(),function(){"use strict";function e(e){return e("/api/department/:depId/",{},{measurers:{method:"get",isArray:!0,params:{depId:1},url:"/api/department/:depId/measurer/"}})}angular.module("app.department").factory("Department",e),e.$inject=["$resource"]}(),function(){"use strict";angular.module("app").run(["$http",function(e){e.defaults.xsrfHeaderName="X-CSRFToken",e.defaults.xsrfCookieName="csrftoken"}])}(),function(){"use strict";function e(e){"ngInject";function t(){e.login(r.email,r.password)}function n(){e.isAuthenticated()&&$state.go("home")}var r=this;r.login=t,n()}e.$inject=["Authentication"],angular.module("app.login").controller("LoginController",e)}(),function(){"use strict";function e(e,t,n,r){function o(){e.isAuthenticated()||t.path("/login"),r.$on("cokkiesSet",function(e,t){void 0===t?i.menu=[]:a()}),a()}function a(){i.menu=[{name:"Профиль",link:"Профиль",ref:"profile"}];var e=n.get();if(void 0!==e){var t=e.department.report_types;angular.forEach(t,function(e){i.menu.push({name:e.name,link:e.name,ref:e.url})})}}var i=this;i.menu=[],o(),i.isAuthenticated=function(){return e.isAuthenticated()}}angular.module("app.main").controller("MainController",e),e.$inject=["Authentication","$location","Cookies","$rootScope"]}(),function(){"use strict";function e(e,t){function n(){a.loadDepartments()}function r(){e.login(a.email,a.password)}function o(){console.log("Registration failed")}var a=this;a.loadDepartments=function(){t.query(function(e){a.allDeps=e})},a.register=function(){e.register(a.email,a.password,a.department.id).then(r,o)},n()}angular.module("app.register").controller("RegisterController",e),e.$inject=["Authentication","Department"]}(),function(){"use strict";function e(e,t,n,r){e.state("home",{url:"/"}).state("login",{url:"/login",controller:"LoginController",controllerAs:"vm",templateUrl:"/static/src/app/user/login.tpl.html"}).state("register",{url:"/register",controller:"RegisterController",controllerAs:"vm",templateUrl:"/static/src/app/user/register.tpl.html"}).state("profile",{url:"/profile",controller:"UserDataController",controllerAs:"vm",templateUrl:"/static/src/app/user/profile.tpl.html"}).state("upload",{url:"/upload",controller:"UploadController",controllerAs:"vm",templateUrl:"/static/src/app/filestorage/upload.tpl.html"}).state("passport",{url:"/passport",controller:"PassportController",controllerAs:"vm",templateUrl:"/static/src/app/report/passport.tpl.html"}).state("report",{url:"/report",controller:"ReportController",controllerAs:"vm",templateUrl:"/static/src/app/report/report/report.tpl.html"}).state("report-container",{url:"/report-container",controller:"ReportContainerController",controllerAs:"vm",templateUrl:"/static/src/app/report/report_container/report.tpl.html"}),t.otherwise("/login"),n.defaults.stripTrailingSlashes=!1,r.html5Mode(!0),r.hashPrefix("!")}function t(){var e=angular.element(document);e.on("click",function(){var t=e.find(".navbar-collapse"),n=t.hasClass("in");n&&t.collapse("hide")})}angular.module("app.config").config(e).run(t),e.$inject=["$stateProvider","$urlRouterProvider","$resourceProvider","$locationProvider"]}(),function(){"use strict";function e(e){var t=this;t.logout=function(){e.logout()}}angular.module("app.toolbar").controller("ToolbarController",e),e.$inject=["Authentication"]}(),function(){"use strict";function e(e){function t(){return e.get("/api/engine/").then(function(e){return e.data})}var n={getAllEngines:t};return n}angular.module("app.engine.service").factory("Engine",e),e.$inject=["$http"]}(),function(){"use strict";function e(e,t,n){function r(){i()}function o(e){a(e.files),i()}function a(e){angular.forEach(e,function(e){t.upload({url:"/api/upload/",data:{fileupload:e}}).then(function(){i()},function(e){console.log("Error status: "+e.status)})})}function i(){n.query().then(function(e){u.uploadedFiles=e})}function l(){angular.forEach(u.selected,function(e){n.remove(e.id),s(e.id)}),u.selected=[]}function s(e){angular.forEach(u.uploadedFiles,function(t,n){u.uploadedFiles[n].id===e&&u.uploadedFiles.splice(n,1)})}var u=this;e.fileSelected=o,u.files=[],u.upload=a,u.uploadedFiles=[],u.remove=l,u.selected=[],u.sortOrder="-uploaded_at",r()}angular.module("app.upload").controller("UploadController",e),e.$inject=["$scope","Upload","UploadService"]}(),function(){"use strict";function e(e){function t(){return e.get("/api/file/").then(function(e){return e.data})}function n(t){return e["delete"]("/api/file/"+t+"/").then(function(e){return e.data})}var r={query:t,remove:n};return r}angular.module("app.upload.service").factory("UploadService",e),e.$inject=["$http"]}(),function(){"use strict";function e(e){return{restrict:"A",link:function(t,n){e(function(){n.focus()})}}}angular.module("app.passport").directive("autofocus",e),e.$inject=["$timeout"]}(),function(){"use strict";function e(){return{require:"^form",restrict:"A",link:function(e,t,n,r){return"vm.docsForm"===r.$name?void(e.showCheckmark=!0):void e.$watch(r.$name+".$valid",function(t){t?e.showCheckmark=!0:e.showCheckmark=!1})},scope:!0,transclude:!0,template:'<span ng-if="showCheckmark"><i class="icon ion-checkmark" style="color: #00e676"></i>&nbsp;</span><span ng-transclude></span>'}}angular.module("app.passport").directive("checkmark",e)}(),function(){"use strict";function e(e,t,n,r,o,a,i){function l(e){var t=e.name;angular.forEach(e.files,function(e){i.upload({url:"/api/upload/",data:{fileupload:e}}).then(function(e){v.report.files[t]=e.data.id},function(e){console.log("Error status: "+e.status)})})}function s(){v.report.team=[{name:"",required:!0}],v.report.docs=$,p(),f(),d(),g()}function u(){v.report.team.push({name:"",required:!1})}function c(){v.report.type="passport",console.log("team:",JSON.stringify(v.report)),delete v.report.team[0].required,v.report.therm.tclass=v.tclasses.all.filter(function(e){return e.name===v.tclasses.selected})[0].id,a.createPassport(v.report)}function p(){n.getAllUsers().then(function(e){v.allEmployees=e})}function f(){o.getAllEngines().then(function(e){v.engine.all=e})}function d(){a.getOrgs().then(function(e){v.orgs=e})}function m(e){var t=v.orgs.filter(function(t){return t.name===e});a.getLPUs(t[0].id).then(function(e){v.lpus=e})}function g(){a.getTClasses().then(function(e){v.tclasses.all=e})}function h(e,t){var n=t.id,r=e.indexOf(n);-1!==r?(e.splice(r,1),t.selected=!1):(t.selected=!0,e.push(n))}e.upload=l;var v=this,$=[{name:"Журнал ремонта электродвигателя",value:!0},{name:"Журнал эксплуатации электродвигателя",value:!0},{name:"Инструкция по эксплуатации завода-изготовителя",value:!0},{name:"Протоколы штатных измерений и испытаний",value:!0},{name:"Паспорт завода-изготовителя на взрывозащищенный электродвигатель",value:!0},{name:"Схема электроснабжения электродвигателя",value:!0}],y=["team.tpl.html","measurers.tpl.html","lpu.tpl.html","dates.tpl.html","engines.tpl.html","values.tpl.html","docs.tpl.html","photos.tpl.html","therm.tpl.html","vibro.tpl.html","resistance.tpl.html","signers.tpl.html"],k=["руководитель бригады","зам. руководителя бригады","член бригады"],C={all:r.measurers(),selected:[],sortOrder:"name"},U={all:[],selected:{type:"",serial_number:0},sortOrder:"name"};v.addEmployee=u,v.allEmployees=[],v.createPassport=c,v.engine=U,v.workBegin=void 0,v.workEnd=void 0,v.investigationDate=void 0,v.lpus={},v.orgs={},v.pages=y,v.tclasses={all:[],selected:""},v.getLPUs=m,v.measurers=C,v.ranks=k,v.report={team:void 0,measurers:C.selected,files:{},therm:{},vibro:{},order:{},resistance:{}},v.setSelected=h,s()}angular.module("app.passport").controller("PassportController",e),e.$inject=["$scope","$state","UserData","Department","Engine","Passport","Upload"]}(),function(){"use strict";function e(e){function t(t){e.post("/report/",{report_data:t},{responseType:"arraybuffer",headers:{"Content-Type":"application/json"}}).success(function(e,t,n){var r=new Blob([e],{type:"application/pdf"});return saveAs(r,"report.pdf"),n})}function n(t){return e.get("/api/organization/"+t+"/lpu/").then(function(e){return e.data})}function r(){return e.get("/api/organization/").then(function(e){return e.data})}function o(){return e.get("/api/tclass/").then(function(e){return e.data})}var a={createPassport:t,getLPUs:n,getOrgs:r,getTClasses:o};return a}angular.module("app.passport.service").factory("Passport",e),e.$inject=["$http"]}(),function(){"use strict";function e(){return{require:"ngModel",scope:!0,link:function(e,t,n,r){t.bind("change",function(){e.$apply(function(){r.$setViewValue(t.val()),r.$render()})})}}}angular.module("app.passport").directive("validFile",e)}(),function(){"use strict";function e(e){return e("/api/:category/")}angular.module("app.serverdata").factory("ServerData",e),e.$inject=["$resource"]}(),function(){"use strict";function e(e){var t=this;e.closeText="Закрыть",e.currentText="Сегодня",e.clearText="Очистить",t.dateOptions={startingDay:1},t.yearOptions={datepickerMode:"year",maxMode:"year",minMode:"year",formatYear:"yyyy"},t.open=function(){t.popup.opened=!0},t.popup={opened:!1}}angular.module("app.datepicker").controller("DatepickerController",e),e.$inject=["uibDatepickerPopupConfig"]}(),function(){"use strict";function e(e){function t(){e.get()}function n(){e.update()}var r=this;r.updateProfile=n,r.userdata=e,t()}angular.module("app.userdata.controller").controller("UserDataController",e),e.$inject=["UserData"]}(),function(){"use strict";function e(e,t,n,r){function o(){angular.forEach(d.data,function(e,t){f[t]=""})}function a(){var t=e.get();angular.forEach(t,function(e,n){n in f&&(f[n]=t[n])})}function i(){var n=e.get();return t.get("/api/department/"+n.department.id+"/user/").then(l)}function l(e){return e.data}function s(){var t=e.get();return d.isLoading=!0,d.updateSuccessfull=!1,angular.forEach(f,function(e,n){t[n]=f[n]}),e.set(t),u(t)}function u(e){return t.put("/api/department/"+e.department.id+"/user/"+e.username+"/",{first_name:f.first_name,last_name:f.last_name,middle_name:f.middle_name,email:f.email}).then(c)["catch"](p)}function c(e){return d.isLoading=!1,d.updateSuccessfull=!0,r(function(){d.updateSuccessfull=!1},3e3),e.data}function p(e){return n.reject(e)}var f={email:"",first_name:"",last_name:"",middle_name:"",department:""},d={clean:o,data:f,get:a,getAllUsers:i,isLoading:!1,update:s,updateSuccessfull:!1};return d}angular.module("app.userdata.service").factory("UserData",e),e.$inject=["Cookies","$http","$q","$timeout"]}(),function(){"use strict";function e(){return{restrict:"E",link:function(e){e.isValid=e.userForm.email.$touched},templateUrl:"/static/src/app/user/gmp-input.directive.tpl.html"}}angular.module("app.login").directive("gmpInput",e)}(),function(){"use strict";function e(e,t,n,r,o,a,i){function l(){$.report.info={license:"Договор №          от          на выполнение работ по экспертизе промышленной безопасности."},$.report.team={},$.report.docs=[],$.report.obj_data={detail_info:[]},c(),p(),f(),m()}function s(e,t){var t=t.trim();""!==t&&-1===e.indexOf(t)&&e.push(t)}function u(){$.report.type="report",console.log("team:",JSON.stringify($.report)),$.report.therm.tclass=$.tclasses.all.filter(function(e){return e.name===$.tclasses.selected})[0].id,a.createPassport($.report)}function c(){n.getAllUsers().then(function(e){$.allEmployees=e})}function p(){o.getAllEngines().then(function(e){$.engine.all=e})}function f(){a.getOrgs().then(function(e){$.orgs=e})}function d(e){var t=$.orgs.filter(function(t){return t.name===e});a.getLPUs(t[0].id).then(function(e){$.lpus=e})}function m(){a.getTClasses().then(function(e){$.tclasses.all=e})}function g(e,t){13===e.which&&(e.preventDefault(),s(t,e.target.value),e.target.value="")}function h(e,t){var n=t.id,r=e.indexOf(n);-1!==r?(e.splice(r,1),t.selected=!1):(t.selected=!0,e.push(n))}function v(e){var t=e.name;angular.forEach(e.files,function(e){i.upload({url:"/api/upload/",data:{fileupload:e}}).then(function(e){$.report.files[t].push(e.data.id),console.log($.report.files)},function(e){console.log("Error status: "+e.status)})})}e.upload=v;var $=this,y=["report/team.tpl.html","report/report_info.tpl.html","measurers.tpl.html","lpu.tpl.html","report/dates.tpl.html","engines.tpl.html","order.tpl.html","report/photos.tpl.html","therm.tpl.html","vibro.tpl.html","resistance.tpl.html"],k=[{name:"ВИК",full_name:"Визуальный и измерительный контроль"},{name:"УК",full_name:"Ультразвуковой контроль"},{name:"ТК",full_name:"Тепловой контроль"},{name:"ВД",full_name:"Вибродиагностический контроль"},{name:"ЭЛ",full_name:"Электрический контроль"}],C={all:r.measurers(),selected:[],sortOrder:"name"},U={all:[],selected:{type:"",serial_number:0},sortOrder:"name"};$.addToCollection=s,$.allEmployees=[],$.control_types=k,$.createPassport=u,$.engine=U,$.workBegin=void 0,$.workEnd=void 0,$.lpus={},$.orgs={},$.pages=y,$.procKeyPress=g,$.tclasses={all:[],selected:""},$.getLPUs=d,$.measurers=C,$.report={team:void 0,measurers:C.selected,files:{main:[],therm1:[],therm2:[],licenses:[]},therm:{},vibro:{},order:{},resistance:{}},$.setSelected=h,l()}angular.module("app.report").controller("ReportController",e),e.$inject=["$scope","$state","UserData","Department","Engine","Passport","Upload"]}(),function(){"use strict";function e(e,t,n,r,o,a){"ngInject";function i(){u(),c(),s()}function l(){m.report.type="report-container",console.log("report:",JSON.stringify(m.report)),r.createPassport(m.report)}function s(){t.getAllUsers().then(function(e){m.allEmployees=e})}function u(){a.query({category:"container"},function(e){m.devices.all=e})}function c(){r.getOrgs().then(function(e){m.orgs=e})}function p(e){var t=m.orgs.filter(function(t){return t.name===e});r.getLPUs(t[0].id).then(function(e){m.lpus=e})}function f(e,t){var n=t.id,r=e.indexOf(n);-1!==r?(e.splice(r,1),t.selected=!1):(t.selected=!0,e.push(n))}function d(e){var t=e.name;angular.forEach(e.files,function(e){o.upload({url:"/api/upload/",data:{fileupload:e}}).then(function(e){m.report.files[t].push(e.data.id),console.log(m.report.files)},function(e){console.log("Error status: "+e.status)})})}e.upload=d;var m=this,g=["report_container/devices.tpl.html","report_container/report_info.tpl.html","report_container/order.tpl.html","report_container/team.tpl.html","report_container/signers.tpl.html"],h=({all:n.measurers(),selected:[],sortOrder:"name"},{all:[]}),v=["работоспособное","неработоспособное","предельное"];m.allEmployees=[],m.device_conditions=v,m.createPassport=l,m.devices=h,m.lpus={},m.orgs={},m.pages=g,m.getLPUs=p,m.report={team:[],info:{info_investigation:"Экспертиза промышленной безопасности проводится впервые. \nНО, ВО – 1 раз в 2 года (ответственный за осуществление производственного контроля за эксплуатацией сосуда). \nНО, ВО – 1 раз в 4 года (уполномоченная специализированная организация, ответственный за осуществление производственного контроля за эксплуатацией сосуда). \nГИ – 1 раз в 8 лет (уполномоченная специализированная организация, ответственный за осуществление производственного контроля за эксплуатацией сосуда)",info_repair:"В представленной технической документации не отмечено",danger_places:"Места концентраций напряжений – продольные и кольцевые сварные швы, места вварки штуцеров; места наиболее вероятного коррозионного износа – внутренняя поверхность нижнего днища"}},m.setSelected=f,i()}e.$inject=["$scope","UserData","Department","Passport","Upload","ServerData"],angular.module("app.report").controller("ReportContainerController",e)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGhlbnRpY2F0aW9uL2FwcC5hdXRoZW50aWNhdGlvbi5zZXJ2aWNlLm1vZHVsZS5qcyIsImF1dGhlbnRpY2F0aW9uL2FwcC5jb29raWVzLnNlcnZpY2UubW9kdWxlLmpzIiwiYXV0aGVudGljYXRpb24vYXBwLmRlcGFydG1lbnQuc2VydmljZS5tb2R1bGUuanMiLCJhdXRoZW50aWNhdGlvbi9hcHAubG9naW4ubW9kdWxlLmpzIiwiYXV0aGVudGljYXRpb24vYXBwLm1haW4ubW9kdWxlLmpzIiwiYXV0aGVudGljYXRpb24vYXBwLm1vZHVsZS5qcyIsImF1dGhlbnRpY2F0aW9uL2FwcC5yZWdpc3Rlci5tb2R1bGUuanMiLCJhdXRoZW50aWNhdGlvbi9hcHAucm91dGVzLm1vZHVsZS5qcyIsImF1dGhlbnRpY2F0aW9uL2FwcC50b29sYmFyLm1vZHVsZS5qcyIsImVuZ2luZS9hcHAuZW5naW5lLnNlcnZpY2UubW9kdWxlLmpzIiwiZmlsZXN0b3JhZ2UvYXBwLnVwbG9hZC5tb2R1bGUuanMiLCJmaWxlc3RvcmFnZS9hcHAudXBsb2FkLnNlcnZpY2UubW9kdWxlLmpzIiwicmVwb3J0L2FwcC5wYXNzcG9ydC5tb2R1bGUuanMiLCJyZXBvcnQvYXBwLnBhc3Nwb3J0LnNlcnZpY2UubW9kdWxlLmpzIiwic2VydmVyZGF0YS9hcHAuc2VydmVyZGF0YS5zZXJ2aWNlLm1vZHVsZS5qcyIsInVzZXIvYXBwLmRhdGVwaWNrZXIubW9kdWxlLmpzIiwidXNlci9hcHAudXNlcmRhdGEuY29udHJvbGxlci5tb2R1bGUuanMiLCJ1c2VyL2FwcC51c2VyZGF0YS5zZXJ2aWNlLm1vZHVsZS5qcyIsInJlcG9ydC9yZXBvcnQvYXBwLnJlcG9ydC5tb2R1bGUuanMiLCJhdXRoZW50aWNhdGlvbi9hcHAuYXV0aGVudGljYXRpb24uc2VydmljZS5qcyIsImF1dGhlbnRpY2F0aW9uL2FwcC5jb29raWVzLnNlcnZpY2UuanMiLCJhcHAubWluLmpzIiwiYXV0aGVudGljYXRpb24vYXBwLmRlcGFydG1lbnQuc2VydmljZS5qcyIsImF1dGhlbnRpY2F0aW9uL2FwcC5qcyIsImF1dGhlbnRpY2F0aW9uL2FwcC5sb2dpbi5qcyIsImF1dGhlbnRpY2F0aW9uL2FwcC5tYWluLmpzIiwiYXV0aGVudGljYXRpb24vYXBwLnJlZ2lzdGVyLmpzIiwiYXV0aGVudGljYXRpb24vYXBwLnJvdXRlcy5qcyIsImF1dGhlbnRpY2F0aW9uL2FwcC50b29sYmFyLmpzIiwiZW5naW5lL2FwcC5lbmdpbmUuc2VydmljZS5qcyIsImZpbGVzdG9yYWdlL2FwcC51cGxvYWQuanMiLCJmaWxlc3RvcmFnZS9hcHAudXBsb2FkLnNlcnZpY2UuanMiLCJyZXBvcnQvYXBwLnBhc3Nwb3J0LmF1dG9mb2N1cy5kaXJlY3RpdmUuanMiLCJyZXBvcnQvYXBwLnBhc3Nwb3J0LmNoZWNrbWFyay5kaXJlY3RpdmUuanMiLCJyZXBvcnQvYXBwLnBhc3Nwb3J0LmpzIiwicmVwb3J0L2FwcC5wYXNzcG9ydC5zZXJ2aWNlLmpzIiwicmVwb3J0L2FwcC5wYXNzcG9ydC52YWxpZEZpbGUuZGlyZWN0aXZlLmpzIiwic2VydmVyZGF0YS9hcHAuc2VydmVyZGF0YS5zZXJ2aWNlLmpzIiwidXNlci9hcHAuZGF0ZXBpY2tlci5qcyIsInVzZXIvYXBwLnVzZXJkYXRhLmNvbnRyb2xsZXIuanMiLCJ1c2VyL2FwcC51c2VyZGF0YS5zZXJ2aWNlLmpzIiwidXNlci9nbXAtaW5wdXQuZGlyZWN0aXZlLmpzIiwicmVwb3J0L3JlcG9ydC9hcHAucmVwb3J0LmpzIiwicmVwb3J0L3JlcG9ydF9jb250YWluZXIvYXBwLnJlcG9ydC5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiQXV0aGVudGljYXRpb24iLCIkaHR0cCIsIkNvb2tpZXMiLCIkcm9vdFNjb3BlIiwiJHN0YXRlIiwiaXNBdXRoZW50aWNhdGVkIiwiaXNTZXQiLCJsb2dpbiIsImVtYWlsIiwicGFzc3dvcmQiLCJwb3N0IiwidGhlbiIsImxvZ2luU3VjY2VzcyIsImxvZ2luRmFpbCIsImxvZ291dCIsImxvZ291dFN1Y2Nlc3MiLCJyZWdpc3RlciIsImRlcGFydG1lbnRfaWQiLCJyZXNwb25zZSIsInNldCIsImRhdGEiLCIkZW1pdCIsImdvIiwicmVtb3ZlIiwidW5kZWZpbmVkIiwiYXV0aGVudGljYXRpb24iLCJmYWN0b3J5IiwiJGluamVjdCIsIiRjb29raWVzIiwiZ2V0IiwiSlNPTiIsInBhcnNlIiwiY29va2llTmFtZSIsImUiLCJwdXQiLCJzdHJpbmdpZnkiLCJjb29raWVzIiwiRGVwYXJ0bWVudCIsIiRyZXNvdXJjZSIsIm1lYXN1cmVycyIsIm1ldGhvZCIsImlzQXJyYXkiLCJwYXJhbXMiLCJkZXBJZCIsInVybCIsInJ1biIsImRlZmF1bHRzIiwieHNyZkhlYWRlck5hbWUiLCJ4c3JmQ29va2llTmFtZSIsIkxvZ2luQ29udHJvbGxlciIsInZtIiwiYWN0aXZhdGUiLCJ0aGlzIiwiY29udHJvbGxlciIsIk1haW5Db250cm9sbGVyIiwiJGxvY2F0aW9uIiwicGF0aCIsIiRvbiIsImV2ZW50IiwibWVudSIsInNldHVwTWVudSIsIm5hbWUiLCJsaW5rIiwicmVmIiwicmVwb3J0X3R5cGVzIiwiZGVwYXJ0bWVudCIsImZvckVhY2giLCJyZXBvcnQiLCJwdXNoIiwiUmVnaXN0ZXJDb250cm9sbGVyIiwibG9hZERlcGFydG1lbnRzIiwicmVnaXN0ZXJTdWNjZXNzIiwicmVnaXN0ZXJGYWlsIiwiY29uc29sZSIsImxvZyIsInF1ZXJ5IiwiYWxsRGVwcyIsImlkIiwiY29uZmlnIiwiJHN0YXRlUHJvdmlkZXIiLCIkdXJsUm91dGVyUHJvdmlkZXIiLCIkcmVzb3VyY2VQcm92aWRlciIsIiRsb2NhdGlvblByb3ZpZGVyIiwic3RhdGUiLCJjb250cm9sbGVyQXMiLCJ0ZW1wbGF0ZVVybCIsIm90aGVyd2lzZSIsInN0cmlwVHJhaWxpbmdTbGFzaGVzIiwiaHRtbDVNb2RlIiwiaGFzaFByZWZpeCIsImRvYyIsImVsZW1lbnQiLCJkb2N1bWVudCIsIm9uIiwibmF2YmFyIiwiZmluZCIsIm9wZW5lZCIsImhhc0NsYXNzIiwiY29sbGFwc2UiLCJUb29sYmFyQ29udHJvbGxlciIsIkVuZ2luZSIsImdldEFsbEVuZ2luZXMiLCJlbmdpbmUiLCJVcGxvYWRDb250cm9sbGVyIiwiJHNjb3BlIiwiVXBsb2FkIiwiVXBsb2FkU2VydmljZSIsImdldFVwbG9hZGVkRmlsZXMiLCJmaWxlU2VsZWN0ZWQiLCJ1cGxvYWQiLCJmaWxlcyIsImZpbGUiLCJmaWxldXBsb2FkIiwicmVzcCIsInN0YXR1cyIsInVwbG9hZGVkRmlsZXMiLCJzZWxlY3RlZCIsInJlbW92ZUZpbGVFbnRyeSIsInYiLCJrIiwic3BsaWNlIiwic29ydE9yZGVyIiwic2VydmljZSIsIkF1dG9mb2N1c0RpcmVjdGl2ZSIsIiR0aW1lb3V0IiwicmVzdHJpY3QiLCIkZWxlbWVudCIsImZvY3VzIiwiZGlyZWN0aXZlIiwiQ2hlY2ttYXJrRGlyZWN0aXZlIiwicmVxdWlyZSIsInNjb3BlIiwiZWxlbSIsImF0dHJzIiwiZm9ybUNvbnRyb2xsZXIiLCIkbmFtZSIsInNob3dDaGVja21hcmsiLCIkd2F0Y2giLCJuZXdWYWx1ZSIsInRyYW5zY2x1ZGUiLCJ0ZW1wbGF0ZSIsIlBhc3Nwb3J0Q29udHJvbGxlciIsIlVzZXJEYXRhIiwiUGFzc3BvcnQiLCJmaWVsZG5hbWUiLCJ0ZWFtIiwicmVxdWlyZWQiLCJkb2NzIiwiZ2V0RW1wbG95ZWVzIiwiZ2V0RW5naW5lcyIsImdldE9yZ3MiLCJnZXRUQ2xhc3NlcyIsImFkZEVtcGxveWVlIiwiY3JlYXRlUGFzc3BvcnQiLCJ0eXBlIiwidGhlcm0iLCJ0Y2xhc3MiLCJ0Y2xhc3NlcyIsImFsbCIsImZpbHRlciIsImVsIiwiZ2V0QWxsVXNlcnMiLCJhbGxFbXBsb3llZXMiLCJvcmdzIiwiZ2V0TFBVcyIsIm9yZ05hbWUiLCJvcmdhbiIsImxwdXMiLCJzZXRTZWxlY3RlZCIsIml0ZW0iLCJpbmRleCIsImluZGV4T2YiLCJ2YWx1ZSIsInBhZ2VzIiwicmFua3MiLCJzZXJpYWxfbnVtYmVyIiwid29ya0JlZ2luIiwid29ya0VuZCIsImludmVzdGlnYXRpb25EYXRlIiwidmlicm8iLCJvcmRlciIsInJlc2lzdGFuY2UiLCJyZXBvcnRfZGF0YSIsInJlc3BvbnNlVHlwZSIsImhlYWRlcnMiLCJDb250ZW50LVR5cGUiLCJzdWNjZXNzIiwiQmxvYiIsInNhdmVBcyIsIm9yZ0lkIiwicGFzc3BvcnQiLCJWYWxpZEZpbGVEaXJlY3RpdmUiLCJuZ01vZGVsIiwiYmluZCIsIiRhcHBseSIsIiRzZXRWaWV3VmFsdWUiLCJ2YWwiLCIkcmVuZGVyIiwiU2VydmVyRGF0YSIsIkRhdGVwaWNrZXJDb250cm9sbGVyIiwidWliRGF0ZXBpY2tlclBvcHVwQ29uZmlnIiwiY2xvc2VUZXh0IiwiY3VycmVudFRleHQiLCJjbGVhclRleHQiLCJkYXRlT3B0aW9ucyIsInN0YXJ0aW5nRGF5IiwieWVhck9wdGlvbnMiLCJkYXRlcGlja2VyTW9kZSIsIm1heE1vZGUiLCJtaW5Nb2RlIiwiZm9ybWF0WWVhciIsIm9wZW4iLCJwb3B1cCIsIlVzZXJEYXRhQ29udHJvbGxlciIsInVwZGF0ZVByb2ZpbGUiLCJ1cGRhdGUiLCJ1c2VyZGF0YSIsIiRxIiwiY2xlYW4iLCJjb29raWUiLCJnZXRBbGxVc2Vyc1N1Y2Nlc3MiLCJpc0xvYWRpbmciLCJ1cGRhdGVTdWNjZXNzZnVsbCIsInVwZGF0ZURCIiwidXNlcm5hbWUiLCJmaXJzdF9uYW1lIiwibGFzdF9uYW1lIiwibWlkZGxlX25hbWUiLCJ1cGRhdGVTdWNjZXNzIiwidXBkYXRlRmFpbGVkIiwicmVqZWN0IiwiZ21wSW5wdXQiLCJpc1ZhbGlkIiwidXNlckZvcm0iLCIkdG91Y2hlZCIsIlJlcG9ydENvbnRyb2xsZXIiLCJpbmZvIiwibGljZW5zZSIsIm9ial9kYXRhIiwiZGV0YWlsX2luZm8iLCJhZGRUb0NvbGxlY3Rpb24iLCJhcnIiLCJ0cmltIiwicHJvY0tleVByZXNzIiwiY2xpY2tFdmVudCIsIndoaWNoIiwicHJldmVudERlZmF1bHQiLCJ0YXJnZXQiLCJjb250cm9sX3R5cGVzIiwiZnVsbF9uYW1lIiwibWFpbiIsInRoZXJtMSIsInRoZXJtMiIsImxpY2Vuc2VzIiwiUmVwb3J0Q29udGFpbmVyQ29udHJvbGxlciIsImdldENvbnRhaW5lcnMiLCJjYXRlZ29yeSIsImRldmljZXMiLCJkZXZpY2VfY29uZGl0aW9ucyIsImluZm9faW52ZXN0aWdhdGlvbiIsImluZm9fcmVwYWlyIiwiZGFuZ2VyX3BsYWNlcyJdLCJtYXBwaW5ncyI6IkNBQUEsV0FDQSxZQUVBQSxTQUFBQyxPQUFBLDRCQ0hBLFdBQ0EsWUFFQUQsU0FBQUMsT0FBQSxlQUFBLGlCQ0hBLFdBQ0EsWUFFQUQsU0FBQUMsT0FBQSxrQkFBQSxrQkNIQSxXQUNBLFlBRUFELFNBQUFDLE9BQUEsYUFBQSxhQUFBLGlCQ0hBLFdBQ0EsWUFFQUQsU0FBQUMsT0FBQSxZQUFBLGlCQ0hBLFdBQ0EsWUFFQUQsU0FBQUMsT0FBQSxPQUNBLGFBQ0EscUJBQ0EsaUJBQ0EsaUJBQ0EscUJBQ0EsV0FDQSxpQkFDQSxZQUNBLGVBQ0EsY0FDQSx1QkFDQSwwQkFDQSxjQUNBLGFBQ0EscUJBQ0EsZUFDQSx1QkFDQSxrQkNyQkEsV0FDQSxZQUVBRCxTQUFBQyxPQUFBLHNCQ0hBLFdBQ0EsWUFFQUQsU0FBQUMsT0FBQSxjQUNBLFlBQ0Esa0JDTEEsV0FDQSxZQUVBRCxTQUFBQyxPQUFBLHFCQ0hBLFdBQ0EsWUFFQUQsU0FDQUMsT0FBQSw0QkNKQSxXQUNBLFlBRUFELFNBQUFDLE9BQUEsY0FBQSxvQkNIQSxXQUNBLFlBRUFELFNBQUFDLE9BQUEsNEJDSEEsV0FDQSxZQUVBRCxTQUFBQyxPQUFBLGdCQUFBLGFBQUEsaUJDSEEsV0FDQSxZQUVBRCxTQUFBQyxPQUFBLDhCQ0hBLFdBQ0EsWUFFQUQsU0FBQUMsT0FBQSxrQkFBQSxrQkNIQSxXQUNBLFlBRUFELFNBQUFDLE9BQUEsa0JBQUEsb0JDSEEsV0FDQSxZQUVBRCxTQUFBQyxPQUFBLGlDQ0hBLFdBQ0EsWUFFQUQsU0FBQUMsT0FBQSw4QkNIQSxXQUNBLFlBRUFELFNBQUFDLE9BQUEsY0FBQSxhQUFBLGlCQ0hBLFdBQ0EsWUFR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QWhOLEVBQUF1RyxlQUFBQSxFQUNBdkcsRUFBQStNLFFBQUFBLEVBR0EvTSxFQUFBcUgsUUFDQXJILEVBQUFpSCxRQUNBakgsRUFBQTJILE1BQUFBLEVBR0EzSCxFQUFBa0gsUUFBQUEsRUFFQWxILEVBQUFpQixRQUNBOEUsUUFDQTJGLE1BQ0F1QixtQkFBQSxnZUFPQUMsWUFBQSx3REFDQUMsY0FBQSxxTEFrQkFuTixFQUFBc0gsWUFBQUEsRUFFQXJILEl0QncwQ0kyTSxFQUEwQm5PLFNBQVcsU0FBVSxXQUFZLGFBQWMsV0FBWSxTQUFVLGNzQnI2Q25HN0IsUUFDQUMsT0FBQSxjQUNBc0QsV0FBQSw0QkFBQXlNIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5hdXRoZW50aWNhdGlvbicsIFtdKTtcblxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLmNvb2tpZXMnLCBbJ25nQ29va2llcyddKTtcblxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLmRlcGFydG1lbnQnLCBbJ25nUmVzb3VyY2UnXSk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAubG9naW4nLCBbJ25nTWVzc2FnZXMnLCAndWkucm91dGVyJ10pO1xufSkoKTtcblxuIiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAubWFpbicsIFsndWkucm91dGVyJ10pO1xufSkoKTtcblxuIiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAnLCBbXG4gICAgICAgICdhcHAuY29uZmlnJyxcbiAgICAgICAgJ2FwcC5hdXRoZW50aWNhdGlvbicsXG4gICAgICAgICdhcHAuZGVwYXJ0bWVudCcsXG4gICAgICAgICdhcHAuc2VydmVyZGF0YScsXG4gICAgICAgICdhcHAuZW5naW5lLnNlcnZpY2UnLFxuICAgICAgICAnYXBwLm1haW4nLFxuICAgICAgICAnYXBwLmRhdGVwaWNrZXInLFxuICAgICAgICAnYXBwLmxvZ2luJyxcbiAgICAgICAgJ2FwcC5yZWdpc3RlcicsXG4gICAgICAgICdhcHAuY29va2llcycsXG4gICAgICAgICdhcHAudXNlcmRhdGEuc2VydmljZScsXG4gICAgICAgICdhcHAudXNlcmRhdGEuY29udHJvbGxlcicsXG4gICAgICAgICdhcHAudG9vbGJhcicsXG4gICAgICAgICdhcHAudXBsb2FkJyxcbiAgICAgICAgJ2FwcC51cGxvYWQuc2VydmljZScsXG4gICAgICAgICdhcHAucGFzc3BvcnQnLFxuICAgICAgICAnYXBwLnBhc3Nwb3J0LnNlcnZpY2UnLFxuICAgICAgICAnYXBwLnJlcG9ydCcsXG4gICAgXSk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAucmVnaXN0ZXInLCBbXSk7XG59KSgpO1xuXG4iLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5jb25maWcnLCBbXG4gICAgICAgICd1aS5yb3V0ZXInLFxuICAgICAgICAnbmdSZXNvdXJjZSdcbiAgICBdKTtcbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC50b29sYmFyJywgW10pO1xufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ2FwcC5lbmdpbmUuc2VydmljZScsIFtdKTtcbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC51cGxvYWQnLCBbJ25nRmlsZVVwbG9hZCddKTtcblxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLnVwbG9hZC5zZXJ2aWNlJywgW10pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAucGFzc3BvcnQnLCBbJ25nTWVzc2FnZXMnLCAnbmdBbmltYXRlJ10pO1xufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLnBhc3Nwb3J0LnNlcnZpY2UnLCBbXSk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAuc2VydmVyZGF0YScsIFsnbmdSZXNvdXJjZSddKTtcbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5kYXRlcGlja2VyJywgWyd1aS5ib290c3RyYXAnXSk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAudXNlcmRhdGEuY29udHJvbGxlcicsIFtdKTtcbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC51c2VyZGF0YS5zZXJ2aWNlJywgW10pO1xufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLnJlcG9ydCcsIFsnbmdNZXNzYWdlcycsICduZ0FuaW1hdGUnXSk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnYXBwLmF1dGhlbnRpY2F0aW9uJylcbiAgICAgICAgLmZhY3RvcnkoJ0F1dGhlbnRpY2F0aW9uJywgQXV0aGVudGljYXRpb24pO1xuXG4gICAgQXV0aGVudGljYXRpb24uJGluamVjdCA9IFsnJGh0dHAnLCAnQ29va2llcycsICckcm9vdFNjb3BlJywgJyRzdGF0ZSddO1xuXG4gICAgZnVuY3Rpb24gQXV0aGVudGljYXRpb24oJGh0dHAsIENvb2tpZXMsICRyb290U2NvcGUsICRzdGF0ZSkge1xuICAgICAgICB2YXIgYXV0aGVudGljYXRpb24gPSB7XG4gICAgICAgICAgICBpc0F1dGhlbnRpY2F0ZWQ6IGlzQXV0aGVudGljYXRlZCxcbiAgICAgICAgICAgIGxvZ2luOiBsb2dpbixcbiAgICAgICAgICAgIGxvZ291dDogbG9nb3V0LFxuICAgICAgICAgICAgcmVnaXN0ZXI6IHJlZ2lzdGVyXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIGF1dGhlbnRpY2F0aW9uO1xuXG4gICAgICAgIGZ1bmN0aW9uIGlzQXV0aGVudGljYXRlZCgpIHtcbiAgICAgICAgICAgIHJldHVybiBDb29raWVzLmlzU2V0KCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBsb2dpbihlbWFpbCwgcGFzc3dvcmQpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL2xvZ2luLycsIHtcbiAgICAgICAgICAgICAgICBlbWFpbDogZW1haWwsXG4gICAgICAgICAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkXG4gICAgICAgICAgICB9KS50aGVuKGxvZ2luU3VjY2VzcywgbG9naW5GYWlsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGxvZ291dCgpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL2xvZ291dC8nLCB7fSlcbiAgICAgICAgICAgICAgICAudGhlbihsb2dvdXRTdWNjZXNzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHJlZ2lzdGVyKGVtYWlsLCBwYXNzd29yZCwgZGVwYXJ0bWVudF9pZCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvZGVwYXJ0bWVudC8nICsgZGVwYXJ0bWVudF9pZCArICcvdXNlci8nLCB7XG4gICAgICAgICAgICAgICAgZW1haWw6IGVtYWlsLFxuICAgICAgICAgICAgICAgIHBhc3N3b3JkOiBwYXNzd29yZFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBsb2dpblN1Y2Nlc3MocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIENvb2tpZXMuc2V0KHJlc3BvbnNlLmRhdGEpO1xuICAgICAgICAgICAgJHJvb3RTY29wZS4kZW1pdCgnY29ra2llc1NldCcsICcnKTtcbiAgICAgICAgICAgICRzdGF0ZS5nbygnaG9tZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gbG9nb3V0U3VjY2VzcygpIHtcbiAgICAgICAgICAgIENvb2tpZXMucmVtb3ZlKCk7XG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRlbWl0KCdjb2traWVzU2V0JywgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgICRzdGF0ZS5nbygnbG9naW4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGxvZ2luRmFpbCgpIHtcbi8vICAgICAgICAgICAgJG1kRGlhbG9nXG4vLyAgICAgICAgICAgICAgICAuc2hvdyhcbi8vICAgICAgICAgICAgICAgICAgICAkbWREaWFsb2cuYWxlcnQoe1xuLy8gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ9Ce0YjQuNCx0LrQsCcsXG4vLyAgICAgICAgICAgICAgICAgICAgICAgIHRleHRDb250ZW50OiAn0J3QtdCy0LXRgNC90L4g0YPQutCw0LfQsNC9IGVtYWlsL9C/0LDRgNC+0LvRjCcsXG4vLyAgICAgICAgICAgICAgICAgICAgICAgIG9rOiAn0JfQsNC60YDRi9GC0YwnXG4vLyAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgfVxufSkoKTtcblxuIiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnYXBwLmNvb2tpZXMnKVxuICAgICAgICAuZmFjdG9yeSgnQ29va2llcycsIENvb2tpZXMpO1xuXG4gICAgZnVuY3Rpb24gQ29va2llcygkY29va2llcykge1xuICAgICAgICAnbmdJbmplY3QnO1xuICAgICAgICB2YXIgY29va2llTmFtZSA9ICdhdXRoZW50Y2F0ZWRBY2NvdW50JztcbiAgICAgICAgdmFyIGNvb2tpZXMgPSB7XG4gICAgICAgICAgICBnZXQ6IGdldCxcbiAgICAgICAgICAgIGlzU2V0OiBpc1NldCxcbiAgICAgICAgICAgIHNldDogc2V0LFxuICAgICAgICAgICAgcmVtb3ZlOiByZW1vdmVcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gY29va2llcztcblxuICAgICAgICBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKCRjb29raWVzLmdldChjb29raWVOYW1lKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaChlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGlzU2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuICEhJGNvb2tpZXMuZ2V0KGNvb2tpZU5hbWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc2V0KGRhdGEpIHtcbi8vICAgICAgICAgICAgJGxvZy5sb2coJ2Nvb2tpZSB0byBiZSBzZXQgJyArIEpTT04uc3RyaW5naWZ5KGRhdGEpKTtcbiAgICAgICAgICAgICRjb29raWVzLnB1dChjb29raWVOYW1lLCBKU09OLnN0cmluZ2lmeShkYXRhKSk7XG4vLyAgICAgICAgICAgICRsb2cubG9nKCdpbiBjb29raWU6ICcgKyBKU09OLnN0cmluZ2lmeShjb29raWVzLmdldCgpKSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiByZW1vdmUoKSB7XG4vLyAgICAgICAgICAgIGNvbnNvbGUubG9nKCdiZWZvcmUgZGVsZXRlICcgKyBKU09OLnBhcnNlKCRjb29raWVzLmdldChjb29raWVOYW1lKSkpO1xuICAgICAgICAgICAgJGNvb2tpZXMucmVtb3ZlKGNvb2tpZU5hbWUpO1xuLy8gICAgICAgICAgICBjb25zb2xlLmxvZygnYWZ0ZXIgZGVsZXRlICcgKyAkY29va2llcy5nZXQoY29va2llTmFtZSkpO1xuICAgICAgICB9XG4gICAgfVxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLmF1dGhlbnRpY2F0aW9uJywgW10pO1xuXG59KSgpO1xuXG4oZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5jb29raWVzJywgWyduZ0Nvb2tpZXMnXSk7XG5cbn0pKCk7XG5cbihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLmRlcGFydG1lbnQnLCBbJ25nUmVzb3VyY2UnXSk7XG59KSgpO1xuXG4oZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5sb2dpbicsIFsnbmdNZXNzYWdlcycsICd1aS5yb3V0ZXInXSk7XG59KSgpO1xuXG5cbihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLm1haW4nLCBbJ3VpLnJvdXRlciddKTtcbn0pKCk7XG5cblxuKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAnLCBbXG4gICAgICAgICdhcHAuY29uZmlnJyxcbiAgICAgICAgJ2FwcC5hdXRoZW50aWNhdGlvbicsXG4gICAgICAgICdhcHAuZGVwYXJ0bWVudCcsXG4gICAgICAgICdhcHAuc2VydmVyZGF0YScsXG4gICAgICAgICdhcHAuZW5naW5lLnNlcnZpY2UnLFxuICAgICAgICAnYXBwLm1haW4nLFxuICAgICAgICAnYXBwLmRhdGVwaWNrZXInLFxuICAgICAgICAnYXBwLmxvZ2luJyxcbiAgICAgICAgJ2FwcC5yZWdpc3RlcicsXG4gICAgICAgICdhcHAuY29va2llcycsXG4gICAgICAgICdhcHAudXNlcmRhdGEuc2VydmljZScsXG4gICAgICAgICdhcHAudXNlcmRhdGEuY29udHJvbGxlcicsXG4gICAgICAgICdhcHAudG9vbGJhcicsXG4gICAgICAgICdhcHAudXBsb2FkJyxcbiAgICAgICAgJ2FwcC51cGxvYWQuc2VydmljZScsXG4gICAgICAgICdhcHAucGFzc3BvcnQnLFxuICAgICAgICAnYXBwLnBhc3Nwb3J0LnNlcnZpY2UnLFxuICAgICAgICAnYXBwLnJlcG9ydCcsXG4gICAgXSk7XG59KSgpO1xuXG4oZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5yZWdpc3RlcicsIFtdKTtcbn0pKCk7XG5cblxuKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAuY29uZmlnJywgW1xuICAgICAgICAndWkucm91dGVyJyxcbiAgICAgICAgJ25nUmVzb3VyY2UnXG4gICAgXSk7XG59KSgpO1xuXG4oZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC50b29sYmFyJywgW10pO1xufSkoKTtcblxuKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnYXBwLmVuZ2luZS5zZXJ2aWNlJywgW10pO1xufSkoKTtcblxuKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAudXBsb2FkJywgWyduZ0ZpbGVVcGxvYWQnXSk7XG5cbn0pKCk7XG5cbihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLnVwbG9hZC5zZXJ2aWNlJywgW10pO1xuXG59KSgpO1xuXG4oZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5wYXNzcG9ydCcsIFsnbmdNZXNzYWdlcycsICduZ0FuaW1hdGUnXSk7XG59KSgpO1xuXG4oZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5wYXNzcG9ydC5zZXJ2aWNlJywgW10pO1xufSkoKTtcblxuKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAuc2VydmVyZGF0YScsIFsnbmdSZXNvdXJjZSddKTtcbn0pKCk7XG5cbihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLmRhdGVwaWNrZXInLCBbJ3VpLmJvb3RzdHJhcCddKTtcbn0pKCk7XG5cbihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLnVzZXJkYXRhLmNvbnRyb2xsZXInLCBbXSk7XG59KSgpO1xuXG4oZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC51c2VyZGF0YS5zZXJ2aWNlJywgW10pO1xufSkoKTtcblxuKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAucmVwb3J0JywgWyduZ01lc3NhZ2VzJywgJ25nQW5pbWF0ZSddKTtcbn0pKCk7XG5cbihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ2FwcC5hdXRoZW50aWNhdGlvbicpXG4gICAgICAgIC5mYWN0b3J5KCdBdXRoZW50aWNhdGlvbicsIEF1dGhlbnRpY2F0aW9uKTtcblxuICAgIEF1dGhlbnRpY2F0aW9uLiRpbmplY3QgPSBbJyRodHRwJywgJ0Nvb2tpZXMnLCAnJHJvb3RTY29wZScsICckc3RhdGUnXTtcblxuICAgIGZ1bmN0aW9uIEF1dGhlbnRpY2F0aW9uKCRodHRwLCBDb29raWVzLCAkcm9vdFNjb3BlLCAkc3RhdGUpIHtcbiAgICAgICAgdmFyIGF1dGhlbnRpY2F0aW9uID0ge1xuICAgICAgICAgICAgaXNBdXRoZW50aWNhdGVkOiBpc0F1dGhlbnRpY2F0ZWQsXG4gICAgICAgICAgICBsb2dpbjogbG9naW4sXG4gICAgICAgICAgICBsb2dvdXQ6IGxvZ291dCxcbiAgICAgICAgICAgIHJlZ2lzdGVyOiByZWdpc3RlclxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBhdXRoZW50aWNhdGlvbjtcblxuICAgICAgICBmdW5jdGlvbiBpc0F1dGhlbnRpY2F0ZWQoKSB7XG4gICAgICAgICAgICByZXR1cm4gQ29va2llcy5pc1NldCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gbG9naW4oZW1haWwsIHBhc3N3b3JkKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9sb2dpbi8nLCB7XG4gICAgICAgICAgICAgICAgZW1haWw6IGVtYWlsLFxuICAgICAgICAgICAgICAgIHBhc3N3b3JkOiBwYXNzd29yZFxuICAgICAgICAgICAgfSkudGhlbihsb2dpblN1Y2Nlc3MsIGxvZ2luRmFpbCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBsb2dvdXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9sb2dvdXQvJywge30pXG4gICAgICAgICAgICAgICAgLnRoZW4obG9nb3V0U3VjY2Vzcyk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiByZWdpc3RlcihlbWFpbCwgcGFzc3dvcmQsIGRlcGFydG1lbnRfaWQpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL2RlcGFydG1lbnQvJyArIGRlcGFydG1lbnRfaWQgKyAnL3VzZXIvJywge1xuICAgICAgICAgICAgICAgIGVtYWlsOiBlbWFpbCxcbiAgICAgICAgICAgICAgICBwYXNzd29yZDogcGFzc3dvcmRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gbG9naW5TdWNjZXNzKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICBDb29raWVzLnNldChyZXNwb25zZS5kYXRhKTtcbiAgICAgICAgICAgICRyb290U2NvcGUuJGVtaXQoJ2Nva2tpZXNTZXQnLCAnJyk7XG4gICAgICAgICAgICAkc3RhdGUuZ28oJ2hvbWUnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGxvZ291dFN1Y2Nlc3MoKSB7XG4gICAgICAgICAgICBDb29raWVzLnJlbW92ZSgpO1xuICAgICAgICAgICAgJHJvb3RTY29wZS4kZW1pdCgnY29ra2llc1NldCcsIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAkc3RhdGUuZ28oJ2xvZ2luJyk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBsb2dpbkZhaWwoKSB7XG4vLyAgICAgICAgICAgICRtZERpYWxvZ1xuLy8gICAgICAgICAgICAgICAgLnNob3coXG4vLyAgICAgICAgICAgICAgICAgICAgJG1kRGlhbG9nLmFsZXJ0KHtcbi8vICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICfQntGI0LjQsdC60LAnLFxuLy8gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0Q29udGVudDogJ9Cd0LXQstC10YDQvdC+INGD0LrQsNC30LDQvSBlbWFpbC/Qv9Cw0YDQvtC70YwnLFxuLy8gICAgICAgICAgICAgICAgICAgICAgICBvazogJ9CX0LDQutGA0YvRgtGMJ1xuLy8gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgIH1cbn0pKCk7XG5cblxuKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIENvb2tpZXMuJGluamVjdCA9IFtcIiRjb29raWVzXCJdO1xuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnYXBwLmNvb2tpZXMnKVxuICAgICAgICAuZmFjdG9yeSgnQ29va2llcycsIENvb2tpZXMpO1xuXG4gICAgZnVuY3Rpb24gQ29va2llcygkY29va2llcykge1xuICAgICAgICAnbmdJbmplY3QnO1xuICAgICAgICB2YXIgY29va2llTmFtZSA9ICdhdXRoZW50Y2F0ZWRBY2NvdW50JztcbiAgICAgICAgdmFyIGNvb2tpZXMgPSB7XG4gICAgICAgICAgICBnZXQ6IGdldCxcbiAgICAgICAgICAgIGlzU2V0OiBpc1NldCxcbiAgICAgICAgICAgIHNldDogc2V0LFxuICAgICAgICAgICAgcmVtb3ZlOiByZW1vdmVcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gY29va2llcztcblxuICAgICAgICBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKCRjb29raWVzLmdldChjb29raWVOYW1lKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaChlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGlzU2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuICEhJGNvb2tpZXMuZ2V0KGNvb2tpZU5hbWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc2V0KGRhdGEpIHtcbi8vICAgICAgICAgICAgJGxvZy5sb2coJ2Nvb2tpZSB0byBiZSBzZXQgJyArIEpTT04uc3RyaW5naWZ5KGRhdGEpKTtcbiAgICAgICAgICAgICRjb29raWVzLnB1dChjb29raWVOYW1lLCBKU09OLnN0cmluZ2lmeShkYXRhKSk7XG4vLyAgICAgICAgICAgICRsb2cubG9nKCdpbiBjb29raWU6ICcgKyBKU09OLnN0cmluZ2lmeShjb29raWVzLmdldCgpKSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiByZW1vdmUoKSB7XG4vLyAgICAgICAgICAgIGNvbnNvbGUubG9nKCdiZWZvcmUgZGVsZXRlICcgKyBKU09OLnBhcnNlKCRjb29raWVzLmdldChjb29raWVOYW1lKSkpO1xuICAgICAgICAgICAgJGNvb2tpZXMucmVtb3ZlKGNvb2tpZU5hbWUpO1xuLy8gICAgICAgICAgICBjb25zb2xlLmxvZygnYWZ0ZXIgZGVsZXRlICcgKyAkY29va2llcy5nZXQoY29va2llTmFtZSkpO1xuICAgICAgICB9XG4gICAgfVxufSkoKTtcblxuKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnYXBwLmRlcGFydG1lbnQnKVxuICAgICAgICAuZmFjdG9yeSgnRGVwYXJ0bWVudCcsIERlcGFydG1lbnQpO1xuXG4gICAgRGVwYXJ0bWVudC4kaW5qZWN0ID0gWyckcmVzb3VyY2UnXTtcblxuICAgIGZ1bmN0aW9uIERlcGFydG1lbnQoJHJlc291cmNlKSB7XG4gICAgICAgIHJldHVybiAkcmVzb3VyY2UoJy9hcGkvZGVwYXJ0bWVudC86ZGVwSWQvJywge30sIHtcbiAgICAgICAgICAgIG1lYXN1cmVyczoge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ2dldCcsXG4gICAgICAgICAgICAgICAgaXNBcnJheTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHtkZXBJZDogMX0sXG4gICAgICAgICAgICAgICAgdXJsOiAnL2FwaS9kZXBhcnRtZW50LzpkZXBJZC9tZWFzdXJlci8nXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn0pKCk7XG5cbihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgICAgIC5ydW4oWyckaHR0cCcsXG4gICAgICAgICAgICBmdW5jdGlvbigkaHR0cCkge1xuICAgICAgICAgICAgICAgICRodHRwLmRlZmF1bHRzLnhzcmZIZWFkZXJOYW1lID0gJ1gtQ1NSRlRva2VuJztcbiAgICAgICAgICAgICAgICAkaHR0cC5kZWZhdWx0cy54c3JmQ29va2llTmFtZSA9ICdjc3JmdG9rZW4nO1xuICAgICAgICB9XSk7XG5cbn0pKCk7XG5cbihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBMb2dpbkNvbnRyb2xsZXIuJGluamVjdCA9IFtcIkF1dGhlbnRpY2F0aW9uXCJdO1xuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnYXBwLmxvZ2luJylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0xvZ2luQ29udHJvbGxlcicsIExvZ2luQ29udHJvbGxlcik7XG5cbiAgICBmdW5jdGlvbiBMb2dpbkNvbnRyb2xsZXIoQXV0aGVudGljYXRpb24pIHtcbiAgICAgICAgJ25nSW5qZWN0JztcbiAgICAgICAgdmFyIHZtID0gdGhpcztcblxuICAgICAgICB2bS5sb2dpbiA9IGxvZ2luO1xuXG4gICAgICAgIGFjdGl2YXRlKCk7XG5cbiAgICAgICAgZnVuY3Rpb24gbG9naW4oKSB7XG4gICAgICAgICAgICBBdXRoZW50aWNhdGlvbi5sb2dpbih2bS5lbWFpbCwgdm0ucGFzc3dvcmQpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICAgICAgICBpZiAoQXV0aGVudGljYXRpb24uaXNBdXRoZW50aWNhdGVkKCkpIHtcbiAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ2hvbWUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn0pKCk7XG5cblxuKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnYXBwLm1haW4nKVxuICAgICAgICAuY29udHJvbGxlcignTWFpbkNvbnRyb2xsZXInLCBNYWluQ29udHJvbGxlcik7XG5cbiAgICBNYWluQ29udHJvbGxlci4kaW5qZWN0ID0gWydBdXRoZW50aWNhdGlvbicsICckbG9jYXRpb24nLCAnQ29va2llcycsICckcm9vdFNjb3BlJ107XG5cbiAgICBmdW5jdGlvbiBNYWluQ29udHJvbGxlcihBdXRoZW50aWNhdGlvbiwgJGxvY2F0aW9uLCBDb29raWVzLCAkcm9vdFNjb3BlKSB7XG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG4gICAgICAgIHZtLm1lbnUgPSBbXTtcblxuICAgICAgICBhY3RpdmF0ZSgpO1xuXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgICAgICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICAgICAgICBpZiAoIUF1dGhlbnRpY2F0aW9uLmlzQXV0aGVudGljYXRlZCgpKSB7XG4gICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy9sb2dpbicpO1xuICAgICAgICAgICAgfSBcblxuICAgICAgICAgICAgJHJvb3RTY29wZS4kb24oJ2Nva2tpZXNTZXQnLCBmdW5jdGlvbihldmVudCwgZGF0YSkge1xuICAgICAgICAgICAgICAgIGlmIChkYXRhID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdm0ubWVudSA9IFtdO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNldHVwTWVudSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBzZXR1cE1lbnUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNldHVwTWVudSgpIHtcbiAgICAgICAgICAgICAgICB2bS5tZW51ID0gW3tuYW1lOiAn0J/RgNC+0YTQuNC70YwnLCBsaW5rOiAn0J/RgNC+0YTQuNC70YwnLCByZWY6ICdwcm9maWxlJ31dO1xuXG4gICAgICAgICAgICAgICAgdmFyIGNvb2tpZXMgPSBDb29raWVzLmdldCgpO1xuICAgICAgICAgICAgICAgIGlmIChjb29raWVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlcG9ydF90eXBlcyA9IGNvb2tpZXMuZGVwYXJ0bWVudC5yZXBvcnRfdHlwZXM7XG4gICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChyZXBvcnRfdHlwZXMsIGZ1bmN0aW9uKHJlcG9ydCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdm0ubWVudS5wdXNoKHtuYW1lOiByZXBvcnQubmFtZSwgbGluazogcmVwb3J0Lm5hbWUsIHJlZjogcmVwb3J0LnVybH0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB2bS5pc0F1dGhlbnRpY2F0ZWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBBdXRoZW50aWNhdGlvbi5pc0F1dGhlbnRpY2F0ZWQoKTtcbiAgICAgICAgfTtcbiAgICB9XG59KSgpO1xuXG4oZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCdhcHAucmVnaXN0ZXInKVxuICAgICAgICAuY29udHJvbGxlcignUmVnaXN0ZXJDb250cm9sbGVyJywgUmVnaXN0ZXJDb250cm9sbGVyKTtcblxuICAgIFJlZ2lzdGVyQ29udHJvbGxlci4kaW5qZWN0ID0gWydBdXRoZW50aWNhdGlvbicsICdEZXBhcnRtZW50J107XG5cbiAgICBmdW5jdGlvbiBSZWdpc3RlckNvbnRyb2xsZXIoQXV0aGVudGljYXRpb24sIERlcGFydG1lbnQpIHtcbiAgICAgICAgdmFyIHZtID0gdGhpcztcblxuICAgICAgICB2bS5sb2FkRGVwYXJ0bWVudHMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIERlcGFydG1lbnQucXVlcnkoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgIHZtLmFsbERlcHMgPSBkYXRhO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdm0ucmVnaXN0ZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIEF1dGhlbnRpY2F0aW9uLnJlZ2lzdGVyKHZtLmVtYWlsLCB2bS5wYXNzd29yZCwgdm0uZGVwYXJ0bWVudC5pZClcbiAgICAgICAgICAgICAgICAudGhlbihyZWdpc3RlclN1Y2Nlc3MsIHJlZ2lzdGVyRmFpbCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgYWN0aXZhdGUoKTtcblxuICAgICAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgICAgICAgIHZtLmxvYWREZXBhcnRtZW50cygpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gcmVnaXN0ZXJTdWNjZXNzKCkge1xuICAgICAgICAgICAgQXV0aGVudGljYXRpb24ubG9naW4odm0uZW1haWwsIHZtLnBhc3N3b3JkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHJlZ2lzdGVyRmFpbCgpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdSZWdpc3RyYXRpb24gZmFpbGVkJyk7XG4gICAgICAgIH1cbiAgICB9XG59KSgpO1xuXG5cbihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ2FwcC5jb25maWcnKVxuICAgICAgICAuY29uZmlnKGNvbmZpZylcbiAgICAgICAgLnJ1bihydW4pO1xuXG4gICAgY29uZmlnLiRpbmplY3QgPSBbXG4gICAgICAgICckc3RhdGVQcm92aWRlcicsXG4gICAgICAgICckdXJsUm91dGVyUHJvdmlkZXInLFxuICAgICAgICAnJHJlc291cmNlUHJvdmlkZXInLFxuICAgICAgICAnJGxvY2F0aW9uUHJvdmlkZXInXG4gICAgXTtcblxuICAgIGZ1bmN0aW9uIGNvbmZpZygkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyLCAkcmVzb3VyY2VQcm92aWRlciwgJGxvY2F0aW9uUHJvdmlkZXIpIHtcbiAgICAgICAgJHN0YXRlUHJvdmlkZXJcbiAgICAgICAgICAgIC5zdGF0ZSgnaG9tZScsIHtcbiAgICAgICAgICAgICAgICB1cmw6ICcvJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5zdGF0ZSgnbG9naW4nLCB7XG4gICAgICAgICAgICAgICAgdXJsOiAnL2xvZ2luJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnTG9naW5Db250cm9sbGVyJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvc3RhdGljL3NyYy9hcHAvdXNlci9sb2dpbi50cGwuaHRtbCdcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuc3RhdGUoJ3JlZ2lzdGVyJywge1xuICAgICAgICAgICAgICAgIHVybDogJy9yZWdpc3RlcicsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ1JlZ2lzdGVyQ29udHJvbGxlcicsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3N0YXRpYy9zcmMvYXBwL3VzZXIvcmVnaXN0ZXIudHBsLmh0bWwnXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnN0YXRlKCdwcm9maWxlJywge1xuICAgICAgICAgICAgICAgIHVybDogJy9wcm9maWxlJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnVXNlckRhdGFDb250cm9sbGVyJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvc3RhdGljL3NyYy9hcHAvdXNlci9wcm9maWxlLnRwbC5odG1sJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5zdGF0ZSgndXBsb2FkJywge1xuICAgICAgICAgICAgICAgIHVybDogJy91cGxvYWQnLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdVcGxvYWRDb250cm9sbGVyJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvc3RhdGljL3NyYy9hcHAvZmlsZXN0b3JhZ2UvdXBsb2FkLnRwbC5odG1sJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5zdGF0ZSgncGFzc3BvcnQnLCB7XG4gICAgICAgICAgICAgICAgdXJsOiAnL3Bhc3Nwb3J0JyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnUGFzc3BvcnRDb250cm9sbGVyJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvc3RhdGljL3NyYy9hcHAvcmVwb3J0L3Bhc3Nwb3J0LnRwbC5odG1sJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5zdGF0ZSgncmVwb3J0Jywge1xuICAgICAgICAgICAgICAgIHVybDogJy9yZXBvcnQnLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdSZXBvcnRDb250cm9sbGVyJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvc3RhdGljL3NyYy9hcHAvcmVwb3J0L3JlcG9ydC9yZXBvcnQudHBsLmh0bWwnXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnN0YXRlKCdyZXBvcnQtY29udGFpbmVyJywge1xuICAgICAgICAgICAgICAgIHVybDogJy9yZXBvcnQtY29udGFpbmVyJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnUmVwb3J0Q29udGFpbmVyQ29udHJvbGxlcicsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3N0YXRpYy9zcmMvYXBwL3JlcG9ydC9yZXBvcnRfY29udGFpbmVyL3JlcG9ydC50cGwuaHRtbCdcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJy9sb2dpbicpO1xuXG4gICAgICAgICRyZXNvdXJjZVByb3ZpZGVyLmRlZmF1bHRzLnN0cmlwVHJhaWxpbmdTbGFzaGVzID0gZmFsc2U7XG5cbiAgICAgICAgJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKHRydWUpO1xuICAgICAgICAkbG9jYXRpb25Qcm92aWRlci5oYXNoUHJlZml4KCchJyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcnVuKCkge1xuICAgICAgICB2YXIgZG9jID0gYW5ndWxhci5lbGVtZW50KGRvY3VtZW50KTtcbiAgICAgICAgZG9jLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIG5hdmJhciA9IGRvYy5maW5kKCcubmF2YmFyLWNvbGxhcHNlJyksXG4gICAgICAgICAgICAgICAgb3BlbmVkID0gbmF2YmFyLmhhc0NsYXNzKCdpbicpO1xuICAgICAgICAgICAgaWYgKG9wZW5lZCkge1xuICAgICAgICAgICAgICAgIG5hdmJhci5jb2xsYXBzZSgnaGlkZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59KSgpO1xuXG4oZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCdhcHAudG9vbGJhcicpXG4gICAgICAgIC5jb250cm9sbGVyKCdUb29sYmFyQ29udHJvbGxlcicsIFRvb2xiYXJDb250cm9sbGVyKTtcblxuICAgIFRvb2xiYXJDb250cm9sbGVyLiRpbmplY3QgPSBbJ0F1dGhlbnRpY2F0aW9uJ107XG5cbiAgICBmdW5jdGlvbiBUb29sYmFyQ29udHJvbGxlcihBdXRoZW50aWNhdGlvbikge1xuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuXG4gICAgICAgIHZtLmxvZ291dCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgQXV0aGVudGljYXRpb24ubG9nb3V0KCk7XG4gICAgICAgIH07XG4gICAgfVxufSkoKTtcblxuKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnYXBwLmVuZ2luZS5zZXJ2aWNlJylcbiAgICAgICAgLmZhY3RvcnkoJ0VuZ2luZScsIEVuZ2luZSk7XG5cbiAgICBFbmdpbmUuJGluamVjdCA9IFsnJGh0dHAnXTtcblxuICAgIGZ1bmN0aW9uIEVuZ2luZSgkaHR0cCkge1xuICAgICAgICB2YXIgZW5naW5lID0ge1xuICAgICAgICAgICAgZ2V0QWxsRW5naW5lczogZ2V0QWxsRW5naW5lc1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBlbmdpbmU7XG5cbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0QWxsRW5naW5lcygpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvZW5naW5lLycpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbn0pKCk7XG5cbihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ2FwcC51cGxvYWQnKVxuICAgICAgICAuY29udHJvbGxlcignVXBsb2FkQ29udHJvbGxlcicsIFVwbG9hZENvbnRyb2xsZXIpO1xuXG4gICAgVXBsb2FkQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCAnVXBsb2FkJywgJ1VwbG9hZFNlcnZpY2UnXTtcblxuICAgIGZ1bmN0aW9uIFVwbG9hZENvbnRyb2xsZXIoJHNjb3BlLCBVcGxvYWQsIFVwbG9hZFNlcnZpY2UpIHtcbiAgICAgICAgdmFyIHZtID0gdGhpcztcblxuICAgICAgICAkc2NvcGUuZmlsZVNlbGVjdGVkID0gZmlsZVNlbGVjdGVkO1xuXG4gICAgICAgIHZtLmZpbGVzID0gW107XG4gICAgICAgIHZtLnVwbG9hZCA9IHVwbG9hZDtcbiAgICAgICAgdm0udXBsb2FkZWRGaWxlcyA9IFtdO1xuICAgICAgICB2bS5yZW1vdmUgPSByZW1vdmU7XG4gICAgICAgIHZtLnNlbGVjdGVkID0gW107XG4gICAgICAgIHZtLnNvcnRPcmRlciA9ICctdXBsb2FkZWRfYXQnO1xuXG4gICAgICAgIGFjdGl2YXRlKCk7XG5cbiAgICAgICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICAgICAgICBnZXRVcGxvYWRlZEZpbGVzKCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBmaWxlU2VsZWN0ZWQoZWxlbWVudCkge1xuICAgICAgICAgICAgdXBsb2FkKGVsZW1lbnQuZmlsZXMpO1xuICAgICAgICAgICAgZ2V0VXBsb2FkZWRGaWxlcygpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gdXBsb2FkKGZpbGVzKSB7XG4gICAgICAgICAgICBhbmd1bGFyLmZvckVhY2goZmlsZXMsIGZ1bmN0aW9uKGZpbGUpIHtcbiAgICAgICAgICAgICAgICBVcGxvYWQudXBsb2FkKHtcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnL2FwaS91cGxvYWQvJyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge2ZpbGV1cGxvYWQ6IGZpbGV9XG4gICAgICAgICAgICAgICAgfSkuXG4gICAgICAgICAgICAgICAgdGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgZ2V0VXBsb2FkZWRGaWxlcygpO1xuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKHJlc3ApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yIHN0YXR1czogJyArIHJlc3Auc3RhdHVzKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0VXBsb2FkZWRGaWxlcygpIHtcbiAgICAgICAgICAgIFVwbG9hZFNlcnZpY2UucXVlcnkoKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3ApIHtcbiAgICAgICAgICAgICAgICAgICAgdm0udXBsb2FkZWRGaWxlcyA9IHJlc3A7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiByZW1vdmUoKSB7XG4gICAgICAgICAgICBhbmd1bGFyLmZvckVhY2godm0uc2VsZWN0ZWQsIGZ1bmN0aW9uKGZpbGUpIHtcbiAgICAgICAgICAgICAgICBVcGxvYWRTZXJ2aWNlLnJlbW92ZShmaWxlLmlkKTtcbiAgICAgICAgICAgICAgICByZW1vdmVGaWxlRW50cnkoZmlsZS5pZCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdm0uc2VsZWN0ZWQgPSBbXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHJlbW92ZUZpbGVFbnRyeShpZCkge1xuICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKHZtLnVwbG9hZGVkRmlsZXMsIGZ1bmN0aW9uKHYsIGspIHtcbiAgICAgICAgICAgICAgICBpZiAodm0udXBsb2FkZWRGaWxlc1trXS5pZCA9PT0gaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdm0udXBsb2FkZWRGaWxlcy5zcGxpY2UoaywgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG59KSgpO1xuXG4oZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCdhcHAudXBsb2FkLnNlcnZpY2UnKVxuICAgICAgICAuZmFjdG9yeSgnVXBsb2FkU2VydmljZScsIFVwbG9hZFNlcnZpY2UpO1xuXG4gICAgVXBsb2FkU2VydmljZS4kaW5qZWN0ID0gWyckaHR0cCddO1xuICAgIGZ1bmN0aW9uIFVwbG9hZFNlcnZpY2UoJGh0dHApIHtcbiAgICAgICAgdmFyIHNlcnZpY2UgPSB7XG4gICAgICAgICAgICBxdWVyeTogcXVlcnksXG4gICAgICAgICAgICByZW1vdmU6IHJlbW92ZVxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBzZXJ2aWNlO1xuXG4gICAgICAgIGZ1bmN0aW9uIHF1ZXJ5KCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9maWxlLycpLlxuICAgICAgICAgICAgICAgIHRoZW4oZnVuY3Rpb24ocmVzcCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzcC5kYXRhO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlKGlkKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZGVsZXRlKCcvYXBpL2ZpbGUvJyArIGlkICsgJy8nKS5cbiAgICAgICAgICAgICAgICB0aGVuKGZ1bmN0aW9uKHJlc3ApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3AuZGF0YTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbn0pKCk7XG5cbihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLnBhc3Nwb3J0JylcbiAgICAgICAgLmRpcmVjdGl2ZSgnYXV0b2ZvY3VzJywgQXV0b2ZvY3VzRGlyZWN0aXZlKTtcblxuICAgIEF1dG9mb2N1c0RpcmVjdGl2ZS4kaW5qZWN0ID0gWyckdGltZW91dCddXG4gICAgZnVuY3Rpb24gQXV0b2ZvY3VzRGlyZWN0aXZlKCR0aW1lb3V0KSB7XG5cdHJldHVybiB7XG5cdCAgICByZXN0cmljdDogJ0EnLFxuXHQgICAgbGluayA6IGZ1bmN0aW9uKCRzY29wZSwgJGVsZW1lbnQpIHtcblx0XHQgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0ICAgICRlbGVtZW50LmZvY3VzKCk7XG5cdFx0fSk7XG5cdCAgICB9XG5cdH1cbiAgICB9XG59KSgpO1xuXG5cbihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLnBhc3Nwb3J0JylcbiAgICAgICAgLmRpcmVjdGl2ZSgnY2hlY2ttYXJrJywgQ2hlY2ttYXJrRGlyZWN0aXZlKTtcblxuICAgIGZ1bmN0aW9uIENoZWNrbWFya0RpcmVjdGl2ZSgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlcXVpcmU6ICdeZm9ybScsXG4gICAgICAgICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW0sIGF0dHJzLCBmb3JtQ29udHJvbGxlcikge1xuICAgICAgICAgICAgICAgIGlmIChmb3JtQ29udHJvbGxlci4kbmFtZSA9PT0gJ3ZtLmRvY3NGb3JtJykge1xuICAgICAgICAgICAgICAgICAgICBzY29wZS5zaG93Q2hlY2ttYXJrID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzY29wZS4kd2F0Y2goZm9ybUNvbnRyb2xsZXIuJG5hbWUgKyAnLiR2YWxpZCcsIGZ1bmN0aW9uKG5ld1ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUuc2hvd0NoZWNrbWFyayA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzY29wZS5zaG93Q2hlY2ttYXJrID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzY29wZTogdHJ1ZSxcbiAgICAgICAgICAgIHRyYW5zY2x1ZGU6IHRydWUsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogJzxzcGFuIG5nLWlmPVwic2hvd0NoZWNrbWFya1wiPicgK1xuICAgICAgICAgICAgICAgICc8aSBjbGFzcz1cImljb24gaW9uLWNoZWNrbWFya1wiIHN0eWxlPVwiY29sb3I6ICMwMGU2NzZcIj48L2k+Jm5ic3A7JyArXG4gICAgICAgICAgICAgICAgJzwvc3Bhbj4nICtcbiAgICAgICAgICAgICAgICAnPHNwYW4gbmctdHJhbnNjbHVkZT48L3NwYW4+J1xuICAgICAgICB9O1xuICAgIH1cbn0pKCk7XG5cbihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ2FwcC5wYXNzcG9ydCcpXG4gICAgICAgIC5jb250cm9sbGVyKCdQYXNzcG9ydENvbnRyb2xsZXInLCBQYXNzcG9ydENvbnRyb2xsZXIpO1xuXG4gICAgUGFzc3BvcnRDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICckc3RhdGUnLCAnVXNlckRhdGEnLCAnRGVwYXJ0bWVudCcsICdFbmdpbmUnLCAnUGFzc3BvcnQnLCAnVXBsb2FkJ107XG4gICAgZnVuY3Rpb24gUGFzc3BvcnRDb250cm9sbGVyKCRzY29wZSwgJHN0YXRlLCBVc2VyRGF0YSwgRGVwYXJ0bWVudCwgRW5naW5lLCBQYXNzcG9ydCwgVXBsb2FkKSB7XG5cbiAgICAgICAgJHNjb3BlLnVwbG9hZCA9IHVwbG9hZDtcblxuICAgICAgICB2YXIgdm0gPSB0aGlzLFxuICAgICAgICAgICAgZG9jcyA9IFtcbiAgICAgICAgICAgICAgICB7bmFtZTogJ9CW0YPRgNC90LDQuyDRgNC10LzQvtC90YLQsCDRjdC70LXQutGC0YDQvtC00LLQuNCz0LDRgtC10LvRjycsIHZhbHVlOiB0cnVlfSxcbiAgICAgICAgICAgICAgICB7bmFtZTogJ9CW0YPRgNC90LDQuyDRjdC60YHQv9C70YPQsNGC0LDRhtC40Lgg0Y3Qu9C10LrRgtGA0L7QtNCy0LjQs9Cw0YLQtdC70Y8nLCB2YWx1ZTogdHJ1ZX0sXG4gICAgICAgICAgICAgICAge25hbWU6ICfQmNC90YHRgtGA0YPQutGG0LjRjyDQv9C+INGN0LrRgdC/0LvRg9Cw0YLQsNGG0LjQuCDQt9Cw0LLQvtC00LAt0LjQt9Cz0L7RgtC+0LLQuNGC0LXQu9GPJywgdmFsdWU6IHRydWV9LFxuICAgICAgICAgICAgICAgIHtuYW1lOiAn0J/RgNC+0YLQvtC60L7Qu9GLINGI0YLQsNGC0L3Ri9GFINC40LfQvNC10YDQtdC90LjQuSDQuCDQuNGB0L/Ri9GC0LDQvdC40LknLCB2YWx1ZTogdHJ1ZX0sXG4gICAgICAgICAgICAgICAge25hbWU6ICfQn9Cw0YHQv9C+0YDRgiDQt9Cw0LLQvtC00LAt0LjQt9Cz0L7RgtC+0LLQuNGC0LXQu9GPINC90LAg0LLQt9GA0YvQstC+0LfQsNGJ0LjRidC10L3QvdGL0Lkg0Y3Qu9C10LrRgtGA0L7QtNCy0LjQs9Cw0YLQtdC70YwnLCB2YWx1ZTogdHJ1ZX0sXG4gICAgICAgICAgICAgICAge25hbWU6ICfQodGF0LXQvNCwINGN0LvQtdC60YLRgNC+0YHQvdCw0LHQttC10L3QuNGPINGN0LvQtdC60YLRgNC+0LTQstC40LPQsNGC0LXQu9GPJywgdmFsdWU6IHRydWV9XG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgcGFnZXMgPSBbXG4gICAgICAgICAgICAgICAgJ3RlYW0udHBsLmh0bWwnLFxuICAgICAgICAgICAgICAgICdtZWFzdXJlcnMudHBsLmh0bWwnLFxuICAgICAgICAgICAgICAgICdscHUudHBsLmh0bWwnLFxuICAgICAgICAgICAgICAgICdkYXRlcy50cGwuaHRtbCcsXG4gICAgICAgICAgICAgICAgJ2VuZ2luZXMudHBsLmh0bWwnLFxuICAgICAgICAgICAgICAgICd2YWx1ZXMudHBsLmh0bWwnLFxuICAgICAgICAgICAgICAgICdkb2NzLnRwbC5odG1sJyxcbiAgICAgICAgICAgICAgICAncGhvdG9zLnRwbC5odG1sJyxcbiAgICAgICAgICAgICAgICAndGhlcm0udHBsLmh0bWwnLFxuICAgICAgICAgICAgICAgICd2aWJyby50cGwuaHRtbCcsXG4gICAgICAgICAgICAgICAgJ3Jlc2lzdGFuY2UudHBsLmh0bWwnLFxuICAgICAgICAgICAgICAgICdzaWduZXJzLnRwbC5odG1sJ1xuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIHJhbmtzID0gW1xuICAgICAgICAgICAgICAgICfRgNGD0LrQvtCy0L7QtNC40YLQtdC70Ywg0LHRgNC40LPQsNC00YsnLFxuICAgICAgICAgICAgICAgICfQt9Cw0LwuINGA0YPQutC+0LLQvtC00LjRgtC10LvRjyDQsdGA0LjQs9Cw0LTRiycsXG4gICAgICAgICAgICAgICAgJ9GH0LvQtdC9INCx0YDQuNCz0LDQtNGLJ1xuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIG1lYXN1cmVycyA9IHtcbiAgICAgICAgICAgICAgICBhbGw6IERlcGFydG1lbnQubWVhc3VyZXJzKCksXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWQ6IFtdLFxuICAgICAgICAgICAgICAgIHNvcnRPcmRlcjogJ25hbWUnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZW5naW5lID0ge1xuICAgICAgICAgICAgICAgIGFsbDogW10sXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgJ3R5cGUnOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgJ3NlcmlhbF9udW1iZXInOiAwXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzb3J0T3JkZXI6ICduYW1lJ1xuICAgICAgICAgICAgfTtcblxuXG4gICAgICAgIHZtLmFkZEVtcGxveWVlID0gYWRkRW1wbG95ZWU7XG4gICAgICAgIHZtLmFsbEVtcGxveWVlcyA9IFtdO1xuICAgICAgICB2bS5jcmVhdGVQYXNzcG9ydCA9IGNyZWF0ZVBhc3Nwb3J0O1xuICAgICAgICB2bS5lbmdpbmUgPSBlbmdpbmU7XG4gICAgICAgIHZtLndvcmtCZWdpbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgdm0ud29ya0VuZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdm0uaW52ZXN0aWdhdGlvbkRhdGUgPSB1bmRlZmluZWQ7XG4gICAgICAgIHZtLmxwdXMgPSB7fTtcbiAgICAgICAgdm0ub3JncyA9IHt9O1xuICAgICAgICB2bS5wYWdlcyA9IHBhZ2VzO1xuICAgICAgICB2bS50Y2xhc3NlcyA9IHthbGw6IFtdLCBzZWxlY3RlZDogJyd9O1xuICAgICAgICB2bS5nZXRMUFVzID0gZ2V0TFBVcztcbiAgICAgICAgdm0ubWVhc3VyZXJzID0gbWVhc3VyZXJzO1xuICAgICAgICB2bS5yYW5rcyA9IHJhbmtzO1xuICAgICAgICB2bS5yZXBvcnQgPSB7XG4gICAgICAgICAgICB0ZWFtOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBtZWFzdXJlcnM6IG1lYXN1cmVycy5zZWxlY3RlZCxcbiAgICAgICAgICAgIGZpbGVzOiB7fSxcbiAgICAgICAgICAgIHRoZXJtOiB7fSxcbiAgICAgICAgICAgIHZpYnJvOiB7fSxcbiAgICAgICAgICAgIG9yZGVyOiB7fSxcbiAgICAgICAgICAgIHJlc2lzdGFuY2U6IHt9XG4gICAgICAgIH07XG4gICAgICAgIHZtLnNldFNlbGVjdGVkID0gc2V0U2VsZWN0ZWQ7XG5cbiAgICAgICAgYWN0aXZhdGUoKTtcblxuICAgICAgICBmdW5jdGlvbiB1cGxvYWQoZWxlbWVudCkge1xuICAgICAgICAgICAgdmFyIGZpZWxkbmFtZSA9IGVsZW1lbnQubmFtZTtcbiAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChlbGVtZW50LmZpbGVzLCBmdW5jdGlvbihmaWxlKSB7XG4gICAgICAgICAgICAgICAgVXBsb2FkLnVwbG9hZCh7XG4gICAgICAgICAgICAgICAgICAgIHVybDogJy9hcGkvdXBsb2FkLycsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtmaWxldXBsb2FkOiBmaWxlfVxuICAgICAgICAgICAgICAgIH0pLlxuICAgICAgICAgICAgICAgIHRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdm0ucmVwb3J0LmZpbGVzW2ZpZWxkbmFtZV0gPSByZXNwb25zZS5kYXRhLmlkO1xuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdFcnJvciBzdGF0dXM6ICcgKyByZXNwb25zZS5zdGF0dXMpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgICAgICAgIHZtLnJlcG9ydC50ZWFtID0gW3snbmFtZSc6ICcnLCAncmVxdWlyZWQnOiB0cnVlfV07XG4gICAgICAgICAgICB2bS5yZXBvcnQuZG9jcyA9IGRvY3M7XG4gICAgICAgICAgICBnZXRFbXBsb3llZXMoKTtcbiAgICAgICAgICAgIGdldEVuZ2luZXMoKTtcbiAgICAgICAgICAgIGdldE9yZ3MoKTtcbiAgICAgICAgICAgIGdldFRDbGFzc2VzKCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBhZGRFbXBsb3llZSgpIHtcbiAgICAgICAgICAgIHZtLnJlcG9ydC50ZWFtLnB1c2goe1xuICAgICAgICAgICAgICAgICduYW1lJzogJycsICdyZXF1aXJlZCc6IGZhbHNlXG4gICAgICAgICAgICB9KTtcbi8vICAgICAgICAgICAgY29uc29sZS5kaXIoJ3RlYW06ICcgKyBKU09OLnN0cmluZ2lmeSh2bS5yZXBvcnQudGVhbSkpO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZVBhc3Nwb3J0KCkge1xuXG4vLyAgICAgICAgICAgIGNvbnNvbGUubG9nKCdkb2NzICcgKyBKU09OLnN0cmluZ2lmeSh2bS5yZXBvcnQuZG9jcykpO1xuLy8gICAgICAgICAgICBjb25zb2xlLmxvZygnaW52ZXN0aWdhdGlvbkRhdGUgJyArIHZtLmludmVzdGlnYXRpb25EYXRlLnRvTG9jYWxlU3RyaW5nKCkpO1xuLy8gICAgICAgICAgICBjb25zb2xlLmxvZygnYmVnaW4gJyArIHZtLndvcmtCZWdpbik7XG4vLyAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlbmQgJyArIHZtLndvcmtFbmQudG9Mb2NhbGVTdHJpbmcoKSk7XG4vLyAgICAgICAgICAgIFBhc3Nwb3J0LmNyZWF0ZVBhc3Nwb3J0KHZtLndvcmtCZWdpbik7XG4gICAgICAgICAgICB2bS5yZXBvcnQudHlwZSA9ICdwYXNzcG9ydCc7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygndGVhbTonLCBKU09OLnN0cmluZ2lmeSh2bS5yZXBvcnQpKTtcbi8vICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgZGVsZXRlIHZtLnJlcG9ydC50ZWFtWzBdLnJlcXVpcmVkO1xuLy8gICAgICAgICAgICBjb25zb2xlLmRpcigndm0udGNsYXNzZXMuYWxsOiAnICsgSlNPTi5zdHJpbmdpZnkodm0udGNsYXNzZXMuYWxsKSk7XG4gICAgICAgICAgICB2bS5yZXBvcnQudGhlcm0udGNsYXNzID0gdm0udGNsYXNzZXMuYWxsLmZpbHRlcihmdW5jdGlvbihlbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBlbC5uYW1lID09PSB2bS50Y2xhc3Nlcy5zZWxlY3RlZDtcbiAgICAgICAgICAgIH0pWzBdLmlkO1xuLy8gICAgICAgICAgICBjb25zb2xlLmRpcignc2VsZWN0ZWQgY2xhc3M6ICcgKyBKU09OLnN0cmluZ2lmeSh2bS5yZXBvcnQudGhlcm0pKTtcbiAgICAgICAgICAgIFBhc3Nwb3J0LmNyZWF0ZVBhc3Nwb3J0KHZtLnJlcG9ydCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRFbXBsb3llZXMoKSB7XG4gICAgICAgICAgICBVc2VyRGF0YS5nZXRBbGxVc2VycygpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICB2bS5hbGxFbXBsb3llZXMgPSBkYXRhO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cblxuICAgICAgICBmdW5jdGlvbiBnZXRFbmdpbmVzKCkge1xuICAgICAgICAgICAgRW5naW5lLmdldEFsbEVuZ2luZXMoKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgdm0uZW5naW5lLmFsbCA9IGRhdGE7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRPcmdzKCkge1xuICAgICAgICAgICAgUGFzc3BvcnQuZ2V0T3JncygpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICB2bS5vcmdzID0gZGF0YTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldExQVXMob3JnTmFtZSkge1xuICAgICAgICAgICAgdmFyIG9yZ2FuID0gdm0ub3Jncy5maWx0ZXIoZnVuY3Rpb24oZWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZWwubmFtZSA9PT0gb3JnTmFtZTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBQYXNzcG9ydC5nZXRMUFVzKG9yZ2FuWzBdLmlkKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgdm0ubHB1cyA9IGRhdGE7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRUQ2xhc3NlcygpIHtcbiAgICAgICAgICAgIFBhc3Nwb3J0LmdldFRDbGFzc2VzKClcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHZtLnRjbGFzc2VzLmFsbCA9IGRhdGE7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZXRTZWxlY3RlZChzZWxlY3RlZCwgaXRlbSkge1xuICAgICAgICAgICAgdmFyIGlkID0gaXRlbS5pZCxcbiAgICAgICAgICAgICAgICBpbmRleCA9IHNlbGVjdGVkLmluZGV4T2YoaWQpO1xuICAgICAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIHNlbGVjdGVkLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgaXRlbS5zZWxlY3RlZCA9IGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpdGVtLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBzZWxlY3RlZC5wdXNoKGlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn0pKCk7XG5cbihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ2FwcC5wYXNzcG9ydC5zZXJ2aWNlJylcbiAgICAgICAgLmZhY3RvcnkoJ1Bhc3Nwb3J0JywgUGFzc3BvcnQpO1xuXG4gICAgUGFzc3BvcnQuJGluamVjdCA9IFsnJGh0dHAnXTtcblxuICAgIGZ1bmN0aW9uIFBhc3Nwb3J0KCRodHRwKSB7XG4gICAgICAgIHZhciBwYXNzcG9ydCA9IHtcbiAgICAgICAgICAgIGNyZWF0ZVBhc3Nwb3J0OiBjcmVhdGVQYXNzcG9ydCxcbiAgICAgICAgICAgIGdldExQVXM6IGdldExQVXMsXG4gICAgICAgICAgICBnZXRPcmdzOiBnZXRPcmdzLFxuICAgICAgICAgICAgZ2V0VENsYXNzZXM6IGdldFRDbGFzc2VzXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHBhc3Nwb3J0O1xuXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZVBhc3Nwb3J0KHJlcG9ydF9kYXRhKSB7XG4gICAgICAgICAgICAkaHR0cC5wb3N0KCcvcmVwb3J0LycsXG4gICAgICAgICAgICAgICAgICAgIHsncmVwb3J0X2RhdGEnOiByZXBvcnRfZGF0YX0sXG4gICAgICAgICAgICAgICAgICAgIHsgcmVzcG9uc2VUeXBlOiAnYXJyYXlidWZmZXInLFxuICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nfVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cywgaGVhZGVycykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZmlsZSA9IG5ldyBCbG9iKFtkYXRhXSwge3R5cGU6ICdhcHBsaWNhdGlvbi9wZGYnfSk7XG4gICAgICAgICAgICAgICAgICAgIHNhdmVBcyhmaWxlLCAncmVwb3J0LnBkZicpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaGVhZGVycztcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldExQVXMob3JnSWQpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvb3JnYW5pemF0aW9uLycgKyBvcmdJZCArICcvbHB1LycpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGF0YS5kYXRhO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0T3JncygpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvb3JnYW5pemF0aW9uLycpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGF0YS5kYXRhO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0VENsYXNzZXMoKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3RjbGFzcy8nKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEuZGF0YTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbn0pKCk7XG5cbihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLnBhc3Nwb3J0JylcbiAgICAgICAgLmRpcmVjdGl2ZSgndmFsaWRGaWxlJywgVmFsaWRGaWxlRGlyZWN0aXZlKTtcblxuLy8gICAgVmFsaWRGaWxlRGlyZWN0aXZlLiRpbmplY3QgPSBbJ1VwbG9hZCddO1xuLy9cbi8vICAgIGZ1bmN0aW9uIFZhbGlkRmlsZURpcmVjdGl2ZShVcGxvYWQpIHtcbi8vICAgICAgICBmdW5jdGlvbiB1cGxvYWQoZmlsZSkge1xuLy8gICAgICAgICAgICBjb25zb2xlLmxvZygndXBsb2FkaW5nIGZpbGUgJyArIGZpbGUpO1xuLy8gICAgICAgICAgICBVcGxvYWQudXBsb2FkKHtcbi8vICAgICAgICAgICAgICAgIHVybDogJy9hcGkvdXBsb2FkLycsXG4vLyAgICAgICAgICAgICAgICBkYXRhOiB7ZmlsZXVwbG9hZDogZmlsZX1cbi8vICAgICAgICAgICAgfSkuXG4vLyAgICAgICAgICAgIHRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbi8vICAgICAgICAgICAgICAgIHZtLnJlcG9ydC5maWxlc1tmaWVsZG5hbWVdID0gcmVzcG9uc2UuZGF0YS5pZDtcbi8vICAgICAgICAgICAgfSwgZnVuY3Rpb24ocmVzcG9uc2UpIHtcbi8vICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdFcnJvciBzdGF0dXM6ICcgKyByZXNwb25zZS5zdGF0dXMpO1xuLy8gICAgICAgICAgICB9KTtcbi8vICAgICAgICB9XG5cbiAgICBmdW5jdGlvbiBWYWxpZEZpbGVEaXJlY3RpdmUoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXF1aXJlOiAnbmdNb2RlbCcsXG4gICAgICAgICAgICBzY29wZTogdHJ1ZSxcbiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbCwgYXR0cnMsIG5nTW9kZWwpe1xuICAgICAgICAgICAgICAgIGVsLmJpbmQoJ2NoYW5nZScsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgbmdNb2RlbC4kc2V0Vmlld1ZhbHVlKGVsLnZhbCgpKTtcbi8vICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2ZpbGVuYW1lICcgKyBlbC52YWwoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZ01vZGVsLiRyZW5kZXIoKTtcbi8vICAgICAgICAgICAgICAgICAgICAgICAgdXBsb2FkKHNjb3BlLmltZyk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG59KSgpO1xuXG4oZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCdhcHAuc2VydmVyZGF0YScpXG4gICAgICAgIC5mYWN0b3J5KCdTZXJ2ZXJEYXRhJywgU2VydmVyRGF0YSk7XG5cbiAgICBTZXJ2ZXJEYXRhLiRpbmplY3QgPSBbJyRyZXNvdXJjZSddO1xuXG4gICAgZnVuY3Rpb24gU2VydmVyRGF0YSgkcmVzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuICRyZXNvdXJjZSgnL2FwaS86Y2F0ZWdvcnkvJyk7XG4gICAgfVxufSkoKTtcblxuKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAuZGF0ZXBpY2tlcicpXG4gICAgICAgIC5jb250cm9sbGVyKCdEYXRlcGlja2VyQ29udHJvbGxlcicsIERhdGVwaWNrZXJDb250cm9sbGVyKTtcblxuICAgIERhdGVwaWNrZXJDb250cm9sbGVyLiRpbmplY3QgPSBbJ3VpYkRhdGVwaWNrZXJQb3B1cENvbmZpZyddO1xuXG4gICAgZnVuY3Rpb24gRGF0ZXBpY2tlckNvbnRyb2xsZXIodWliRGF0ZXBpY2tlclBvcHVwQ29uZmlnKSB7XG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG5cbiAgICAgICAgdWliRGF0ZXBpY2tlclBvcHVwQ29uZmlnLmNsb3NlVGV4dCA9ICfQl9Cw0LrRgNGL0YLRjCc7XG4gICAgICAgIHVpYkRhdGVwaWNrZXJQb3B1cENvbmZpZy5jdXJyZW50VGV4dCA9ICfQodC10LPQvtC00L3Rjyc7XG4gICAgICAgIHVpYkRhdGVwaWNrZXJQb3B1cENvbmZpZy5jbGVhclRleHQgPSAn0J7Rh9C40YHRgtC40YLRjCc7XG4vLyAgICAgICAgdWliRGF0ZXBpY2tlclBvcHVwQ29uZmlnLmh0bWw1VHlwZXMgPSAnZGF0ZXRpbWUtbG9jYWwnO1xuXG5cbiAgICAgICAgdm0uZGF0ZU9wdGlvbnMgPSB7XG4gICAgICAgICAgICBzdGFydGluZ0RheTogMVxuICAgICAgICB9O1xuXG4gICAgICAgIHZtLnllYXJPcHRpb25zID0ge1xuICAgICAgICAgICAgZGF0ZXBpY2tlck1vZGU6ICd5ZWFyJyxcbiAgICAgICAgICAgIG1heE1vZGU6ICd5ZWFyJyxcbiAgICAgICAgICAgIG1pbk1vZGU6ICd5ZWFyJyxcbiAgICAgICAgICAgIGZvcm1hdFllYXI6ICd5eXl5J1xuICAgICAgICB9O1xuXG4gICAgICAgIHZtLm9wZW4gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICB2bS5wb3B1cC5vcGVuZWQgPSB0cnVlO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZtLnBvcHVwID0ge1xuICAgICAgICAgIG9wZW5lZDogZmFsc2VcbiAgICAgICAgfTtcblxuLy8gICAgICAgIHZhciB0b21vcnJvdyA9IG5ldyBEYXRlKCk7XG4vLyAgICAgICAgdG9tb3Jyb3cuc2V0RGF0ZSh0b21vcnJvdy5nZXREYXRlKCkgKyAxKTtcbi8vICAgICAgICB2YXIgYWZ0ZXJUb21vcnJvdyA9IG5ldyBEYXRlKCk7XG4vLyAgICAgICAgYWZ0ZXJUb21vcnJvdy5zZXREYXRlKHRvbW9ycm93LmdldERhdGUoKSArIDEpO1xuLy8gICAgICAgIHZtLmV2ZW50cyA9IFtcbi8vICAgICAgICAgIHtcbi8vICAgICAgICAgICAgZGF0ZTogdG9tb3Jyb3csXG4vLyAgICAgICAgICAgIHN0YXR1czogJ2Z1bGwnXG4vLyAgICAgICAgICB9LFxuLy8gICAgICAgICAge1xuLy8gICAgICAgICAgICBkYXRlOiBhZnRlclRvbW9ycm93LFxuLy8gICAgICAgICAgICBzdGF0dXM6ICdwYXJ0aWFsbHknXG4vLyAgICAgICAgICB9XG4vLyAgICAgICAgXTtcbi8vXG4vLyAgICAgICAgZnVuY3Rpb24gZ2V0RGF5Q2xhc3MoZGF0YSkge1xuLy8gICAgICAgICAgdmFyIGRhdGUgPSBkYXRhLmRhdGUsXG4vLyAgICAgICAgICAgIG1vZGUgPSBkYXRhLm1vZGU7XG4vLyAgICAgICAgICBpZiAobW9kZSA9PT0gJ2RheScpIHtcbi8vICAgICAgICAgICAgdmFyIGRheVRvQ2hlY2sgPSBuZXcgRGF0ZShkYXRlKS5zZXRIb3VycygwLDAsMCwwKTtcbi8vXG4vLyAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdm0uZXZlbnRzLmxlbmd0aDsgaSsrKSB7XG4vLyAgICAgICAgICAgICAgdmFyIGN1cnJlbnREYXkgPSBuZXcgRGF0ZSh2bS5ldmVudHNbaV0uZGF0ZSkuc2V0SG91cnMoMCwwLDAsMCk7XG4vL1xuLy8gICAgICAgICAgICAgIGlmIChkYXlUb0NoZWNrID09PSBjdXJyZW50RGF5KSB7XG4vLyAgICAgICAgICAgICAgICByZXR1cm4gdm0uZXZlbnRzW2ldLnN0YXR1cztcbi8vICAgICAgICAgICAgICB9XG4vLyAgICAgICAgICAgIH1cbi8vICAgICAgICAgIH1cbi8vXG4vLyAgICAgICAgICByZXR1cm4gJyc7XG4vLyAgICAgICAgfVxuICAgIH1cblxufSkoKTtcblxuKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnYXBwLnVzZXJkYXRhLmNvbnRyb2xsZXInKVxuICAgICAgICAuY29udHJvbGxlcignVXNlckRhdGFDb250cm9sbGVyJywgVXNlckRhdGFDb250cm9sbGVyKTtcblxuICAgIFVzZXJEYXRhQ29udHJvbGxlci4kaW5qZWN0ID0gWydVc2VyRGF0YSddO1xuXG4gICAgZnVuY3Rpb24gVXNlckRhdGFDb250cm9sbGVyKFVzZXJEYXRhKSB7XG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG5cbiAgICAgICAgdm0udXBkYXRlUHJvZmlsZSA9IHVwZGF0ZVByb2ZpbGU7XG4gICAgICAgIHZtLnVzZXJkYXRhID0gVXNlckRhdGE7XG5cbiAgICAgICAgYWN0aXZhdGUoKTtcblxuICAgICAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgICAgICAgIFVzZXJEYXRhLmdldCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlUHJvZmlsZSgpIHtcbiAgICAgICAgICAgIFVzZXJEYXRhLnVwZGF0ZSgpO1xuICAgICAgICB9XG4gICAgfVxufSkoKTtcblxuKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnYXBwLnVzZXJkYXRhLnNlcnZpY2UnKVxuICAgICAgICAuZmFjdG9yeSgnVXNlckRhdGEnLCBVc2VyRGF0YSk7XG5cbiAgICBVc2VyRGF0YS4kaW5qZWN0ID0gWydDb29raWVzJywgJyRodHRwJywgJyRxJywgJyR0aW1lb3V0J107XG5cbiAgICBmdW5jdGlvbiBVc2VyRGF0YShDb29raWVzLCAkaHR0cCwgJHEsICR0aW1lb3V0KSB7XG4gICAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICAgICAgZW1haWw6ICcnLFxuICAgICAgICAgICAgZmlyc3RfbmFtZTogJycsXG4gICAgICAgICAgICBsYXN0X25hbWU6ICcnLFxuICAgICAgICAgICAgbWlkZGxlX25hbWU6ICcnLFxuICAgICAgICAgICAgZGVwYXJ0bWVudDogJydcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIHVzZXJkYXRhID0ge1xuICAgICAgICAgICAgY2xlYW46IGNsZWFuLFxuICAgICAgICAgICAgZGF0YTogZGF0YSxcbiAgICAgICAgICAgIGdldDogZ2V0LFxuICAgICAgICAgICAgZ2V0QWxsVXNlcnM6IGdldEFsbFVzZXJzLFxuICAgICAgICAgICAgaXNMb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgICAgIHVwZGF0ZTogdXBkYXRlLFxuICAgICAgICAgICAgdXBkYXRlU3VjY2Vzc2Z1bGw6IGZhbHNlXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHVzZXJkYXRhO1xuXG4gICAgICAgIGZ1bmN0aW9uIGNsZWFuKCkge1xuICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKHVzZXJkYXRhLmRhdGEsIGZ1bmN0aW9uKHYsIGspIHtcbiAgICAgICAgICAgICAgICBkYXRhW2tdID0gJyc7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHZhciBjb29raWUgPSBDb29raWVzLmdldCgpO1xuICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKGNvb2tpZSwgZnVuY3Rpb24odiwgaykge1xuICAgICAgICAgICAgICAgIGlmIChrIGluIGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YVtrXSA9IGNvb2tpZVtrXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldEFsbFVzZXJzKCkge1xuICAgICAgICAgICAgdmFyIGNvb2tpZSA9IENvb2tpZXMuZ2V0KCk7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2RlcGFydG1lbnQvJyArIGNvb2tpZS5kZXBhcnRtZW50LmlkICsgJy91c2VyLycpLnRoZW4oXG4gICAgICAgICAgICAgICAgZ2V0QWxsVXNlcnNTdWNjZXNzXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0QWxsVXNlcnNTdWNjZXNzKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZSgpIHtcbiAgICAgICAgICAgIHZhciBjb29raWUgPSBDb29raWVzLmdldCgpO1xuXG4gICAgICAgICAgICB1c2VyZGF0YS5pc0xvYWRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgdXNlcmRhdGEudXBkYXRlU3VjY2Vzc2Z1bGwgPSBmYWxzZTtcblxuICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKGRhdGEsIGZ1bmN0aW9uKHYsIGspIHtcbiAgICAgICAgICAgICAgICBjb29raWVba10gPSBkYXRhW2tdO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIENvb2tpZXMuc2V0KGNvb2tpZSk7XG4gICAgICAgICAgICByZXR1cm4gdXBkYXRlREIoY29va2llKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZURCKGNvb2tpZSkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLnB1dCgnL2FwaS9kZXBhcnRtZW50LycgKyBjb29raWUuZGVwYXJ0bWVudC5pZCArXG4gICAgICAgICAgICAgICAgICAgICcvdXNlci8nICsgY29va2llLnVzZXJuYW1lICsgJy8nLCB7XG4gICAgICAgICAgICAgICAgZmlyc3RfbmFtZTogZGF0YS5maXJzdF9uYW1lLFxuICAgICAgICAgICAgICAgIGxhc3RfbmFtZTogZGF0YS5sYXN0X25hbWUsXG4gICAgICAgICAgICAgICAgbWlkZGxlX25hbWU6IGRhdGEubWlkZGxlX25hbWUsXG4gICAgICAgICAgICAgICAgZW1haWw6IGRhdGEuZW1haWxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbih1cGRhdGVTdWNjZXNzKVxuICAgICAgICAgICAgLmNhdGNoKHVwZGF0ZUZhaWxlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiB1cGRhdGVTdWNjZXNzKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICB1c2VyZGF0YS5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIHVzZXJkYXRhLnVwZGF0ZVN1Y2Nlc3NmdWxsID0gdHJ1ZTtcblxuICAgICAgICAgICAgLy8gT0staW5kaWNhdG9yIHdpbGwgYmUgc2hvd24gZm9yIDMgc2Vjb25kc1xuICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdXNlcmRhdGEudXBkYXRlU3VjY2Vzc2Z1bGwgPSBmYWxzZTtcbiAgICAgICAgICAgIH0sIDMwMDApO1xuXG4vLyAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRGF0YSBmcm9tIHVwZGF0ZTogJXMnLCBKU09OLnN0cmluZ2lmeShyZXNwb25zZS5kYXRhKSk7XG4vLyAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnU3RhdHVzIGZyb20gdXBkYXRlOiAlcycsIHJlc3BvbnNlLnN0YXR1cyk7XG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUZhaWxlZChlKSB7XG4gICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KGUpO1xuICAgICAgICB9XG4gICAgfVxufSkoKTtcblxuKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAubG9naW4nKVxuICAgICAgICAuZGlyZWN0aXZlKCdnbXBJbnB1dCcsIGdtcElucHV0KTtcblxuICAgIGZ1bmN0aW9uIGdtcElucHV0ICgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXG4vLyAgICAgICAgICAgIGNvbnRyb2xsZXI6IGZ1bmN0aW9uKCRzY29wZSwgJGVsZW1lbnQpIHtcbi8vICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCRlbGVtZW50LmF0dHIoJ25hbWUnKSk7XG4vLyAgICAgICAgICAgICAgICAkc2NvcGUuaGFzRXJyb3IgPSB0aGlzLmZpZWxkLiR0b3VjaGVkICYmIHRoaXMuZmllbGQuJGludmFsaWQ7XG4vL1xuLy8gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUpIHtcbiAgICAgICAgICAgICAgICBzY29wZS5pc1ZhbGlkID0gc2NvcGUudXNlckZvcm0uZW1haWwuJHRvdWNoZWQ7XG4vLyAgICAgICAgICAgICAgICBzY29wZS51c2VyRm9ybS5lbWFpbC4kdG91Y2hlZC4kd2F0Y2goKVxuXG4gICAgICAgICAgICB9LFxuLy8gICAgICAgICAgICBjb21waWxlOiBmdW5jdGlvbih0RWxlbSwgdEF0dHJzKSB7XG4vLyAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnYXR0cnM6ICcgKyB0QXR0cnMuaWQpO1xuLy8gICAgICAgICAgICAgICAgdEVsZW0uZmluZCgnbGFiZWwnKS5hdHRyKCdmb3InLCB0QXR0cnMuaWQpO1xuLy8gICAgICAgICAgICAgICAgdEVsZW0uZmluZCgnaW5wdXQnKS5hdHRyKCdpZCcsIHRBdHRycy5pZCk7XG4vLyAgICAgICAgICAgICAgICB0RWxlbS5maW5kKCdpbnB1dCcpLmF0dHIoJ25hbWUnLCAnZW1haWwnKTtcbi8vICAgICAgICAgICAgfSxcbi8vICAgICAgICAgICAgc2NvcGU6IHtcbi8vICAgICAgICAgICAgICAgIHR5cGU6ICdAJyxcbi8vICAgICAgICAgICAgICAgIG1vZGVsOiAnPW5nTW9kZWwnLFxuLy8gICAgICAgICAgICAgICAgZmllbGQ6ICc9Jyxcbi8vICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnQCdcbi8vICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3N0YXRpYy9zcmMvYXBwL3VzZXIvZ21wLWlucHV0LmRpcmVjdGl2ZS50cGwuaHRtbCdcbiAgICAgICAgfTtcbiAgICB9XG59KSgpO1xuXG4oZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCdhcHAucmVwb3J0JylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ1JlcG9ydENvbnRyb2xsZXInLCBSZXBvcnRDb250cm9sbGVyKTtcblxuICAgIFJlcG9ydENvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRzdGF0ZScsICdVc2VyRGF0YScsICdEZXBhcnRtZW50JywgJ0VuZ2luZScsICdQYXNzcG9ydCcsICdVcGxvYWQnXTtcbiAgICBmdW5jdGlvbiBSZXBvcnRDb250cm9sbGVyKCRzY29wZSwgJHN0YXRlLCBVc2VyRGF0YSwgRGVwYXJ0bWVudCwgRW5naW5lLCBQYXNzcG9ydCwgVXBsb2FkKSB7XG5cbiAgICAgICAgJHNjb3BlLnVwbG9hZCA9IHVwbG9hZDtcblxuICAgICAgICB2YXIgdm0gPSB0aGlzLFxuICAgICAgICAgICAgcGFnZXMgPSBbXG4gICAgICAgICAgICAgICAgJ3JlcG9ydC90ZWFtLnRwbC5odG1sJyxcbiAgICAgICAgICAgICAgICAncmVwb3J0L3JlcG9ydF9pbmZvLnRwbC5odG1sJyxcbiAgICAgICAgICAgICAgICAnbWVhc3VyZXJzLnRwbC5odG1sJyxcbiAgICAgICAgICAgICAgICAnbHB1LnRwbC5odG1sJyxcbiAgICAgICAgICAgICAgICAncmVwb3J0L2RhdGVzLnRwbC5odG1sJyxcbiAgICAgICAgICAgICAgICAnZW5naW5lcy50cGwuaHRtbCcsXG4gICAgICAgICAgICAgICAgJ29yZGVyLnRwbC5odG1sJyxcbiAgICAgICAgICAgICAgICAncmVwb3J0L3Bob3Rvcy50cGwuaHRtbCcsXG4vLyAgICAgICAgICAgICAgICAndmFsdWVzLnRwbC5odG1sJyxcbi8vICAgICAgICAgICAgICAgICdkb2NzLnRwbC5odG1sJyxcbiAgICAgICAgICAgICAgICAndGhlcm0udHBsLmh0bWwnLFxuICAgICAgICAgICAgICAgICd2aWJyby50cGwuaHRtbCcsXG4gICAgICAgICAgICAgICAgJ3Jlc2lzdGFuY2UudHBsLmh0bWwnLFxuLy8gICAgICAgICAgICAgICAgJ3NpZ25lcnMudHBsLmh0bWwnXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgY29udHJvbF90eXBlcyA9IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICfQktCY0JonLFxuICAgICAgICAgICAgICAgICAgICBmdWxsX25hbWU6ICfQktC40LfRg9Cw0LvRjNC90YvQuSDQuCDQuNC30LzQtdGA0LjRgtC10LvRjNC90YvQuSDQutC+0L3RgtGA0L7Qu9GMJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAn0KPQmicsXG4gICAgICAgICAgICAgICAgICAgIGZ1bGxfbmFtZTogJ9Cj0LvRjNGC0YDQsNC30LLRg9C60L7QstC+0Lkg0LrQvtC90YLRgNC+0LvRjCdcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ9Ci0JonLFxuICAgICAgICAgICAgICAgICAgICBmdWxsX25hbWU6ICfQotC10L/Qu9C+0LLQvtC5INC60L7QvdGC0YDQvtC70YwnXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICfQktCUJyxcbiAgICAgICAgICAgICAgICAgICAgZnVsbF9uYW1lOiAn0JLQuNCx0YDQvtC00LjQsNCz0L3QvtGB0YLQuNGH0LXRgdC60LjQuSDQutC+0L3RgtGA0L7Qu9GMJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAn0K3QmycsXG4gICAgICAgICAgICAgICAgICAgIGZ1bGxfbmFtZTogJ9Ct0LvQtdC60YLRgNC40YfQtdGB0LrQuNC5INC60L7QvdGC0YDQvtC70YwnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIG1lYXN1cmVycyA9IHtcbiAgICAgICAgICAgICAgICBhbGw6IERlcGFydG1lbnQubWVhc3VyZXJzKCksXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWQ6IFtdLFxuICAgICAgICAgICAgICAgIHNvcnRPcmRlcjogJ25hbWUnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZW5naW5lID0ge1xuICAgICAgICAgICAgICAgIGFsbDogW10sXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgJ3R5cGUnOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgJ3NlcmlhbF9udW1iZXInOiAwXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzb3J0T3JkZXI6ICduYW1lJ1xuICAgICAgICAgICAgfTtcblxuXG4gICAgICAgIHZtLmFkZFRvQ29sbGVjdGlvbiA9IGFkZFRvQ29sbGVjdGlvbjtcbiAgICAgICAgdm0uYWxsRW1wbG95ZWVzID0gW107XG4gICAgICAgIHZtLmNvbnRyb2xfdHlwZXMgPSBjb250cm9sX3R5cGVzO1xuICAgICAgICB2bS5jcmVhdGVQYXNzcG9ydCA9IGNyZWF0ZVBhc3Nwb3J0O1xuICAgICAgICB2bS5lbmdpbmUgPSBlbmdpbmU7XG4gICAgICAgIHZtLndvcmtCZWdpbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgdm0ud29ya0VuZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdm0ubHB1cyA9IHt9O1xuICAgICAgICB2bS5vcmdzID0ge307XG4gICAgICAgIHZtLnBhZ2VzID0gcGFnZXM7XG4gICAgICAgIHZtLnByb2NLZXlQcmVzcyA9IHByb2NLZXlQcmVzcztcbiAgICAgICAgdm0udGNsYXNzZXMgPSB7YWxsOiBbXSwgc2VsZWN0ZWQ6ICcnfTtcbiAgICAgICAgdm0uZ2V0TFBVcyA9IGdldExQVXM7XG4gICAgICAgIHZtLm1lYXN1cmVycyA9IG1lYXN1cmVycztcbiAgICAgICAgdm0ucmVwb3J0ID0ge1xuICAgICAgICAgICAgdGVhbTogdW5kZWZpbmVkLFxuICAgICAgICAgICAgbWVhc3VyZXJzOiBtZWFzdXJlcnMuc2VsZWN0ZWQsXG4gICAgICAgICAgICBmaWxlczoge1xuICAgICAgICAgICAgICAgICdtYWluJzogW10sXG4gICAgICAgICAgICAgICAgJ3RoZXJtMSc6IFtdLFxuICAgICAgICAgICAgICAgICd0aGVybTInOiBbXSxcbiAgICAgICAgICAgICAgICAnbGljZW5zZXMnOiBbXVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRoZXJtOiB7fSxcbiAgICAgICAgICAgIHZpYnJvOiB7fSxcbiAgICAgICAgICAgIG9yZGVyOiB7fSxcbiAgICAgICAgICAgIHJlc2lzdGFuY2U6IHt9XG4gICAgICAgIH07XG4gICAgICAgIHZtLnNldFNlbGVjdGVkID0gc2V0U2VsZWN0ZWQ7XG5cbiAgICAgICAgYWN0aXZhdGUoKTtcblxuICAgICAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgICAgICAgIHZtLnJlcG9ydC5pbmZvID0ge1xuICAgICAgICAgICAgICAgIGxpY2Vuc2U6ICfQlNC+0LPQvtCy0L7RgCDihJYgICAgICAgICAg0L7RgiAgICAgICAgICDQvdCwINCy0YvQv9C+0LvQvdC10L3QuNC1INGA0LDQsdC+0YIg0L/QviDRjdC60YHQv9C10YDRgtC40LfQtSDQv9GA0L7QvNGL0YjQu9C10L3QvdC+0Lkg0LHQtdC30L7Qv9Cw0YHQvdC+0YHRgtC4LidcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2bS5yZXBvcnQudGVhbSA9IHt9O1xuICAgICAgICAgICAgdm0ucmVwb3J0LmRvY3MgPSBbXTtcbiAgICAgICAgICAgIHZtLnJlcG9ydC5vYmpfZGF0YSA9IHtcbiAgICAgICAgICAgICAgICBkZXRhaWxfaW5mbzogW11cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGdldEVtcGxveWVlcygpO1xuICAgICAgICAgICAgZ2V0RW5naW5lcygpO1xuICAgICAgICAgICAgZ2V0T3JncygpO1xuICAgICAgICAgICAgZ2V0VENsYXNzZXMoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGFkZFRvQ29sbGVjdGlvbihhcnIsIHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSB2YWx1ZS50cmltKCk7XG4gICAgICAgICAgICAvLyBUZXN0IGZvciBhYnNlbmNlIG9mIGEgbmV3IHZhbHVlIGluIGFycmF5IFxuICAgICAgICAgICAgaWYgKHZhbHVlICE9PSAnJyAmJiBhcnIuaW5kZXhPZih2YWx1ZSkgPT09IC0xICkge1xuICAgICAgICAgICAgICAgIGFyci5wdXNoKHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZVBhc3Nwb3J0KCkge1xuLy8gICAgICAgICAgICBjb25zb2xlLmxvZygnZG9jcyAnICsgSlNPTi5zdHJpbmdpZnkodm0ucmVwb3J0LmRvY3MpKTtcbi8vICAgICAgICAgICAgY29uc29sZS5sb2coJ2ludmVzdGlnYXRpb25EYXRlICcgKyB2bS5pbnZlc3RpZ2F0aW9uRGF0ZS50b0xvY2FsZVN0cmluZygpKTtcbi8vICAgICAgICAgICAgY29uc29sZS5sb2coJ2JlZ2luICcgKyB2bS53b3JrQmVnaW4pO1xuLy8gICAgICAgICAgICBjb25zb2xlLmxvZygnZW5kICcgKyB2bS53b3JrRW5kLnRvTG9jYWxlU3RyaW5nKCkpO1xuLy8gICAgICAgICAgICBQYXNzcG9ydC5jcmVhdGVQYXNzcG9ydCh2bS53b3JrQmVnaW4pO1xuICAgICAgICAgICAgdm0ucmVwb3J0LnR5cGUgPSAgJ3JlcG9ydCc7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygndGVhbTonLCBKU09OLnN0cmluZ2lmeSh2bS5yZXBvcnQpKTtcbi8vICAgICAgICAgICAgcmV0dXJuO1xuLy8gICAgICAgICAgICBjb25zb2xlLmRpcigndm0udGNsYXNzZXMuYWxsOiAnICsgSlNPTi5zdHJpbmdpZnkodm0udGNsYXNzZXMuYWxsKSk7XG4gICAgICAgICAgICB2bS5yZXBvcnQudGhlcm0udGNsYXNzID0gdm0udGNsYXNzZXMuYWxsLmZpbHRlcihmdW5jdGlvbihlbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBlbC5uYW1lID09PSB2bS50Y2xhc3Nlcy5zZWxlY3RlZDtcbiAgICAgICAgICAgIH0pWzBdLmlkO1xuLy8gICAgICAgICAgICBjb25zb2xlLmRpcignc2VsZWN0ZWQgY2xhc3M6ICcgKyBKU09OLnN0cmluZ2lmeSh2bS5yZXBvcnQudGhlcm0pKTtcbiAgICAgICAgICAgIFBhc3Nwb3J0LmNyZWF0ZVBhc3Nwb3J0KHZtLnJlcG9ydCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRFbXBsb3llZXMoKSB7XG4gICAgICAgICAgICBVc2VyRGF0YS5nZXRBbGxVc2VycygpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICB2bS5hbGxFbXBsb3llZXMgPSBkYXRhO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0RW5naW5lcygpIHtcbiAgICAgICAgICAgIEVuZ2luZS5nZXRBbGxFbmdpbmVzKClcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHZtLmVuZ2luZS5hbGwgPSBkYXRhO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0T3JncygpIHtcbiAgICAgICAgICAgIFBhc3Nwb3J0LmdldE9yZ3MoKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgdm0ub3JncyA9IGRhdGE7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRMUFVzKG9yZ05hbWUpIHtcbiAgICAgICAgICAgIHZhciBvcmdhbiA9IHZtLm9yZ3MuZmlsdGVyKGZ1bmN0aW9uKGVsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsLm5hbWUgPT09IG9yZ05hbWU7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgUGFzc3BvcnQuZ2V0TFBVcyhvcmdhblswXS5pZClcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHZtLmxwdXMgPSBkYXRhO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0VENsYXNzZXMoKSB7XG4gICAgICAgICAgICBQYXNzcG9ydC5nZXRUQ2xhc3NlcygpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICB2bS50Y2xhc3Nlcy5hbGwgPSBkYXRhO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gcHJvY0tleVByZXNzKGNsaWNrRXZlbnQsIGFycikge1xuICAgICAgICAgICAgLy8gQ2hlY2sgZm9yIFJldHVybiAoRW50ZXIpIGtleSBwcmVzc2VkXG4gICAgICAgICAgICBpZiAoY2xpY2tFdmVudC53aGljaCA9PT0gMTMpIHtcbiAgICAgICAgICAgICAgICBjbGlja0V2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgYWRkVG9Db2xsZWN0aW9uKGFyciwgY2xpY2tFdmVudC50YXJnZXQudmFsdWUpO1xuICAgICAgICAgICAgICAgIGNsaWNrRXZlbnQudGFyZ2V0LnZhbHVlID0gJyc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZXRTZWxlY3RlZChzZWxlY3RlZCwgaXRlbSkge1xuICAgICAgICAgICAgdmFyIGlkID0gaXRlbS5pZCxcbiAgICAgICAgICAgICAgICBpbmRleCA9IHNlbGVjdGVkLmluZGV4T2YoaWQpO1xuICAgICAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIHNlbGVjdGVkLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgaXRlbS5zZWxlY3RlZCA9IGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpdGVtLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBzZWxlY3RlZC5wdXNoKGlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHVwbG9hZChlbGVtZW50KSB7XG4gICAgICAgICAgICB2YXIgZmllbGRuYW1lID0gZWxlbWVudC5uYW1lO1xuICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKGVsZW1lbnQuZmlsZXMsIGZ1bmN0aW9uKGZpbGUpIHtcbiAgICAgICAgICAgICAgICBVcGxvYWQudXBsb2FkKHtcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnL2FwaS91cGxvYWQvJyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge2ZpbGV1cGxvYWQ6IGZpbGV9XG4gICAgICAgICAgICAgICAgfSkuXG4gICAgICAgICAgICAgICAgdGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICB2bS5yZXBvcnQuZmlsZXNbZmllbGRuYW1lXS5wdXNoKHJlc3BvbnNlLmRhdGEuaWQpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh2bS5yZXBvcnQuZmlsZXMpO1xuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdFcnJvciBzdGF0dXM6ICcgKyByZXNwb25zZS5zdGF0dXMpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG59KSgpO1xuXG4oZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgUmVwb3J0Q29udGFpbmVyQ29udHJvbGxlci4kaW5qZWN0ID0gW1wiJHNjb3BlXCIsIFwiVXNlckRhdGFcIiwgXCJEZXBhcnRtZW50XCIsIFwiUGFzc3BvcnRcIiwgXCJVcGxvYWRcIiwgXCJTZXJ2ZXJEYXRhXCJdO1xuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnYXBwLnJlcG9ydCcpXG4gICAgICAgIC5jb250cm9sbGVyKCdSZXBvcnRDb250YWluZXJDb250cm9sbGVyJywgUmVwb3J0Q29udGFpbmVyQ29udHJvbGxlcik7XG5cbiAgICBmdW5jdGlvbiBSZXBvcnRDb250YWluZXJDb250cm9sbGVyKCRzY29wZSwgVXNlckRhdGEsIERlcGFydG1lbnQsIFBhc3Nwb3J0LCBVcGxvYWQsIFNlcnZlckRhdGEpIHtcbiAgICAgICAgJ25nSW5qZWN0JztcblxuICAgICAgICAkc2NvcGUudXBsb2FkID0gdXBsb2FkO1xuXG4gICAgICAgIHZhciB2bSA9IHRoaXMsXG4gICAgICAgICAgICBwYWdlcyA9IFtcbiAgICAgICAgICAgICAgICAncmVwb3J0X2NvbnRhaW5lci9kZXZpY2VzLnRwbC5odG1sJyxcbiAgICAgICAgICAgICAgICAncmVwb3J0X2NvbnRhaW5lci9yZXBvcnRfaW5mby50cGwuaHRtbCcsXG4gICAgICAgICAgICAgICAgJ3JlcG9ydF9jb250YWluZXIvb3JkZXIudHBsLmh0bWwnLFxuICAgICAgICAgICAgICAgICdyZXBvcnRfY29udGFpbmVyL3RlYW0udHBsLmh0bWwnLFxuICAgICAgICAgICAgICAgICdyZXBvcnRfY29udGFpbmVyL3NpZ25lcnMudHBsLmh0bWwnLFxuLy8gICAgICAgICAgICAgICAgJ3JlcG9ydF9jb250YWluZXIvZGV2aWNlX2xvY2F0aW9uLnRwbC5odG1sJyxcbi8vICAgICAgICAgICAgICAgICdtZWFzdXJlcnMudHBsLmh0bWwnLFxuLy8gICAgICAgICAgICAgICAgJ3JlcG9ydC9kYXRlcy50cGwuaHRtbCcsXG4vLyAgICAgICAgICAgICAgICAnZW5naW5lcy50cGwuaHRtbCcsXG4vLyAgICAgICAgICAgICAgICAncmVwb3J0L3Bob3Rvcy50cGwuaHRtbCcsXG4vLyAgICAgICAgICAgICAgICAndmFsdWVzLnRwbC5odG1sJyxcbi8vICAgICAgICAgICAgICAgICdkb2NzLnRwbC5odG1sJyxcbi8vICAgICAgICAgICAgICAgICd0aGVybS50cGwuaHRtbCcsXG4vLyAgICAgICAgICAgICAgICAndmlicm8udHBsLmh0bWwnLFxuLy8gICAgICAgICAgICAgICAgJ3Jlc2lzdGFuY2UudHBsLmh0bWwnLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIG1lYXN1cmVycyA9IHtcbiAgICAgICAgICAgICAgICBhbGw6IERlcGFydG1lbnQubWVhc3VyZXJzKCksXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWQ6IFtdLFxuICAgICAgICAgICAgICAgIHNvcnRPcmRlcjogJ25hbWUnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGV2aWNlcyA9IHtcbiAgICAgICAgICAgICAgICBhbGw6IFtdLFxuLy8gICAgICAgICAgICAgICAgc2VsZWN0ZWQ6IHtcbi8vICAgICAgICAgICAgICAgICAgICAndHlwZSc6ICcnLFxuLy8gICAgICAgICAgICAgICAgICAgICdzZXJpYWxfbnVtYmVyJzogMFxuLy8gICAgICAgICAgICAgICAgfSxcbi8vICAgICAgICAgICAgICAgIHNvcnRPcmRlcjogJ25hbWUnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGV2aWNlX2NvbmRpdGlvbnMgPSBbXG4gICAgICAgICAgICAgICAgJ9GA0LDQsdC+0YLQvtGB0L/QvtGB0L7QsdC90L7QtScsXG4gICAgICAgICAgICAgICAgJ9C90LXRgNCw0LHQvtGC0L7RgdC/0L7RgdC+0LHQvdC+0LUnLFxuICAgICAgICAgICAgICAgICfQv9GA0LXQtNC10LvRjNC90L7QtSdcbiAgICAgICAgICAgIF07XG5cblxuLy8gICAgICAgIHZtLmFkZFRvQ29sbGVjdGlvbiA9IGFkZFRvQ29sbGVjdGlvbjtcbiAgICAgICAgdm0uYWxsRW1wbG95ZWVzID0gW107XG4vLyAgICAgICAgdm0uY29udHJvbF90eXBlcyA9IGNvbnRyb2xfdHlwZXM7XG4gICAgICAgIHZtLmRldmljZV9jb25kaXRpb25zID0gZGV2aWNlX2NvbmRpdGlvbnM7XG4gICAgICAgIHZtLmNyZWF0ZVBhc3Nwb3J0ID0gY3JlYXRlUGFzc3BvcnQ7XG4gICAgICAgIHZtLmRldmljZXMgPSBkZXZpY2VzO1xuLy8gICAgICAgIHZtLndvcmtCZWdpbiA9IHVuZGVmaW5lZDtcbi8vICAgICAgICB2bS53b3JrRW5kID0gdW5kZWZpbmVkO1xuICAgICAgICB2bS5scHVzID0ge307XG4gICAgICAgIHZtLm9yZ3MgPSB7fTtcbiAgICAgICAgdm0ucGFnZXMgPSBwYWdlcztcbi8vICAgICAgICB2bS5wcm9jS2V5UHJlc3MgPSBwcm9jS2V5UHJlc3M7XG4vLyAgICAgICAgdm0udGNsYXNzZXMgPSB7YWxsOiBbXSwgc2VsZWN0ZWQ6ICcnfTtcbiAgICAgICAgdm0uZ2V0TFBVcyA9IGdldExQVXM7XG4vLyAgICAgICAgdm0ubWVhc3VyZXJzID0gbWVhc3VyZXJzO1xuICAgICAgICB2bS5yZXBvcnQgPSB7XG4gICAgICAgICAgICB0ZWFtOiBbXSxcbiAgICAgICAgICAgIGluZm86IHtcbiAgICAgICAgICAgICAgICAnaW5mb19pbnZlc3RpZ2F0aW9uJzogJ9Ct0LrRgdC/0LXRgNGC0LjQt9CwINC/0YDQvtC80YvRiNC70LXQvdC90L7QuSDQsdC10LfQvtC/0LDRgdC90L7RgdGC0Lgg0L/RgNC+0LLQvtC00LjRgtGB0Y8g0LLQv9C10YDQstGL0LUuICcgK1xuICAgICAgICAgICAgICAgICAgICAnXFxu0J3Qniwg0JLQniDigJMgMSDRgNCw0Lcg0LIgMiDQs9C+0LTQsCAo0L7RgtCy0LXRgtGB0YLQstC10L3QvdGL0Lkg0LfQsCDQvtGB0YPRidC10YHRgtCy0LvQtdC90LjQtSAnICsgXG4gICAgICAgICAgICAgICAgICAgICfQv9GA0L7QuNC30LLQvtC00YHRgtCy0LXQvdC90L7Qs9C+INC60L7QvdGC0YDQvtC70Y8g0LfQsCDRjdC60YHQv9C70YPQsNGC0LDRhtC40LXQuSDRgdC+0YHRg9C00LApLiAnICtcbiAgICAgICAgICAgICAgICAgICAgJ1xcbtCd0J4sINCS0J4g4oCTIDEg0YDQsNC3INCyIDQg0LPQvtC00LAgKNGD0L/QvtC70L3QvtC80L7Rh9C10L3QvdCw0Y8g0YHQv9C10YbQuNCw0LvQuNC30LjRgNC+0LLQsNC90L3QsNGPINC+0YDQs9Cw0L3QuNC30LDRhtC40Y8sICcgK1xuICAgICAgICAgICAgICAgICAgICAn0L7RgtCy0LXRgtGB0YLQstC10L3QvdGL0Lkg0LfQsCDQvtGB0YPRidC10YHRgtCy0LvQtdC90LjQtSDQv9GA0L7QuNC30LLQvtC00YHRgtCy0LXQvdC90L7Qs9C+INC60L7QvdGC0YDQvtC70Y8g0LfQsCDRjdC60YHQv9C70YPQsNGC0LDRhtC40LXQuSDRgdC+0YHRg9C00LApLiAnICtcbiAgICAgICAgICAgICAgICAgICAgJ1xcbtCT0Jgg4oCTIDEg0YDQsNC3INCyIDgg0LvQtdGCICjRg9C/0L7Qu9C90L7QvNC+0YfQtdC90L3QsNGPINGB0L/QtdGG0LjQsNC70LjQt9C40YDQvtCy0LDQvdC90LDRjyDQvtGA0LPQsNC90LjQt9Cw0YbQuNGPLCAnICsgXG4gICAgICAgICAgICAgICAgICAgICfQvtGC0LLQtdGC0YHRgtCy0LXQvdC90YvQuSDQt9CwINC+0YHRg9GJ0LXRgdGC0LLQu9C10L3QuNC1INC/0YDQvtC40LfQstC+0LTRgdGC0LLQtdC90L3QvtCz0L4g0LrQvtC90YLRgNC+0LvRjyDQt9CwINGN0LrRgdC/0LvRg9Cw0YLQsNGG0LjQtdC5INGB0L7RgdGD0LTQsCknLFxuICAgICAgICAgICAgICAgICdpbmZvX3JlcGFpcic6ICfQkiDQv9GA0LXQtNGB0YLQsNCy0LvQtdC90L3QvtC5INGC0LXRhdC90LjRh9C10YHQutC+0Lkg0LTQvtC60YPQvNC10L3RgtCw0YbQuNC4INC90LUg0L7RgtC80LXRh9C10L3QvicsXG4gICAgICAgICAgICAgICAgJ2Rhbmdlcl9wbGFjZXMnOiAn0JzQtdGB0YLQsCDQutC+0L3RhtC10L3RgtGA0LDRhtC40Lkg0L3QsNC/0YDRj9C20LXQvdC40Lkg4oCTINC/0YDQvtC00L7Qu9GM0L3Ri9C1INC4INC60L7Qu9GM0YbQtdCy0YvQtSDRgdCy0LDRgNC90YvQtSDRiNCy0YssICcgKyBcbiAgICAgICAgICAgICAgICAgICAgJ9C80LXRgdGC0LAg0LLQstCw0YDQutC4INGI0YLRg9GG0LXRgNC+0LI7INC80LXRgdGC0LAg0L3QsNC40LHQvtC70LXQtSDQstC10YDQvtGP0YLQvdC+0LPQviDQutC+0YDRgNC+0LfQuNC+0L3QvdC+0LPQviDQuNC30L3QvtGB0LAg4oCTICcgKyBcbiAgICAgICAgICAgICAgICAgICAgJ9Cy0L3Rg9GC0YDQtdC90L3Rj9GPINC/0L7QstC10YDRhdC90L7RgdGC0Ywg0L3QuNC20L3QtdCz0L4g0LTQvdC40YnQsCcsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuLy8gICAgICAgICAgICB0ZWFtOiB1bmRlZmluZWQsXG4vLyAgICAgICAgICAgIG1lYXN1cmVyczogbWVhc3VyZXJzLnNlbGVjdGVkLFxuLy8gICAgICAgICAgICBmaWxlczoge1xuLy8gICAgICAgICAgICAgICAgJ21haW4nOiBbXSxcbi8vICAgICAgICAgICAgICAgICd0aGVybTEnOiBbXSxcbi8vICAgICAgICAgICAgICAgICd0aGVybTInOiBbXSxcbi8vICAgICAgICAgICAgICAgICdsaWNlbnNlcyc6IFtdXG4vLyAgICAgICAgICAgIH0sXG4vLyAgICAgICAgICAgIHRoZXJtOiB7fSxcbi8vICAgICAgICAgICAgdmlicm86IHt9LFxuLy8gICAgICAgICAgICBvcmRlcjoge30sXG4vLyAgICAgICAgICAgIHJlc2lzdGFuY2U6IHt9XG4vLyAgICAgICAgfTtcbiAgICAgICAgdm0uc2V0U2VsZWN0ZWQgPSBzZXRTZWxlY3RlZDtcblxuICAgICAgICBhY3RpdmF0ZSgpO1xuXG4gICAgICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuICAgICAgICAgICAgZ2V0Q29udGFpbmVycygpO1xuICAgICAgICAgICAgZ2V0T3JncygpO1xuICAgICAgICAgICAgZ2V0RW1wbG95ZWVzKCk7XG4vLyAgICAgICAgICAgIHZtLnJlcG9ydC5pbmZvID0ge1xuLy8gICAgICAgICAgICAgICAgbGljZW5zZTogJ9CU0L7Qs9C+0LLQvtGAIOKEliAgICAgICAgICDQvtGCICAgICAgICAgINC90LAg0LLRi9C/0L7Qu9C90LXQvdC40LUg0YDQsNCx0L7RgiDQv9C+INGN0LrRgdC/0LXRgNGC0LjQt9C1INC/0YDQvtC80YvRiNC70LXQvdC90L7QuSDQsdC10LfQvtC/0LDRgdC90L7RgdGC0LguJ1xuLy8gICAgICAgICAgICB9O1xuLy8gICAgICAgICAgICB2bS5yZXBvcnQudGVhbSA9IHt9O1xuLy8gICAgICAgICAgICB2bS5yZXBvcnQuZG9jcyA9IFtdO1xuLy8gICAgICAgICAgICB2bS5yZXBvcnQub2JqX2RhdGEgPSB7XG4vLyAgICAgICAgICAgICAgICBkZXRhaWxfaW5mbzogW11cbi8vICAgICAgICAgICAgfTtcbi8vXG4vLyAgICAgICAgICAgIGdldEVuZ2luZXMoKTtcbi8vICAgICAgICAgICAgZ2V0VENsYXNzZXMoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGFkZFRvQ29sbGVjdGlvbihhcnIsIHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSB2YWx1ZS50cmltKCk7XG4gICAgICAgICAgICAvLyBUZXN0IGZvciBhYnNlbmNlIG9mIGEgbmV3IHZhbHVlIGluIGFycmF5IFxuICAgICAgICAgICAgaWYgKHZhbHVlICE9PSAnJyAmJiBhcnIuaW5kZXhPZih2YWx1ZSkgPT09IC0xICkge1xuICAgICAgICAgICAgICAgIGFyci5wdXNoKHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZVBhc3Nwb3J0KCkge1xuLy8vLyAgICAgICAgICAgIGNvbnNvbGUubG9nKCdkb2NzICcgKyBKU09OLnN0cmluZ2lmeSh2bS5yZXBvcnQuZG9jcykpO1xuLy8vLyAgICAgICAgICAgIGNvbnNvbGUubG9nKCdpbnZlc3RpZ2F0aW9uRGF0ZSAnICsgdm0uaW52ZXN0aWdhdGlvbkRhdGUudG9Mb2NhbGVTdHJpbmcoKSk7XG4vLy8vICAgICAgICAgICAgY29uc29sZS5sb2coJ2JlZ2luICcgKyB2bS53b3JrQmVnaW4pO1xuLy8vLyAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlbmQgJyArIHZtLndvcmtFbmQudG9Mb2NhbGVTdHJpbmcoKSk7XG4vLy8vICAgICAgICAgICAgUGFzc3BvcnQuY3JlYXRlUGFzc3BvcnQodm0ud29ya0JlZ2luKTtcbiAgICAgICAgICAgIHZtLnJlcG9ydC50eXBlID0gJ3JlcG9ydC1jb250YWluZXInO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ3JlcG9ydDonLCBKU09OLnN0cmluZ2lmeSh2bS5yZXBvcnQpKTtcbi8vLy8gICAgICAgICAgICByZXR1cm47XG4vLy8vICAgICAgICAgICAgY29uc29sZS5kaXIoJ3ZtLnRjbGFzc2VzLmFsbDogJyArIEpTT04uc3RyaW5naWZ5KHZtLnRjbGFzc2VzLmFsbCkpO1xuLy8gICAgICAgICAgICB2bS5yZXBvcnQudGhlcm0udGNsYXNzID0gdm0udGNsYXNzZXMuYWxsLmZpbHRlcihmdW5jdGlvbihlbCkge1xuLy8gICAgICAgICAgICAgICAgcmV0dXJuIGVsLm5hbWUgPT09IHZtLnRjbGFzc2VzLnNlbGVjdGVkO1xuLy8gICAgICAgICAgICB9KVswXS5pZDtcbi8vLy8gICAgICAgICAgICBjb25zb2xlLmRpcignc2VsZWN0ZWQgY2xhc3M6ICcgKyBKU09OLnN0cmluZ2lmeSh2bS5yZXBvcnQudGhlcm0pKTtcbiAgICAgICAgICAgIFBhc3Nwb3J0LmNyZWF0ZVBhc3Nwb3J0KHZtLnJlcG9ydCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRFbXBsb3llZXMoKSB7XG4gICAgICAgICAgICBVc2VyRGF0YS5nZXRBbGxVc2VycygpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICB2bS5hbGxFbXBsb3llZXMgPSBkYXRhO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0Q29udGFpbmVycygpIHtcbiAgICAgICAgICAgIFNlcnZlckRhdGEucXVlcnkoe2NhdGVnb3J5OiAnY29udGFpbmVyJ30sIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICB2bS5kZXZpY2VzLmFsbCA9IGRhdGE7XG4vLyAgICAgICAgICAgICAgICB2bS5kZXZpY2VzLmFsbCA9IGRhdGEubWFwKGZ1bmN0aW9uKGVsKSB7XG4vLyAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsO1xuLy8gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIGZ1bmN0aW9uIGdldE9yZ3MoKSB7XG4gICAgICAgICAgICBQYXNzcG9ydC5nZXRPcmdzKClcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHZtLm9yZ3MgPSBkYXRhO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0TFBVcyhvcmdOYW1lKSB7XG4gICAgICAgICAgICB2YXIgb3JnYW4gPSB2bS5vcmdzLmZpbHRlcihmdW5jdGlvbihlbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBlbC5uYW1lID09PSBvcmdOYW1lO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIFBhc3Nwb3J0LmdldExQVXMob3JnYW5bMF0uaWQpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICB2bS5scHVzID0gZGF0YTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuLy9cbi8vICAgICAgICBmdW5jdGlvbiBnZXRUQ2xhc3NlcygpIHtcbi8vICAgICAgICAgICAgUGFzc3BvcnQuZ2V0VENsYXNzZXMoKVxuLy8gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuLy8gICAgICAgICAgICAgICAgICAgIHZtLnRjbGFzc2VzLmFsbCA9IGRhdGE7XG4vLyAgICAgICAgICAgICAgICB9KTtcbi8vICAgICAgICB9XG4vL1xuLy8gICAgICAgIGZ1bmN0aW9uIHByb2NLZXlQcmVzcyhjbGlja0V2ZW50LCBhcnIpIHtcbi8vICAgICAgICAgICAgLy8gQ2hlY2sgZm9yIFJldHVybiAoRW50ZXIpIGtleSBwcmVzc2VkXG4vLyAgICAgICAgICAgIGlmIChjbGlja0V2ZW50LndoaWNoID09PSAxMykge1xuLy8gICAgICAgICAgICAgICAgY2xpY2tFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuLy8gICAgICAgICAgICAgICAgYWRkVG9Db2xsZWN0aW9uKGFyciwgY2xpY2tFdmVudC50YXJnZXQudmFsdWUpO1xuLy8gICAgICAgICAgICAgICAgY2xpY2tFdmVudC50YXJnZXQudmFsdWUgPSAnJztcbi8vICAgICAgICAgICAgfVxuLy8gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZXRTZWxlY3RlZChzZWxlY3RlZCwgaXRlbSkge1xuICAgICAgICAgICAgdmFyIGlkID0gaXRlbS5pZCxcbiAgICAgICAgICAgICAgICBpbmRleCA9IHNlbGVjdGVkLmluZGV4T2YoaWQpO1xuICAgICAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIHNlbGVjdGVkLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgaXRlbS5zZWxlY3RlZCA9IGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpdGVtLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBzZWxlY3RlZC5wdXNoKGlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHVwbG9hZChlbGVtZW50KSB7XG4gICAgICAgICAgICB2YXIgZmllbGRuYW1lID0gZWxlbWVudC5uYW1lO1xuICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKGVsZW1lbnQuZmlsZXMsIGZ1bmN0aW9uKGZpbGUpIHtcbiAgICAgICAgICAgICAgICBVcGxvYWQudXBsb2FkKHtcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnL2FwaS91cGxvYWQvJyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge2ZpbGV1cGxvYWQ6IGZpbGV9XG4gICAgICAgICAgICAgICAgfSkuXG4gICAgICAgICAgICAgICAgdGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICB2bS5yZXBvcnQuZmlsZXNbZmllbGRuYW1lXS5wdXNoKHJlc3BvbnNlLmRhdGEuaWQpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh2bS5yZXBvcnQuZmlsZXMpO1xuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdFcnJvciBzdGF0dXM6ICcgKyByZXNwb25zZS5zdGF0dXMpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnYXBwLmRlcGFydG1lbnQnKVxuICAgICAgICAuZmFjdG9yeSgnRGVwYXJ0bWVudCcsIERlcGFydG1lbnQpO1xuXG4gICAgRGVwYXJ0bWVudC4kaW5qZWN0ID0gWyckcmVzb3VyY2UnXTtcblxuICAgIGZ1bmN0aW9uIERlcGFydG1lbnQoJHJlc291cmNlKSB7XG4gICAgICAgIHJldHVybiAkcmVzb3VyY2UoJy9hcGkvZGVwYXJ0bWVudC86ZGVwSWQvJywge30sIHtcbiAgICAgICAgICAgIG1lYXN1cmVyczoge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ2dldCcsXG4gICAgICAgICAgICAgICAgaXNBcnJheTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHtkZXBJZDogMX0sXG4gICAgICAgICAgICAgICAgdXJsOiAnL2FwaS9kZXBhcnRtZW50LzpkZXBJZC9tZWFzdXJlci8nXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCdhcHAnKVxuICAgICAgICAucnVuKFsnJGh0dHAnLFxuICAgICAgICAgICAgZnVuY3Rpb24oJGh0dHApIHtcbiAgICAgICAgICAgICAgICAkaHR0cC5kZWZhdWx0cy54c3JmSGVhZGVyTmFtZSA9ICdYLUNTUkZUb2tlbic7XG4gICAgICAgICAgICAgICAgJGh0dHAuZGVmYXVsdHMueHNyZkNvb2tpZU5hbWUgPSAnY3NyZnRva2VuJztcbiAgICAgICAgfV0pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnYXBwLmxvZ2luJylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0xvZ2luQ29udHJvbGxlcicsIExvZ2luQ29udHJvbGxlcik7XG5cbiAgICBmdW5jdGlvbiBMb2dpbkNvbnRyb2xsZXIoQXV0aGVudGljYXRpb24pIHtcbiAgICAgICAgJ25nSW5qZWN0JztcbiAgICAgICAgdmFyIHZtID0gdGhpcztcblxuICAgICAgICB2bS5sb2dpbiA9IGxvZ2luO1xuXG4gICAgICAgIGFjdGl2YXRlKCk7XG5cbiAgICAgICAgZnVuY3Rpb24gbG9naW4oKSB7XG4gICAgICAgICAgICBBdXRoZW50aWNhdGlvbi5sb2dpbih2bS5lbWFpbCwgdm0ucGFzc3dvcmQpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICAgICAgICBpZiAoQXV0aGVudGljYXRpb24uaXNBdXRoZW50aWNhdGVkKCkpIHtcbiAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ2hvbWUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn0pKCk7XG5cbiIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ2FwcC5tYWluJylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ01haW5Db250cm9sbGVyJywgTWFpbkNvbnRyb2xsZXIpO1xuXG4gICAgTWFpbkNvbnRyb2xsZXIuJGluamVjdCA9IFsnQXV0aGVudGljYXRpb24nLCAnJGxvY2F0aW9uJywgJ0Nvb2tpZXMnLCAnJHJvb3RTY29wZSddO1xuXG4gICAgZnVuY3Rpb24gTWFpbkNvbnRyb2xsZXIoQXV0aGVudGljYXRpb24sICRsb2NhdGlvbiwgQ29va2llcywgJHJvb3RTY29wZSkge1xuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuICAgICAgICB2bS5tZW51ID0gW107XG5cbiAgICAgICAgYWN0aXZhdGUoKTtcblxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuICAgICAgICAgICAgaWYgKCFBdXRoZW50aWNhdGlvbi5pc0F1dGhlbnRpY2F0ZWQoKSkge1xuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvbG9naW4nKTtcbiAgICAgICAgICAgIH0gXG5cbiAgICAgICAgICAgICRyb290U2NvcGUuJG9uKCdjb2traWVzU2V0JywgZnVuY3Rpb24oZXZlbnQsIGRhdGEpIHtcbiAgICAgICAgICAgICAgICBpZiAoZGF0YSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHZtLm1lbnUgPSBbXTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzZXR1cE1lbnUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgc2V0dXBNZW51KCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZXR1cE1lbnUoKSB7XG4gICAgICAgICAgICAgICAgdm0ubWVudSA9IFt7bmFtZTogJ9Cf0YDQvtGE0LjQu9GMJywgbGluazogJ9Cf0YDQvtGE0LjQu9GMJywgcmVmOiAncHJvZmlsZSd9XTtcblxuICAgICAgICAgICAgICAgIHZhciBjb29raWVzID0gQ29va2llcy5nZXQoKTtcbiAgICAgICAgICAgICAgICBpZiAoY29va2llcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXBvcnRfdHlwZXMgPSBjb29raWVzLmRlcGFydG1lbnQucmVwb3J0X3R5cGVzO1xuICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmZvckVhY2gocmVwb3J0X3R5cGVzLCBmdW5jdGlvbihyZXBvcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZtLm1lbnUucHVzaCh7bmFtZTogcmVwb3J0Lm5hbWUsIGxpbms6IHJlcG9ydC5uYW1lLCByZWY6IHJlcG9ydC51cmx9KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdm0uaXNBdXRoZW50aWNhdGVkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gQXV0aGVudGljYXRpb24uaXNBdXRoZW50aWNhdGVkKCk7XG4gICAgICAgIH07XG4gICAgfVxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ2FwcC5yZWdpc3RlcicpXG4gICAgICAgIC5jb250cm9sbGVyKCdSZWdpc3RlckNvbnRyb2xsZXInLCBSZWdpc3RlckNvbnRyb2xsZXIpO1xuXG4gICAgUmVnaXN0ZXJDb250cm9sbGVyLiRpbmplY3QgPSBbJ0F1dGhlbnRpY2F0aW9uJywgJ0RlcGFydG1lbnQnXTtcblxuICAgIGZ1bmN0aW9uIFJlZ2lzdGVyQ29udHJvbGxlcihBdXRoZW50aWNhdGlvbiwgRGVwYXJ0bWVudCkge1xuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuXG4gICAgICAgIHZtLmxvYWREZXBhcnRtZW50cyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgRGVwYXJ0bWVudC5xdWVyeShmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgdm0uYWxsRGVwcyA9IGRhdGE7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICB2bS5yZWdpc3RlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgQXV0aGVudGljYXRpb24ucmVnaXN0ZXIodm0uZW1haWwsIHZtLnBhc3N3b3JkLCB2bS5kZXBhcnRtZW50LmlkKVxuICAgICAgICAgICAgICAgIC50aGVuKHJlZ2lzdGVyU3VjY2VzcywgcmVnaXN0ZXJGYWlsKTtcbiAgICAgICAgfTtcblxuICAgICAgICBhY3RpdmF0ZSgpO1xuXG4gICAgICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuICAgICAgICAgICAgdm0ubG9hZERlcGFydG1lbnRzKCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiByZWdpc3RlclN1Y2Nlc3MoKSB7XG4gICAgICAgICAgICBBdXRoZW50aWNhdGlvbi5sb2dpbih2bS5lbWFpbCwgdm0ucGFzc3dvcmQpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gcmVnaXN0ZXJGYWlsKCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1JlZ2lzdHJhdGlvbiBmYWlsZWQnKTtcbiAgICAgICAgfVxuICAgIH1cbn0pKCk7XG5cbiIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ2FwcC5jb25maWcnKVxuICAgICAgICAuY29uZmlnKGNvbmZpZylcbiAgICAgICAgLnJ1bihydW4pO1xuXG4gICAgY29uZmlnLiRpbmplY3QgPSBbXG4gICAgICAgICckc3RhdGVQcm92aWRlcicsXG4gICAgICAgICckdXJsUm91dGVyUHJvdmlkZXInLFxuICAgICAgICAnJHJlc291cmNlUHJvdmlkZXInLFxuICAgICAgICAnJGxvY2F0aW9uUHJvdmlkZXInXG4gICAgXTtcblxuICAgIGZ1bmN0aW9uIGNvbmZpZygkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyLCAkcmVzb3VyY2VQcm92aWRlciwgJGxvY2F0aW9uUHJvdmlkZXIpIHtcbiAgICAgICAgJHN0YXRlUHJvdmlkZXJcbiAgICAgICAgICAgIC5zdGF0ZSgnaG9tZScsIHtcbiAgICAgICAgICAgICAgICB1cmw6ICcvJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5zdGF0ZSgnbG9naW4nLCB7XG4gICAgICAgICAgICAgICAgdXJsOiAnL2xvZ2luJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnTG9naW5Db250cm9sbGVyJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvc3RhdGljL3NyYy9hcHAvdXNlci9sb2dpbi50cGwuaHRtbCdcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuc3RhdGUoJ3JlZ2lzdGVyJywge1xuICAgICAgICAgICAgICAgIHVybDogJy9yZWdpc3RlcicsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ1JlZ2lzdGVyQ29udHJvbGxlcicsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3N0YXRpYy9zcmMvYXBwL3VzZXIvcmVnaXN0ZXIudHBsLmh0bWwnXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnN0YXRlKCdwcm9maWxlJywge1xuICAgICAgICAgICAgICAgIHVybDogJy9wcm9maWxlJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnVXNlckRhdGFDb250cm9sbGVyJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvc3RhdGljL3NyYy9hcHAvdXNlci9wcm9maWxlLnRwbC5odG1sJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5zdGF0ZSgndXBsb2FkJywge1xuICAgICAgICAgICAgICAgIHVybDogJy91cGxvYWQnLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdVcGxvYWRDb250cm9sbGVyJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvc3RhdGljL3NyYy9hcHAvZmlsZXN0b3JhZ2UvdXBsb2FkLnRwbC5odG1sJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5zdGF0ZSgncGFzc3BvcnQnLCB7XG4gICAgICAgICAgICAgICAgdXJsOiAnL3Bhc3Nwb3J0JyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnUGFzc3BvcnRDb250cm9sbGVyJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvc3RhdGljL3NyYy9hcHAvcmVwb3J0L3Bhc3Nwb3J0LnRwbC5odG1sJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5zdGF0ZSgncmVwb3J0Jywge1xuICAgICAgICAgICAgICAgIHVybDogJy9yZXBvcnQnLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdSZXBvcnRDb250cm9sbGVyJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvc3RhdGljL3NyYy9hcHAvcmVwb3J0L3JlcG9ydC9yZXBvcnQudHBsLmh0bWwnXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnN0YXRlKCdyZXBvcnQtY29udGFpbmVyJywge1xuICAgICAgICAgICAgICAgIHVybDogJy9yZXBvcnQtY29udGFpbmVyJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnUmVwb3J0Q29udGFpbmVyQ29udHJvbGxlcicsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3N0YXRpYy9zcmMvYXBwL3JlcG9ydC9yZXBvcnRfY29udGFpbmVyL3JlcG9ydC50cGwuaHRtbCdcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJy9sb2dpbicpO1xuXG4gICAgICAgICRyZXNvdXJjZVByb3ZpZGVyLmRlZmF1bHRzLnN0cmlwVHJhaWxpbmdTbGFzaGVzID0gZmFsc2U7XG5cbiAgICAgICAgJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKHRydWUpO1xuICAgICAgICAkbG9jYXRpb25Qcm92aWRlci5oYXNoUHJlZml4KCchJyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcnVuKCkge1xuICAgICAgICB2YXIgZG9jID0gYW5ndWxhci5lbGVtZW50KGRvY3VtZW50KTtcbiAgICAgICAgZG9jLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIG5hdmJhciA9IGRvYy5maW5kKCcubmF2YmFyLWNvbGxhcHNlJyksXG4gICAgICAgICAgICAgICAgb3BlbmVkID0gbmF2YmFyLmhhc0NsYXNzKCdpbicpO1xuICAgICAgICAgICAgaWYgKG9wZW5lZCkge1xuICAgICAgICAgICAgICAgIG5hdmJhci5jb2xsYXBzZSgnaGlkZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnYXBwLnRvb2xiYXInKVxuICAgICAgICAuY29udHJvbGxlcignVG9vbGJhckNvbnRyb2xsZXInLCBUb29sYmFyQ29udHJvbGxlcik7XG5cbiAgICBUb29sYmFyQ29udHJvbGxlci4kaW5qZWN0ID0gWydBdXRoZW50aWNhdGlvbiddO1xuXG4gICAgZnVuY3Rpb24gVG9vbGJhckNvbnRyb2xsZXIoQXV0aGVudGljYXRpb24pIHtcbiAgICAgICAgdmFyIHZtID0gdGhpcztcblxuICAgICAgICB2bS5sb2dvdXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIEF1dGhlbnRpY2F0aW9uLmxvZ291dCgpO1xuICAgICAgICB9O1xuICAgIH1cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCdhcHAuZW5naW5lLnNlcnZpY2UnKVxuICAgICAgICAuZmFjdG9yeSgnRW5naW5lJywgRW5naW5lKTtcblxuICAgIEVuZ2luZS4kaW5qZWN0ID0gWyckaHR0cCddO1xuXG4gICAgZnVuY3Rpb24gRW5naW5lKCRodHRwKSB7XG4gICAgICAgIHZhciBlbmdpbmUgPSB7XG4gICAgICAgICAgICBnZXRBbGxFbmdpbmVzOiBnZXRBbGxFbmdpbmVzXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIGVuZ2luZTtcblxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAgICAgICBmdW5jdGlvbiBnZXRBbGxFbmdpbmVzKCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9lbmdpbmUvJylcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ2FwcC51cGxvYWQnKVxuICAgICAgICAuY29udHJvbGxlcignVXBsb2FkQ29udHJvbGxlcicsIFVwbG9hZENvbnRyb2xsZXIpO1xuXG4gICAgVXBsb2FkQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCAnVXBsb2FkJywgJ1VwbG9hZFNlcnZpY2UnXTtcblxuICAgIGZ1bmN0aW9uIFVwbG9hZENvbnRyb2xsZXIoJHNjb3BlLCBVcGxvYWQsIFVwbG9hZFNlcnZpY2UpIHtcbiAgICAgICAgdmFyIHZtID0gdGhpcztcblxuICAgICAgICAkc2NvcGUuZmlsZVNlbGVjdGVkID0gZmlsZVNlbGVjdGVkO1xuXG4gICAgICAgIHZtLmZpbGVzID0gW107XG4gICAgICAgIHZtLnVwbG9hZCA9IHVwbG9hZDtcbiAgICAgICAgdm0udXBsb2FkZWRGaWxlcyA9IFtdO1xuICAgICAgICB2bS5yZW1vdmUgPSByZW1vdmU7XG4gICAgICAgIHZtLnNlbGVjdGVkID0gW107XG4gICAgICAgIHZtLnNvcnRPcmRlciA9ICctdXBsb2FkZWRfYXQnO1xuXG4gICAgICAgIGFjdGl2YXRlKCk7XG5cbiAgICAgICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICAgICAgICBnZXRVcGxvYWRlZEZpbGVzKCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBmaWxlU2VsZWN0ZWQoZWxlbWVudCkge1xuICAgICAgICAgICAgdXBsb2FkKGVsZW1lbnQuZmlsZXMpO1xuICAgICAgICAgICAgZ2V0VXBsb2FkZWRGaWxlcygpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gdXBsb2FkKGZpbGVzKSB7XG4gICAgICAgICAgICBhbmd1bGFyLmZvckVhY2goZmlsZXMsIGZ1bmN0aW9uKGZpbGUpIHtcbiAgICAgICAgICAgICAgICBVcGxvYWQudXBsb2FkKHtcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnL2FwaS91cGxvYWQvJyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge2ZpbGV1cGxvYWQ6IGZpbGV9XG4gICAgICAgICAgICAgICAgfSkuXG4gICAgICAgICAgICAgICAgdGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgZ2V0VXBsb2FkZWRGaWxlcygpO1xuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKHJlc3ApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yIHN0YXR1czogJyArIHJlc3Auc3RhdHVzKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0VXBsb2FkZWRGaWxlcygpIHtcbiAgICAgICAgICAgIFVwbG9hZFNlcnZpY2UucXVlcnkoKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3ApIHtcbiAgICAgICAgICAgICAgICAgICAgdm0udXBsb2FkZWRGaWxlcyA9IHJlc3A7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiByZW1vdmUoKSB7XG4gICAgICAgICAgICBhbmd1bGFyLmZvckVhY2godm0uc2VsZWN0ZWQsIGZ1bmN0aW9uKGZpbGUpIHtcbiAgICAgICAgICAgICAgICBVcGxvYWRTZXJ2aWNlLnJlbW92ZShmaWxlLmlkKTtcbiAgICAgICAgICAgICAgICByZW1vdmVGaWxlRW50cnkoZmlsZS5pZCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdm0uc2VsZWN0ZWQgPSBbXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHJlbW92ZUZpbGVFbnRyeShpZCkge1xuICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKHZtLnVwbG9hZGVkRmlsZXMsIGZ1bmN0aW9uKHYsIGspIHtcbiAgICAgICAgICAgICAgICBpZiAodm0udXBsb2FkZWRGaWxlc1trXS5pZCA9PT0gaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdm0udXBsb2FkZWRGaWxlcy5zcGxpY2UoaywgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnYXBwLnVwbG9hZC5zZXJ2aWNlJylcbiAgICAgICAgLmZhY3RvcnkoJ1VwbG9hZFNlcnZpY2UnLCBVcGxvYWRTZXJ2aWNlKTtcblxuICAgIFVwbG9hZFNlcnZpY2UuJGluamVjdCA9IFsnJGh0dHAnXTtcbiAgICBmdW5jdGlvbiBVcGxvYWRTZXJ2aWNlKCRodHRwKSB7XG4gICAgICAgIHZhciBzZXJ2aWNlID0ge1xuICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5LFxuICAgICAgICAgICAgcmVtb3ZlOiByZW1vdmVcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gc2VydmljZTtcblxuICAgICAgICBmdW5jdGlvbiBxdWVyeSgpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvZmlsZS8nKS5cbiAgICAgICAgICAgICAgICB0aGVuKGZ1bmN0aW9uKHJlc3ApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3AuZGF0YTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHJlbW92ZShpZCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmRlbGV0ZSgnL2FwaS9maWxlLycgKyBpZCArICcvJykuXG4gICAgICAgICAgICAgICAgdGhlbihmdW5jdGlvbihyZXNwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNwLmRhdGE7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAucGFzc3BvcnQnKVxuICAgICAgICAuZGlyZWN0aXZlKCdhdXRvZm9jdXMnLCBBdXRvZm9jdXNEaXJlY3RpdmUpO1xuXG4gICAgQXV0b2ZvY3VzRGlyZWN0aXZlLiRpbmplY3QgPSBbJyR0aW1lb3V0J11cbiAgICBmdW5jdGlvbiBBdXRvZm9jdXNEaXJlY3RpdmUoJHRpbWVvdXQpIHtcblx0cmV0dXJuIHtcblx0ICAgIHJlc3RyaWN0OiAnQScsXG5cdCAgICBsaW5rIDogZnVuY3Rpb24oJHNjb3BlLCAkZWxlbWVudCkge1xuXHRcdCAgICAkdGltZW91dChmdW5jdGlvbigpIHtcblx0XHQgICAgJGVsZW1lbnQuZm9jdXMoKTtcblx0XHR9KTtcblx0ICAgIH1cblx0fVxuICAgIH1cbn0pKCk7XG5cbiIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLnBhc3Nwb3J0JylcbiAgICAgICAgLmRpcmVjdGl2ZSgnY2hlY2ttYXJrJywgQ2hlY2ttYXJrRGlyZWN0aXZlKTtcblxuICAgIGZ1bmN0aW9uIENoZWNrbWFya0RpcmVjdGl2ZSgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlcXVpcmU6ICdeZm9ybScsXG4gICAgICAgICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW0sIGF0dHJzLCBmb3JtQ29udHJvbGxlcikge1xuICAgICAgICAgICAgICAgIGlmIChmb3JtQ29udHJvbGxlci4kbmFtZSA9PT0gJ3ZtLmRvY3NGb3JtJykge1xuICAgICAgICAgICAgICAgICAgICBzY29wZS5zaG93Q2hlY2ttYXJrID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzY29wZS4kd2F0Y2goZm9ybUNvbnRyb2xsZXIuJG5hbWUgKyAnLiR2YWxpZCcsIGZ1bmN0aW9uKG5ld1ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUuc2hvd0NoZWNrbWFyayA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzY29wZS5zaG93Q2hlY2ttYXJrID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzY29wZTogdHJ1ZSxcbiAgICAgICAgICAgIHRyYW5zY2x1ZGU6IHRydWUsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogJzxzcGFuIG5nLWlmPVwic2hvd0NoZWNrbWFya1wiPicgK1xuICAgICAgICAgICAgICAgICc8aSBjbGFzcz1cImljb24gaW9uLWNoZWNrbWFya1wiIHN0eWxlPVwiY29sb3I6ICMwMGU2NzZcIj48L2k+Jm5ic3A7JyArXG4gICAgICAgICAgICAgICAgJzwvc3Bhbj4nICtcbiAgICAgICAgICAgICAgICAnPHNwYW4gbmctdHJhbnNjbHVkZT48L3NwYW4+J1xuICAgICAgICB9O1xuICAgIH1cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCdhcHAucGFzc3BvcnQnKVxuICAgICAgICAuY29udHJvbGxlcignUGFzc3BvcnRDb250cm9sbGVyJywgUGFzc3BvcnRDb250cm9sbGVyKTtcblxuICAgIFBhc3Nwb3J0Q29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJHN0YXRlJywgJ1VzZXJEYXRhJywgJ0RlcGFydG1lbnQnLCAnRW5naW5lJywgJ1Bhc3Nwb3J0JywgJ1VwbG9hZCddO1xuICAgIGZ1bmN0aW9uIFBhc3Nwb3J0Q29udHJvbGxlcigkc2NvcGUsICRzdGF0ZSwgVXNlckRhdGEsIERlcGFydG1lbnQsIEVuZ2luZSwgUGFzc3BvcnQsIFVwbG9hZCkge1xuXG4gICAgICAgICRzY29wZS51cGxvYWQgPSB1cGxvYWQ7XG5cbiAgICAgICAgdmFyIHZtID0gdGhpcyxcbiAgICAgICAgICAgIGRvY3MgPSBbXG4gICAgICAgICAgICAgICAge25hbWU6ICfQltGD0YDQvdCw0Lsg0YDQtdC80L7QvdGC0LAg0Y3Qu9C10LrRgtGA0L7QtNCy0LjQs9Cw0YLQtdC70Y8nLCB2YWx1ZTogdHJ1ZX0sXG4gICAgICAgICAgICAgICAge25hbWU6ICfQltGD0YDQvdCw0Lsg0Y3QutGB0L/Qu9GD0LDRgtCw0YbQuNC4INGN0LvQtdC60YLRgNC+0LTQstC40LPQsNGC0LXQu9GPJywgdmFsdWU6IHRydWV9LFxuICAgICAgICAgICAgICAgIHtuYW1lOiAn0JjQvdGB0YLRgNGD0LrRhtC40Y8g0L/QviDRjdC60YHQv9C70YPQsNGC0LDRhtC40Lgg0LfQsNCy0L7QtNCwLdC40LfQs9C+0YLQvtCy0LjRgtC10LvRjycsIHZhbHVlOiB0cnVlfSxcbiAgICAgICAgICAgICAgICB7bmFtZTogJ9Cf0YDQvtGC0L7QutC+0LvRiyDRiNGC0LDRgtC90YvRhSDQuNC30LzQtdGA0LXQvdC40Lkg0Lgg0LjRgdC/0YvRgtCw0L3QuNC5JywgdmFsdWU6IHRydWV9LFxuICAgICAgICAgICAgICAgIHtuYW1lOiAn0J/QsNGB0L/QvtGA0YIg0LfQsNCy0L7QtNCwLdC40LfQs9C+0YLQvtCy0LjRgtC10LvRjyDQvdCwINCy0LfRgNGL0LLQvtC30LDRidC40YnQtdC90L3Ri9C5INGN0LvQtdC60YLRgNC+0LTQstC40LPQsNGC0LXQu9GMJywgdmFsdWU6IHRydWV9LFxuICAgICAgICAgICAgICAgIHtuYW1lOiAn0KHRhdC10LzQsCDRjdC70LXQutGC0YDQvtGB0L3QsNCx0LbQtdC90LjRjyDRjdC70LXQutGC0YDQvtC00LLQuNCz0LDRgtC10LvRjycsIHZhbHVlOiB0cnVlfVxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIHBhZ2VzID0gW1xuICAgICAgICAgICAgICAgICd0ZWFtLnRwbC5odG1sJyxcbiAgICAgICAgICAgICAgICAnbWVhc3VyZXJzLnRwbC5odG1sJyxcbiAgICAgICAgICAgICAgICAnbHB1LnRwbC5odG1sJyxcbiAgICAgICAgICAgICAgICAnZGF0ZXMudHBsLmh0bWwnLFxuICAgICAgICAgICAgICAgICdlbmdpbmVzLnRwbC5odG1sJyxcbiAgICAgICAgICAgICAgICAndmFsdWVzLnRwbC5odG1sJyxcbiAgICAgICAgICAgICAgICAnZG9jcy50cGwuaHRtbCcsXG4gICAgICAgICAgICAgICAgJ3Bob3Rvcy50cGwuaHRtbCcsXG4gICAgICAgICAgICAgICAgJ3RoZXJtLnRwbC5odG1sJyxcbiAgICAgICAgICAgICAgICAndmlicm8udHBsLmh0bWwnLFxuICAgICAgICAgICAgICAgICdyZXNpc3RhbmNlLnRwbC5odG1sJyxcbiAgICAgICAgICAgICAgICAnc2lnbmVycy50cGwuaHRtbCdcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICByYW5rcyA9IFtcbiAgICAgICAgICAgICAgICAn0YDRg9C60L7QstC+0LTQuNGC0LXQu9GMINCx0YDQuNCz0LDQtNGLJyxcbiAgICAgICAgICAgICAgICAn0LfQsNC8LiDRgNGD0LrQvtCy0L7QtNC40YLQtdC70Y8g0LHRgNC40LPQsNC00YsnLFxuICAgICAgICAgICAgICAgICfRh9C70LXQvSDQsdGA0LjQs9Cw0LTRiydcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBtZWFzdXJlcnMgPSB7XG4gICAgICAgICAgICAgICAgYWxsOiBEZXBhcnRtZW50Lm1lYXN1cmVycygpLFxuICAgICAgICAgICAgICAgIHNlbGVjdGVkOiBbXSxcbiAgICAgICAgICAgICAgICBzb3J0T3JkZXI6ICduYW1lJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVuZ2luZSA9IHtcbiAgICAgICAgICAgICAgICBhbGw6IFtdLFxuICAgICAgICAgICAgICAgIHNlbGVjdGVkOiB7XG4gICAgICAgICAgICAgICAgICAgICd0eXBlJzogJycsXG4gICAgICAgICAgICAgICAgICAgICdzZXJpYWxfbnVtYmVyJzogMFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgc29ydE9yZGVyOiAnbmFtZSdcbiAgICAgICAgICAgIH07XG5cblxuICAgICAgICB2bS5hZGRFbXBsb3llZSA9IGFkZEVtcGxveWVlO1xuICAgICAgICB2bS5hbGxFbXBsb3llZXMgPSBbXTtcbiAgICAgICAgdm0uY3JlYXRlUGFzc3BvcnQgPSBjcmVhdGVQYXNzcG9ydDtcbiAgICAgICAgdm0uZW5naW5lID0gZW5naW5lO1xuICAgICAgICB2bS53b3JrQmVnaW4gPSB1bmRlZmluZWQ7XG4gICAgICAgIHZtLndvcmtFbmQgPSB1bmRlZmluZWQ7XG4gICAgICAgIHZtLmludmVzdGlnYXRpb25EYXRlID0gdW5kZWZpbmVkO1xuICAgICAgICB2bS5scHVzID0ge307XG4gICAgICAgIHZtLm9yZ3MgPSB7fTtcbiAgICAgICAgdm0ucGFnZXMgPSBwYWdlcztcbiAgICAgICAgdm0udGNsYXNzZXMgPSB7YWxsOiBbXSwgc2VsZWN0ZWQ6ICcnfTtcbiAgICAgICAgdm0uZ2V0TFBVcyA9IGdldExQVXM7XG4gICAgICAgIHZtLm1lYXN1cmVycyA9IG1lYXN1cmVycztcbiAgICAgICAgdm0ucmFua3MgPSByYW5rcztcbiAgICAgICAgdm0ucmVwb3J0ID0ge1xuICAgICAgICAgICAgdGVhbTogdW5kZWZpbmVkLFxuICAgICAgICAgICAgbWVhc3VyZXJzOiBtZWFzdXJlcnMuc2VsZWN0ZWQsXG4gICAgICAgICAgICBmaWxlczoge30sXG4gICAgICAgICAgICB0aGVybToge30sXG4gICAgICAgICAgICB2aWJybzoge30sXG4gICAgICAgICAgICBvcmRlcjoge30sXG4gICAgICAgICAgICByZXNpc3RhbmNlOiB7fVxuICAgICAgICB9O1xuICAgICAgICB2bS5zZXRTZWxlY3RlZCA9IHNldFNlbGVjdGVkO1xuXG4gICAgICAgIGFjdGl2YXRlKCk7XG5cbiAgICAgICAgZnVuY3Rpb24gdXBsb2FkKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHZhciBmaWVsZG5hbWUgPSBlbGVtZW50Lm5hbWU7XG4gICAgICAgICAgICBhbmd1bGFyLmZvckVhY2goZWxlbWVudC5maWxlcywgZnVuY3Rpb24oZmlsZSkge1xuICAgICAgICAgICAgICAgIFVwbG9hZC51cGxvYWQoe1xuICAgICAgICAgICAgICAgICAgICB1cmw6ICcvYXBpL3VwbG9hZC8nLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7ZmlsZXVwbG9hZDogZmlsZX1cbiAgICAgICAgICAgICAgICB9KS5cbiAgICAgICAgICAgICAgICB0aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZtLnJlcG9ydC5maWxlc1tmaWVsZG5hbWVdID0gcmVzcG9uc2UuZGF0YS5pZDtcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRXJyb3Igc3RhdHVzOiAnICsgcmVzcG9uc2Uuc3RhdHVzKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICAgICAgICB2bS5yZXBvcnQudGVhbSA9IFt7J25hbWUnOiAnJywgJ3JlcXVpcmVkJzogdHJ1ZX1dO1xuICAgICAgICAgICAgdm0ucmVwb3J0LmRvY3MgPSBkb2NzO1xuICAgICAgICAgICAgZ2V0RW1wbG95ZWVzKCk7XG4gICAgICAgICAgICBnZXRFbmdpbmVzKCk7XG4gICAgICAgICAgICBnZXRPcmdzKCk7XG4gICAgICAgICAgICBnZXRUQ2xhc3NlcygpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gYWRkRW1wbG95ZWUoKSB7XG4gICAgICAgICAgICB2bS5yZXBvcnQudGVhbS5wdXNoKHtcbiAgICAgICAgICAgICAgICAnbmFtZSc6ICcnLCAncmVxdWlyZWQnOiBmYWxzZVxuICAgICAgICAgICAgfSk7XG4vLyAgICAgICAgICAgIGNvbnNvbGUuZGlyKCd0ZWFtOiAnICsgSlNPTi5zdHJpbmdpZnkodm0ucmVwb3J0LnRlYW0pKTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBjcmVhdGVQYXNzcG9ydCgpIHtcblxuLy8gICAgICAgICAgICBjb25zb2xlLmxvZygnZG9jcyAnICsgSlNPTi5zdHJpbmdpZnkodm0ucmVwb3J0LmRvY3MpKTtcbi8vICAgICAgICAgICAgY29uc29sZS5sb2coJ2ludmVzdGlnYXRpb25EYXRlICcgKyB2bS5pbnZlc3RpZ2F0aW9uRGF0ZS50b0xvY2FsZVN0cmluZygpKTtcbi8vICAgICAgICAgICAgY29uc29sZS5sb2coJ2JlZ2luICcgKyB2bS53b3JrQmVnaW4pO1xuLy8gICAgICAgICAgICBjb25zb2xlLmxvZygnZW5kICcgKyB2bS53b3JrRW5kLnRvTG9jYWxlU3RyaW5nKCkpO1xuLy8gICAgICAgICAgICBQYXNzcG9ydC5jcmVhdGVQYXNzcG9ydCh2bS53b3JrQmVnaW4pO1xuICAgICAgICAgICAgdm0ucmVwb3J0LnR5cGUgPSAncGFzc3BvcnQnO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ3RlYW06JywgSlNPTi5zdHJpbmdpZnkodm0ucmVwb3J0KSk7XG4vLyAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGRlbGV0ZSB2bS5yZXBvcnQudGVhbVswXS5yZXF1aXJlZDtcbi8vICAgICAgICAgICAgY29uc29sZS5kaXIoJ3ZtLnRjbGFzc2VzLmFsbDogJyArIEpTT04uc3RyaW5naWZ5KHZtLnRjbGFzc2VzLmFsbCkpO1xuICAgICAgICAgICAgdm0ucmVwb3J0LnRoZXJtLnRjbGFzcyA9IHZtLnRjbGFzc2VzLmFsbC5maWx0ZXIoZnVuY3Rpb24oZWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZWwubmFtZSA9PT0gdm0udGNsYXNzZXMuc2VsZWN0ZWQ7XG4gICAgICAgICAgICB9KVswXS5pZDtcbi8vICAgICAgICAgICAgY29uc29sZS5kaXIoJ3NlbGVjdGVkIGNsYXNzOiAnICsgSlNPTi5zdHJpbmdpZnkodm0ucmVwb3J0LnRoZXJtKSk7XG4gICAgICAgICAgICBQYXNzcG9ydC5jcmVhdGVQYXNzcG9ydCh2bS5yZXBvcnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0RW1wbG95ZWVzKCkge1xuICAgICAgICAgICAgVXNlckRhdGEuZ2V0QWxsVXNlcnMoKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgdm0uYWxsRW1wbG95ZWVzID0gZGF0YTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0RW5naW5lcygpIHtcbiAgICAgICAgICAgIEVuZ2luZS5nZXRBbGxFbmdpbmVzKClcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHZtLmVuZ2luZS5hbGwgPSBkYXRhO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0T3JncygpIHtcbiAgICAgICAgICAgIFBhc3Nwb3J0LmdldE9yZ3MoKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgdm0ub3JncyA9IGRhdGE7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRMUFVzKG9yZ05hbWUpIHtcbiAgICAgICAgICAgIHZhciBvcmdhbiA9IHZtLm9yZ3MuZmlsdGVyKGZ1bmN0aW9uKGVsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsLm5hbWUgPT09IG9yZ05hbWU7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgUGFzc3BvcnQuZ2V0TFBVcyhvcmdhblswXS5pZClcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHZtLmxwdXMgPSBkYXRhO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0VENsYXNzZXMoKSB7XG4gICAgICAgICAgICBQYXNzcG9ydC5nZXRUQ2xhc3NlcygpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICB2bS50Y2xhc3Nlcy5hbGwgPSBkYXRhO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc2V0U2VsZWN0ZWQoc2VsZWN0ZWQsIGl0ZW0pIHtcbiAgICAgICAgICAgIHZhciBpZCA9IGl0ZW0uaWQsXG4gICAgICAgICAgICAgICAgaW5kZXggPSBzZWxlY3RlZC5pbmRleE9mKGlkKTtcbiAgICAgICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICBzZWxlY3RlZC5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgIGl0ZW0uc2VsZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaXRlbS5zZWxlY3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgc2VsZWN0ZWQucHVzaChpZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnYXBwLnBhc3Nwb3J0LnNlcnZpY2UnKVxuICAgICAgICAuZmFjdG9yeSgnUGFzc3BvcnQnLCBQYXNzcG9ydCk7XG5cbiAgICBQYXNzcG9ydC4kaW5qZWN0ID0gWyckaHR0cCddO1xuXG4gICAgZnVuY3Rpb24gUGFzc3BvcnQoJGh0dHApIHtcbiAgICAgICAgdmFyIHBhc3Nwb3J0ID0ge1xuICAgICAgICAgICAgY3JlYXRlUGFzc3BvcnQ6IGNyZWF0ZVBhc3Nwb3J0LFxuICAgICAgICAgICAgZ2V0TFBVczogZ2V0TFBVcyxcbiAgICAgICAgICAgIGdldE9yZ3M6IGdldE9yZ3MsXG4gICAgICAgICAgICBnZXRUQ2xhc3NlczogZ2V0VENsYXNzZXNcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gcGFzc3BvcnQ7XG5cbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlUGFzc3BvcnQocmVwb3J0X2RhdGEpIHtcbiAgICAgICAgICAgICRodHRwLnBvc3QoJy9yZXBvcnQvJyxcbiAgICAgICAgICAgICAgICAgICAgeydyZXBvcnRfZGF0YSc6IHJlcG9ydF9kYXRhfSxcbiAgICAgICAgICAgICAgICAgICAgeyByZXNwb25zZVR5cGU6ICdhcnJheWJ1ZmZlcicsXG4gICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeydDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbid9XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSwgc3RhdHVzLCBoZWFkZXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmaWxlID0gbmV3IEJsb2IoW2RhdGFdLCB7dHlwZTogJ2FwcGxpY2F0aW9uL3BkZid9KTtcbiAgICAgICAgICAgICAgICAgICAgc2F2ZUFzKGZpbGUsICdyZXBvcnQucGRmJyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBoZWFkZXJzO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0TFBVcyhvcmdJZCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9vcmdhbml6YXRpb24vJyArIG9yZ0lkICsgJy9scHUvJylcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhLmRhdGE7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRPcmdzKCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9vcmdhbml6YXRpb24vJylcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhLmRhdGE7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRUQ2xhc3NlcygpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvdGNsYXNzLycpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGF0YS5kYXRhO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLnBhc3Nwb3J0JylcbiAgICAgICAgLmRpcmVjdGl2ZSgndmFsaWRGaWxlJywgVmFsaWRGaWxlRGlyZWN0aXZlKTtcblxuLy8gICAgVmFsaWRGaWxlRGlyZWN0aXZlLiRpbmplY3QgPSBbJ1VwbG9hZCddO1xuLy9cbi8vICAgIGZ1bmN0aW9uIFZhbGlkRmlsZURpcmVjdGl2ZShVcGxvYWQpIHtcbi8vICAgICAgICBmdW5jdGlvbiB1cGxvYWQoZmlsZSkge1xuLy8gICAgICAgICAgICBjb25zb2xlLmxvZygndXBsb2FkaW5nIGZpbGUgJyArIGZpbGUpO1xuLy8gICAgICAgICAgICBVcGxvYWQudXBsb2FkKHtcbi8vICAgICAgICAgICAgICAgIHVybDogJy9hcGkvdXBsb2FkLycsXG4vLyAgICAgICAgICAgICAgICBkYXRhOiB7ZmlsZXVwbG9hZDogZmlsZX1cbi8vICAgICAgICAgICAgfSkuXG4vLyAgICAgICAgICAgIHRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbi8vICAgICAgICAgICAgICAgIHZtLnJlcG9ydC5maWxlc1tmaWVsZG5hbWVdID0gcmVzcG9uc2UuZGF0YS5pZDtcbi8vICAgICAgICAgICAgfSwgZnVuY3Rpb24ocmVzcG9uc2UpIHtcbi8vICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdFcnJvciBzdGF0dXM6ICcgKyByZXNwb25zZS5zdGF0dXMpO1xuLy8gICAgICAgICAgICB9KTtcbi8vICAgICAgICB9XG5cbiAgICBmdW5jdGlvbiBWYWxpZEZpbGVEaXJlY3RpdmUoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXF1aXJlOiAnbmdNb2RlbCcsXG4gICAgICAgICAgICBzY29wZTogdHJ1ZSxcbiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbCwgYXR0cnMsIG5nTW9kZWwpe1xuICAgICAgICAgICAgICAgIGVsLmJpbmQoJ2NoYW5nZScsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgbmdNb2RlbC4kc2V0Vmlld1ZhbHVlKGVsLnZhbCgpKTtcbi8vICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2ZpbGVuYW1lICcgKyBlbC52YWwoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZ01vZGVsLiRyZW5kZXIoKTtcbi8vICAgICAgICAgICAgICAgICAgICAgICAgdXBsb2FkKHNjb3BlLmltZyk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnYXBwLnNlcnZlcmRhdGEnKVxuICAgICAgICAuZmFjdG9yeSgnU2VydmVyRGF0YScsIFNlcnZlckRhdGEpO1xuXG4gICAgU2VydmVyRGF0YS4kaW5qZWN0ID0gWyckcmVzb3VyY2UnXTtcblxuICAgIGZ1bmN0aW9uIFNlcnZlckRhdGEoJHJlc291cmNlKSB7XG4gICAgICAgIHJldHVybiAkcmVzb3VyY2UoJy9hcGkvOmNhdGVnb3J5LycpO1xuICAgIH1cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5kYXRlcGlja2VyJylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0RhdGVwaWNrZXJDb250cm9sbGVyJywgRGF0ZXBpY2tlckNvbnRyb2xsZXIpO1xuXG4gICAgRGF0ZXBpY2tlckNvbnRyb2xsZXIuJGluamVjdCA9IFsndWliRGF0ZXBpY2tlclBvcHVwQ29uZmlnJ107XG5cbiAgICBmdW5jdGlvbiBEYXRlcGlja2VyQ29udHJvbGxlcih1aWJEYXRlcGlja2VyUG9wdXBDb25maWcpIHtcbiAgICAgICAgdmFyIHZtID0gdGhpcztcblxuICAgICAgICB1aWJEYXRlcGlja2VyUG9wdXBDb25maWcuY2xvc2VUZXh0ID0gJ9CX0LDQutGA0YvRgtGMJztcbiAgICAgICAgdWliRGF0ZXBpY2tlclBvcHVwQ29uZmlnLmN1cnJlbnRUZXh0ID0gJ9Ch0LXQs9C+0LTQvdGPJztcbiAgICAgICAgdWliRGF0ZXBpY2tlclBvcHVwQ29uZmlnLmNsZWFyVGV4dCA9ICfQntGH0LjRgdGC0LjRgtGMJztcbi8vICAgICAgICB1aWJEYXRlcGlja2VyUG9wdXBDb25maWcuaHRtbDVUeXBlcyA9ICdkYXRldGltZS1sb2NhbCc7XG5cblxuICAgICAgICB2bS5kYXRlT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIHN0YXJ0aW5nRGF5OiAxXG4gICAgICAgIH07XG5cbiAgICAgICAgdm0ueWVhck9wdGlvbnMgPSB7XG4gICAgICAgICAgICBkYXRlcGlja2VyTW9kZTogJ3llYXInLFxuICAgICAgICAgICAgbWF4TW9kZTogJ3llYXInLFxuICAgICAgICAgICAgbWluTW9kZTogJ3llYXInLFxuICAgICAgICAgICAgZm9ybWF0WWVhcjogJ3l5eXknXG4gICAgICAgIH07XG5cbiAgICAgICAgdm0ub3BlbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZtLnBvcHVwLm9wZW5lZCA9IHRydWU7XG4gICAgICAgIH07XG5cbiAgICAgICAgdm0ucG9wdXAgPSB7XG4gICAgICAgICAgb3BlbmVkOiBmYWxzZVxuICAgICAgICB9O1xuXG4vLyAgICAgICAgdmFyIHRvbW9ycm93ID0gbmV3IERhdGUoKTtcbi8vICAgICAgICB0b21vcnJvdy5zZXREYXRlKHRvbW9ycm93LmdldERhdGUoKSArIDEpO1xuLy8gICAgICAgIHZhciBhZnRlclRvbW9ycm93ID0gbmV3IERhdGUoKTtcbi8vICAgICAgICBhZnRlclRvbW9ycm93LnNldERhdGUodG9tb3Jyb3cuZ2V0RGF0ZSgpICsgMSk7XG4vLyAgICAgICAgdm0uZXZlbnRzID0gW1xuLy8gICAgICAgICAge1xuLy8gICAgICAgICAgICBkYXRlOiB0b21vcnJvdyxcbi8vICAgICAgICAgICAgc3RhdHVzOiAnZnVsbCdcbi8vICAgICAgICAgIH0sXG4vLyAgICAgICAgICB7XG4vLyAgICAgICAgICAgIGRhdGU6IGFmdGVyVG9tb3Jyb3csXG4vLyAgICAgICAgICAgIHN0YXR1czogJ3BhcnRpYWxseSdcbi8vICAgICAgICAgIH1cbi8vICAgICAgICBdO1xuLy9cbi8vICAgICAgICBmdW5jdGlvbiBnZXREYXlDbGFzcyhkYXRhKSB7XG4vLyAgICAgICAgICB2YXIgZGF0ZSA9IGRhdGEuZGF0ZSxcbi8vICAgICAgICAgICAgbW9kZSA9IGRhdGEubW9kZTtcbi8vICAgICAgICAgIGlmIChtb2RlID09PSAnZGF5Jykge1xuLy8gICAgICAgICAgICB2YXIgZGF5VG9DaGVjayA9IG5ldyBEYXRlKGRhdGUpLnNldEhvdXJzKDAsMCwwLDApO1xuLy9cbi8vICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2bS5ldmVudHMubGVuZ3RoOyBpKyspIHtcbi8vICAgICAgICAgICAgICB2YXIgY3VycmVudERheSA9IG5ldyBEYXRlKHZtLmV2ZW50c1tpXS5kYXRlKS5zZXRIb3VycygwLDAsMCwwKTtcbi8vXG4vLyAgICAgICAgICAgICAgaWYgKGRheVRvQ2hlY2sgPT09IGN1cnJlbnREYXkpIHtcbi8vICAgICAgICAgICAgICAgIHJldHVybiB2bS5ldmVudHNbaV0uc3RhdHVzO1xuLy8gICAgICAgICAgICAgIH1cbi8vICAgICAgICAgICAgfVxuLy8gICAgICAgICAgfVxuLy9cbi8vICAgICAgICAgIHJldHVybiAnJztcbi8vICAgICAgICB9XG4gICAgfVxuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnYXBwLnVzZXJkYXRhLmNvbnRyb2xsZXInKVxuICAgICAgICAuY29udHJvbGxlcignVXNlckRhdGFDb250cm9sbGVyJywgVXNlckRhdGFDb250cm9sbGVyKTtcblxuICAgIFVzZXJEYXRhQ29udHJvbGxlci4kaW5qZWN0ID0gWydVc2VyRGF0YSddO1xuXG4gICAgZnVuY3Rpb24gVXNlckRhdGFDb250cm9sbGVyKFVzZXJEYXRhKSB7XG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG5cbiAgICAgICAgdm0udXBkYXRlUHJvZmlsZSA9IHVwZGF0ZVByb2ZpbGU7XG4gICAgICAgIHZtLnVzZXJkYXRhID0gVXNlckRhdGE7XG5cbiAgICAgICAgYWN0aXZhdGUoKTtcblxuICAgICAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgICAgICAgIFVzZXJEYXRhLmdldCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlUHJvZmlsZSgpIHtcbiAgICAgICAgICAgIFVzZXJEYXRhLnVwZGF0ZSgpO1xuICAgICAgICB9XG4gICAgfVxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ2FwcC51c2VyZGF0YS5zZXJ2aWNlJylcbiAgICAgICAgLmZhY3RvcnkoJ1VzZXJEYXRhJywgVXNlckRhdGEpO1xuXG4gICAgVXNlckRhdGEuJGluamVjdCA9IFsnQ29va2llcycsICckaHR0cCcsICckcScsICckdGltZW91dCddO1xuXG4gICAgZnVuY3Rpb24gVXNlckRhdGEoQ29va2llcywgJGh0dHAsICRxLCAkdGltZW91dCkge1xuICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICAgIGVtYWlsOiAnJyxcbiAgICAgICAgICAgIGZpcnN0X25hbWU6ICcnLFxuICAgICAgICAgICAgbGFzdF9uYW1lOiAnJyxcbiAgICAgICAgICAgIG1pZGRsZV9uYW1lOiAnJyxcbiAgICAgICAgICAgIGRlcGFydG1lbnQ6ICcnXG4gICAgICAgIH07XG4gICAgICAgIHZhciB1c2VyZGF0YSA9IHtcbiAgICAgICAgICAgIGNsZWFuOiBjbGVhbixcbiAgICAgICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgICAgICBnZXQ6IGdldCxcbiAgICAgICAgICAgIGdldEFsbFVzZXJzOiBnZXRBbGxVc2VycyxcbiAgICAgICAgICAgIGlzTG9hZGluZzogZmFsc2UsXG4gICAgICAgICAgICB1cGRhdGU6IHVwZGF0ZSxcbiAgICAgICAgICAgIHVwZGF0ZVN1Y2Nlc3NmdWxsOiBmYWxzZVxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiB1c2VyZGF0YTtcblxuICAgICAgICBmdW5jdGlvbiBjbGVhbigpIHtcbiAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaCh1c2VyZGF0YS5kYXRhLCBmdW5jdGlvbih2LCBrKSB7XG4gICAgICAgICAgICAgICAgZGF0YVtrXSA9ICcnO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICB2YXIgY29va2llID0gQ29va2llcy5nZXQoKTtcbiAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChjb29raWUsIGZ1bmN0aW9uKHYsIGspIHtcbiAgICAgICAgICAgICAgICBpZiAoayBpbiBkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFba10gPSBjb29raWVba107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRBbGxVc2VycygpIHtcbiAgICAgICAgICAgIHZhciBjb29raWUgPSBDb29raWVzLmdldCgpO1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9kZXBhcnRtZW50LycgKyBjb29raWUuZGVwYXJ0bWVudC5pZCArICcvdXNlci8nKS50aGVuKFxuICAgICAgICAgICAgICAgIGdldEFsbFVzZXJzU3VjY2Vzc1xuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldEFsbFVzZXJzU3VjY2VzcyhyZXNwb25zZSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiB1cGRhdGUoKSB7XG4gICAgICAgICAgICB2YXIgY29va2llID0gQ29va2llcy5nZXQoKTtcblxuICAgICAgICAgICAgdXNlcmRhdGEuaXNMb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIHVzZXJkYXRhLnVwZGF0ZVN1Y2Nlc3NmdWxsID0gZmFsc2U7XG5cbiAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChkYXRhLCBmdW5jdGlvbih2LCBrKSB7XG4gICAgICAgICAgICAgICAgY29va2llW2tdID0gZGF0YVtrXTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBDb29raWVzLnNldChjb29raWUpO1xuICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZURCKGNvb2tpZSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiB1cGRhdGVEQihjb29raWUpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5wdXQoJy9hcGkvZGVwYXJ0bWVudC8nICsgY29va2llLmRlcGFydG1lbnQuaWQgK1xuICAgICAgICAgICAgICAgICAgICAnL3VzZXIvJyArIGNvb2tpZS51c2VybmFtZSArICcvJywge1xuICAgICAgICAgICAgICAgIGZpcnN0X25hbWU6IGRhdGEuZmlyc3RfbmFtZSxcbiAgICAgICAgICAgICAgICBsYXN0X25hbWU6IGRhdGEubGFzdF9uYW1lLFxuICAgICAgICAgICAgICAgIG1pZGRsZV9uYW1lOiBkYXRhLm1pZGRsZV9uYW1lLFxuICAgICAgICAgICAgICAgIGVtYWlsOiBkYXRhLmVtYWlsXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4odXBkYXRlU3VjY2VzcylcbiAgICAgICAgICAgIC5jYXRjaCh1cGRhdGVGYWlsZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlU3VjY2VzcyhyZXNwb25zZSkge1xuICAgICAgICAgICAgdXNlcmRhdGEuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB1c2VyZGF0YS51cGRhdGVTdWNjZXNzZnVsbCA9IHRydWU7XG5cbiAgICAgICAgICAgIC8vIE9LLWluZGljYXRvciB3aWxsIGJlIHNob3duIGZvciAzIHNlY29uZHNcbiAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHVzZXJkYXRhLnVwZGF0ZVN1Y2Nlc3NmdWxsID0gZmFsc2U7XG4gICAgICAgICAgICB9LCAzMDAwKTtcblxuLy8gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0RhdGEgZnJvbSB1cGRhdGU6ICVzJywgSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UuZGF0YSkpO1xuLy8gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1N0YXR1cyBmcm9tIHVwZGF0ZTogJXMnLCByZXNwb25zZS5zdGF0dXMpO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiB1cGRhdGVGYWlsZWQoZSkge1xuICAgICAgICAgICAgcmV0dXJuICRxLnJlamVjdChlKTtcbiAgICAgICAgfVxuICAgIH1cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5sb2dpbicpXG4gICAgICAgIC5kaXJlY3RpdmUoJ2dtcElucHV0JywgZ21wSW5wdXQpO1xuXG4gICAgZnVuY3Rpb24gZ21wSW5wdXQgKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbi8vICAgICAgICAgICAgY29udHJvbGxlcjogZnVuY3Rpb24oJHNjb3BlLCAkZWxlbWVudCkge1xuLy8gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJGVsZW1lbnQuYXR0cignbmFtZScpKTtcbi8vICAgICAgICAgICAgICAgICRzY29wZS5oYXNFcnJvciA9IHRoaXMuZmllbGQuJHRvdWNoZWQgJiYgdGhpcy5maWVsZC4kaW52YWxpZDtcbi8vXG4vLyAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSkge1xuICAgICAgICAgICAgICAgIHNjb3BlLmlzVmFsaWQgPSBzY29wZS51c2VyRm9ybS5lbWFpbC4kdG91Y2hlZDtcbi8vICAgICAgICAgICAgICAgIHNjb3BlLnVzZXJGb3JtLmVtYWlsLiR0b3VjaGVkLiR3YXRjaCgpXG5cbiAgICAgICAgICAgIH0sXG4vLyAgICAgICAgICAgIGNvbXBpbGU6IGZ1bmN0aW9uKHRFbGVtLCB0QXR0cnMpIHtcbi8vICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdhdHRyczogJyArIHRBdHRycy5pZCk7XG4vLyAgICAgICAgICAgICAgICB0RWxlbS5maW5kKCdsYWJlbCcpLmF0dHIoJ2ZvcicsIHRBdHRycy5pZCk7XG4vLyAgICAgICAgICAgICAgICB0RWxlbS5maW5kKCdpbnB1dCcpLmF0dHIoJ2lkJywgdEF0dHJzLmlkKTtcbi8vICAgICAgICAgICAgICAgIHRFbGVtLmZpbmQoJ2lucHV0JykuYXR0cignbmFtZScsICdlbWFpbCcpO1xuLy8gICAgICAgICAgICB9LFxuLy8gICAgICAgICAgICBzY29wZToge1xuLy8gICAgICAgICAgICAgICAgdHlwZTogJ0AnLFxuLy8gICAgICAgICAgICAgICAgbW9kZWw6ICc9bmdNb2RlbCcsXG4vLyAgICAgICAgICAgICAgICBmaWVsZDogJz0nLFxuLy8gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICdAJ1xuLy8gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvc3RhdGljL3NyYy9hcHAvdXNlci9nbXAtaW5wdXQuZGlyZWN0aXZlLnRwbC5odG1sJ1xuICAgICAgICB9O1xuICAgIH1cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCdhcHAucmVwb3J0JylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ1JlcG9ydENvbnRyb2xsZXInLCBSZXBvcnRDb250cm9sbGVyKTtcblxuICAgIFJlcG9ydENvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRzdGF0ZScsICdVc2VyRGF0YScsICdEZXBhcnRtZW50JywgJ0VuZ2luZScsICdQYXNzcG9ydCcsICdVcGxvYWQnXTtcbiAgICBmdW5jdGlvbiBSZXBvcnRDb250cm9sbGVyKCRzY29wZSwgJHN0YXRlLCBVc2VyRGF0YSwgRGVwYXJ0bWVudCwgRW5naW5lLCBQYXNzcG9ydCwgVXBsb2FkKSB7XG5cbiAgICAgICAgJHNjb3BlLnVwbG9hZCA9IHVwbG9hZDtcblxuICAgICAgICB2YXIgdm0gPSB0aGlzLFxuICAgICAgICAgICAgcGFnZXMgPSBbXG4gICAgICAgICAgICAgICAgJ3JlcG9ydC90ZWFtLnRwbC5odG1sJyxcbiAgICAgICAgICAgICAgICAncmVwb3J0L3JlcG9ydF9pbmZvLnRwbC5odG1sJyxcbiAgICAgICAgICAgICAgICAnbWVhc3VyZXJzLnRwbC5odG1sJyxcbiAgICAgICAgICAgICAgICAnbHB1LnRwbC5odG1sJyxcbiAgICAgICAgICAgICAgICAncmVwb3J0L2RhdGVzLnRwbC5odG1sJyxcbiAgICAgICAgICAgICAgICAnZW5naW5lcy50cGwuaHRtbCcsXG4gICAgICAgICAgICAgICAgJ29yZGVyLnRwbC5odG1sJyxcbiAgICAgICAgICAgICAgICAncmVwb3J0L3Bob3Rvcy50cGwuaHRtbCcsXG4vLyAgICAgICAgICAgICAgICAndmFsdWVzLnRwbC5odG1sJyxcbi8vICAgICAgICAgICAgICAgICdkb2NzLnRwbC5odG1sJyxcbiAgICAgICAgICAgICAgICAndGhlcm0udHBsLmh0bWwnLFxuICAgICAgICAgICAgICAgICd2aWJyby50cGwuaHRtbCcsXG4gICAgICAgICAgICAgICAgJ3Jlc2lzdGFuY2UudHBsLmh0bWwnLFxuLy8gICAgICAgICAgICAgICAgJ3NpZ25lcnMudHBsLmh0bWwnXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgY29udHJvbF90eXBlcyA9IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICfQktCY0JonLFxuICAgICAgICAgICAgICAgICAgICBmdWxsX25hbWU6ICfQktC40LfRg9Cw0LvRjNC90YvQuSDQuCDQuNC30LzQtdGA0LjRgtC10LvRjNC90YvQuSDQutC+0L3RgtGA0L7Qu9GMJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAn0KPQmicsXG4gICAgICAgICAgICAgICAgICAgIGZ1bGxfbmFtZTogJ9Cj0LvRjNGC0YDQsNC30LLRg9C60L7QstC+0Lkg0LrQvtC90YLRgNC+0LvRjCdcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ9Ci0JonLFxuICAgICAgICAgICAgICAgICAgICBmdWxsX25hbWU6ICfQotC10L/Qu9C+0LLQvtC5INC60L7QvdGC0YDQvtC70YwnXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICfQktCUJyxcbiAgICAgICAgICAgICAgICAgICAgZnVsbF9uYW1lOiAn0JLQuNCx0YDQvtC00LjQsNCz0L3QvtGB0YLQuNGH0LXRgdC60LjQuSDQutC+0L3RgtGA0L7Qu9GMJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAn0K3QmycsXG4gICAgICAgICAgICAgICAgICAgIGZ1bGxfbmFtZTogJ9Ct0LvQtdC60YLRgNC40YfQtdGB0LrQuNC5INC60L7QvdGC0YDQvtC70YwnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIG1lYXN1cmVycyA9IHtcbiAgICAgICAgICAgICAgICBhbGw6IERlcGFydG1lbnQubWVhc3VyZXJzKCksXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWQ6IFtdLFxuICAgICAgICAgICAgICAgIHNvcnRPcmRlcjogJ25hbWUnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZW5naW5lID0ge1xuICAgICAgICAgICAgICAgIGFsbDogW10sXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgJ3R5cGUnOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgJ3NlcmlhbF9udW1iZXInOiAwXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzb3J0T3JkZXI6ICduYW1lJ1xuICAgICAgICAgICAgfTtcblxuXG4gICAgICAgIHZtLmFkZFRvQ29sbGVjdGlvbiA9IGFkZFRvQ29sbGVjdGlvbjtcbiAgICAgICAgdm0uYWxsRW1wbG95ZWVzID0gW107XG4gICAgICAgIHZtLmNvbnRyb2xfdHlwZXMgPSBjb250cm9sX3R5cGVzO1xuICAgICAgICB2bS5jcmVhdGVQYXNzcG9ydCA9IGNyZWF0ZVBhc3Nwb3J0O1xuICAgICAgICB2bS5lbmdpbmUgPSBlbmdpbmU7XG4gICAgICAgIHZtLndvcmtCZWdpbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgdm0ud29ya0VuZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdm0ubHB1cyA9IHt9O1xuICAgICAgICB2bS5vcmdzID0ge307XG4gICAgICAgIHZtLnBhZ2VzID0gcGFnZXM7XG4gICAgICAgIHZtLnByb2NLZXlQcmVzcyA9IHByb2NLZXlQcmVzcztcbiAgICAgICAgdm0udGNsYXNzZXMgPSB7YWxsOiBbXSwgc2VsZWN0ZWQ6ICcnfTtcbiAgICAgICAgdm0uZ2V0TFBVcyA9IGdldExQVXM7XG4gICAgICAgIHZtLm1lYXN1cmVycyA9IG1lYXN1cmVycztcbiAgICAgICAgdm0ucmVwb3J0ID0ge1xuICAgICAgICAgICAgdGVhbTogdW5kZWZpbmVkLFxuICAgICAgICAgICAgbWVhc3VyZXJzOiBtZWFzdXJlcnMuc2VsZWN0ZWQsXG4gICAgICAgICAgICBmaWxlczoge1xuICAgICAgICAgICAgICAgICdtYWluJzogW10sXG4gICAgICAgICAgICAgICAgJ3RoZXJtMSc6IFtdLFxuICAgICAgICAgICAgICAgICd0aGVybTInOiBbXSxcbiAgICAgICAgICAgICAgICAnbGljZW5zZXMnOiBbXVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRoZXJtOiB7fSxcbiAgICAgICAgICAgIHZpYnJvOiB7fSxcbiAgICAgICAgICAgIG9yZGVyOiB7fSxcbiAgICAgICAgICAgIHJlc2lzdGFuY2U6IHt9XG4gICAgICAgIH07XG4gICAgICAgIHZtLnNldFNlbGVjdGVkID0gc2V0U2VsZWN0ZWQ7XG5cbiAgICAgICAgYWN0aXZhdGUoKTtcblxuICAgICAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgICAgICAgIHZtLnJlcG9ydC5pbmZvID0ge1xuICAgICAgICAgICAgICAgIGxpY2Vuc2U6ICfQlNC+0LPQvtCy0L7RgCDihJYgICAgICAgICAg0L7RgiAgICAgICAgICDQvdCwINCy0YvQv9C+0LvQvdC10L3QuNC1INGA0LDQsdC+0YIg0L/QviDRjdC60YHQv9C10YDRgtC40LfQtSDQv9GA0L7QvNGL0YjQu9C10L3QvdC+0Lkg0LHQtdC30L7Qv9Cw0YHQvdC+0YHRgtC4LidcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2bS5yZXBvcnQudGVhbSA9IHt9O1xuICAgICAgICAgICAgdm0ucmVwb3J0LmRvY3MgPSBbXTtcbiAgICAgICAgICAgIHZtLnJlcG9ydC5vYmpfZGF0YSA9IHtcbiAgICAgICAgICAgICAgICBkZXRhaWxfaW5mbzogW11cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGdldEVtcGxveWVlcygpO1xuICAgICAgICAgICAgZ2V0RW5naW5lcygpO1xuICAgICAgICAgICAgZ2V0T3JncygpO1xuICAgICAgICAgICAgZ2V0VENsYXNzZXMoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGFkZFRvQ29sbGVjdGlvbihhcnIsIHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSB2YWx1ZS50cmltKCk7XG4gICAgICAgICAgICAvLyBUZXN0IGZvciBhYnNlbmNlIG9mIGEgbmV3IHZhbHVlIGluIGFycmF5IFxuICAgICAgICAgICAgaWYgKHZhbHVlICE9PSAnJyAmJiBhcnIuaW5kZXhPZih2YWx1ZSkgPT09IC0xICkge1xuICAgICAgICAgICAgICAgIGFyci5wdXNoKHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZVBhc3Nwb3J0KCkge1xuLy8gICAgICAgICAgICBjb25zb2xlLmxvZygnZG9jcyAnICsgSlNPTi5zdHJpbmdpZnkodm0ucmVwb3J0LmRvY3MpKTtcbi8vICAgICAgICAgICAgY29uc29sZS5sb2coJ2ludmVzdGlnYXRpb25EYXRlICcgKyB2bS5pbnZlc3RpZ2F0aW9uRGF0ZS50b0xvY2FsZVN0cmluZygpKTtcbi8vICAgICAgICAgICAgY29uc29sZS5sb2coJ2JlZ2luICcgKyB2bS53b3JrQmVnaW4pO1xuLy8gICAgICAgICAgICBjb25zb2xlLmxvZygnZW5kICcgKyB2bS53b3JrRW5kLnRvTG9jYWxlU3RyaW5nKCkpO1xuLy8gICAgICAgICAgICBQYXNzcG9ydC5jcmVhdGVQYXNzcG9ydCh2bS53b3JrQmVnaW4pO1xuICAgICAgICAgICAgdm0ucmVwb3J0LnR5cGUgPSAgJ3JlcG9ydCc7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygndGVhbTonLCBKU09OLnN0cmluZ2lmeSh2bS5yZXBvcnQpKTtcbi8vICAgICAgICAgICAgcmV0dXJuO1xuLy8gICAgICAgICAgICBjb25zb2xlLmRpcigndm0udGNsYXNzZXMuYWxsOiAnICsgSlNPTi5zdHJpbmdpZnkodm0udGNsYXNzZXMuYWxsKSk7XG4gICAgICAgICAgICB2bS5yZXBvcnQudGhlcm0udGNsYXNzID0gdm0udGNsYXNzZXMuYWxsLmZpbHRlcihmdW5jdGlvbihlbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBlbC5uYW1lID09PSB2bS50Y2xhc3Nlcy5zZWxlY3RlZDtcbiAgICAgICAgICAgIH0pWzBdLmlkO1xuLy8gICAgICAgICAgICBjb25zb2xlLmRpcignc2VsZWN0ZWQgY2xhc3M6ICcgKyBKU09OLnN0cmluZ2lmeSh2bS5yZXBvcnQudGhlcm0pKTtcbiAgICAgICAgICAgIFBhc3Nwb3J0LmNyZWF0ZVBhc3Nwb3J0KHZtLnJlcG9ydCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRFbXBsb3llZXMoKSB7XG4gICAgICAgICAgICBVc2VyRGF0YS5nZXRBbGxVc2VycygpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICB2bS5hbGxFbXBsb3llZXMgPSBkYXRhO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0RW5naW5lcygpIHtcbiAgICAgICAgICAgIEVuZ2luZS5nZXRBbGxFbmdpbmVzKClcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHZtLmVuZ2luZS5hbGwgPSBkYXRhO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0T3JncygpIHtcbiAgICAgICAgICAgIFBhc3Nwb3J0LmdldE9yZ3MoKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgdm0ub3JncyA9IGRhdGE7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRMUFVzKG9yZ05hbWUpIHtcbiAgICAgICAgICAgIHZhciBvcmdhbiA9IHZtLm9yZ3MuZmlsdGVyKGZ1bmN0aW9uKGVsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsLm5hbWUgPT09IG9yZ05hbWU7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgUGFzc3BvcnQuZ2V0TFBVcyhvcmdhblswXS5pZClcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHZtLmxwdXMgPSBkYXRhO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0VENsYXNzZXMoKSB7XG4gICAgICAgICAgICBQYXNzcG9ydC5nZXRUQ2xhc3NlcygpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICB2bS50Y2xhc3Nlcy5hbGwgPSBkYXRhO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gcHJvY0tleVByZXNzKGNsaWNrRXZlbnQsIGFycikge1xuICAgICAgICAgICAgLy8gQ2hlY2sgZm9yIFJldHVybiAoRW50ZXIpIGtleSBwcmVzc2VkXG4gICAgICAgICAgICBpZiAoY2xpY2tFdmVudC53aGljaCA9PT0gMTMpIHtcbiAgICAgICAgICAgICAgICBjbGlja0V2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgYWRkVG9Db2xsZWN0aW9uKGFyciwgY2xpY2tFdmVudC50YXJnZXQudmFsdWUpO1xuICAgICAgICAgICAgICAgIGNsaWNrRXZlbnQudGFyZ2V0LnZhbHVlID0gJyc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZXRTZWxlY3RlZChzZWxlY3RlZCwgaXRlbSkge1xuICAgICAgICAgICAgdmFyIGlkID0gaXRlbS5pZCxcbiAgICAgICAgICAgICAgICBpbmRleCA9IHNlbGVjdGVkLmluZGV4T2YoaWQpO1xuICAgICAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIHNlbGVjdGVkLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgaXRlbS5zZWxlY3RlZCA9IGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpdGVtLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBzZWxlY3RlZC5wdXNoKGlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHVwbG9hZChlbGVtZW50KSB7XG4gICAgICAgICAgICB2YXIgZmllbGRuYW1lID0gZWxlbWVudC5uYW1lO1xuICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKGVsZW1lbnQuZmlsZXMsIGZ1bmN0aW9uKGZpbGUpIHtcbiAgICAgICAgICAgICAgICBVcGxvYWQudXBsb2FkKHtcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnL2FwaS91cGxvYWQvJyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge2ZpbGV1cGxvYWQ6IGZpbGV9XG4gICAgICAgICAgICAgICAgfSkuXG4gICAgICAgICAgICAgICAgdGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICB2bS5yZXBvcnQuZmlsZXNbZmllbGRuYW1lXS5wdXNoKHJlc3BvbnNlLmRhdGEuaWQpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh2bS5yZXBvcnQuZmlsZXMpO1xuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdFcnJvciBzdGF0dXM6ICcgKyByZXNwb25zZS5zdGF0dXMpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnYXBwLnJlcG9ydCcpXG4gICAgICAgIC5jb250cm9sbGVyKCdSZXBvcnRDb250YWluZXJDb250cm9sbGVyJywgUmVwb3J0Q29udGFpbmVyQ29udHJvbGxlcik7XG5cbiAgICBmdW5jdGlvbiBSZXBvcnRDb250YWluZXJDb250cm9sbGVyKCRzY29wZSwgVXNlckRhdGEsIERlcGFydG1lbnQsIFBhc3Nwb3J0LCBVcGxvYWQsIFNlcnZlckRhdGEpIHtcbiAgICAgICAgJ25nSW5qZWN0JztcblxuICAgICAgICAkc2NvcGUudXBsb2FkID0gdXBsb2FkO1xuXG4gICAgICAgIHZhciB2bSA9IHRoaXMsXG4gICAgICAgICAgICBwYWdlcyA9IFtcbiAgICAgICAgICAgICAgICAncmVwb3J0X2NvbnRhaW5lci9kZXZpY2VzLnRwbC5odG1sJyxcbiAgICAgICAgICAgICAgICAncmVwb3J0X2NvbnRhaW5lci9yZXBvcnRfaW5mby50cGwuaHRtbCcsXG4gICAgICAgICAgICAgICAgJ3JlcG9ydF9jb250YWluZXIvb3JkZXIudHBsLmh0bWwnLFxuICAgICAgICAgICAgICAgICdyZXBvcnRfY29udGFpbmVyL3RlYW0udHBsLmh0bWwnLFxuICAgICAgICAgICAgICAgICdyZXBvcnRfY29udGFpbmVyL3NpZ25lcnMudHBsLmh0bWwnLFxuLy8gICAgICAgICAgICAgICAgJ3JlcG9ydF9jb250YWluZXIvZGV2aWNlX2xvY2F0aW9uLnRwbC5odG1sJyxcbi8vICAgICAgICAgICAgICAgICdtZWFzdXJlcnMudHBsLmh0bWwnLFxuLy8gICAgICAgICAgICAgICAgJ3JlcG9ydC9kYXRlcy50cGwuaHRtbCcsXG4vLyAgICAgICAgICAgICAgICAnZW5naW5lcy50cGwuaHRtbCcsXG4vLyAgICAgICAgICAgICAgICAncmVwb3J0L3Bob3Rvcy50cGwuaHRtbCcsXG4vLyAgICAgICAgICAgICAgICAndmFsdWVzLnRwbC5odG1sJyxcbi8vICAgICAgICAgICAgICAgICdkb2NzLnRwbC5odG1sJyxcbi8vICAgICAgICAgICAgICAgICd0aGVybS50cGwuaHRtbCcsXG4vLyAgICAgICAgICAgICAgICAndmlicm8udHBsLmh0bWwnLFxuLy8gICAgICAgICAgICAgICAgJ3Jlc2lzdGFuY2UudHBsLmh0bWwnLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIG1lYXN1cmVycyA9IHtcbiAgICAgICAgICAgICAgICBhbGw6IERlcGFydG1lbnQubWVhc3VyZXJzKCksXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWQ6IFtdLFxuICAgICAgICAgICAgICAgIHNvcnRPcmRlcjogJ25hbWUnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGV2aWNlcyA9IHtcbiAgICAgICAgICAgICAgICBhbGw6IFtdLFxuLy8gICAgICAgICAgICAgICAgc2VsZWN0ZWQ6IHtcbi8vICAgICAgICAgICAgICAgICAgICAndHlwZSc6ICcnLFxuLy8gICAgICAgICAgICAgICAgICAgICdzZXJpYWxfbnVtYmVyJzogMFxuLy8gICAgICAgICAgICAgICAgfSxcbi8vICAgICAgICAgICAgICAgIHNvcnRPcmRlcjogJ25hbWUnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGV2aWNlX2NvbmRpdGlvbnMgPSBbXG4gICAgICAgICAgICAgICAgJ9GA0LDQsdC+0YLQvtGB0L/QvtGB0L7QsdC90L7QtScsXG4gICAgICAgICAgICAgICAgJ9C90LXRgNCw0LHQvtGC0L7RgdC/0L7RgdC+0LHQvdC+0LUnLFxuICAgICAgICAgICAgICAgICfQv9GA0LXQtNC10LvRjNC90L7QtSdcbiAgICAgICAgICAgIF07XG5cblxuLy8gICAgICAgIHZtLmFkZFRvQ29sbGVjdGlvbiA9IGFkZFRvQ29sbGVjdGlvbjtcbiAgICAgICAgdm0uYWxsRW1wbG95ZWVzID0gW107XG4vLyAgICAgICAgdm0uY29udHJvbF90eXBlcyA9IGNvbnRyb2xfdHlwZXM7XG4gICAgICAgIHZtLmRldmljZV9jb25kaXRpb25zID0gZGV2aWNlX2NvbmRpdGlvbnM7XG4gICAgICAgIHZtLmNyZWF0ZVBhc3Nwb3J0ID0gY3JlYXRlUGFzc3BvcnQ7XG4gICAgICAgIHZtLmRldmljZXMgPSBkZXZpY2VzO1xuLy8gICAgICAgIHZtLndvcmtCZWdpbiA9IHVuZGVmaW5lZDtcbi8vICAgICAgICB2bS53b3JrRW5kID0gdW5kZWZpbmVkO1xuICAgICAgICB2bS5scHVzID0ge307XG4gICAgICAgIHZtLm9yZ3MgPSB7fTtcbiAgICAgICAgdm0ucGFnZXMgPSBwYWdlcztcbi8vICAgICAgICB2bS5wcm9jS2V5UHJlc3MgPSBwcm9jS2V5UHJlc3M7XG4vLyAgICAgICAgdm0udGNsYXNzZXMgPSB7YWxsOiBbXSwgc2VsZWN0ZWQ6ICcnfTtcbiAgICAgICAgdm0uZ2V0TFBVcyA9IGdldExQVXM7XG4vLyAgICAgICAgdm0ubWVhc3VyZXJzID0gbWVhc3VyZXJzO1xuICAgICAgICB2bS5yZXBvcnQgPSB7XG4gICAgICAgICAgICB0ZWFtOiBbXSxcbiAgICAgICAgICAgIGluZm86IHtcbiAgICAgICAgICAgICAgICAnaW5mb19pbnZlc3RpZ2F0aW9uJzogJ9Ct0LrRgdC/0LXRgNGC0LjQt9CwINC/0YDQvtC80YvRiNC70LXQvdC90L7QuSDQsdC10LfQvtC/0LDRgdC90L7RgdGC0Lgg0L/RgNC+0LLQvtC00LjRgtGB0Y8g0LLQv9C10YDQstGL0LUuICcgK1xuICAgICAgICAgICAgICAgICAgICAnXFxu0J3Qniwg0JLQniDigJMgMSDRgNCw0Lcg0LIgMiDQs9C+0LTQsCAo0L7RgtCy0LXRgtGB0YLQstC10L3QvdGL0Lkg0LfQsCDQvtGB0YPRidC10YHRgtCy0LvQtdC90LjQtSAnICsgXG4gICAgICAgICAgICAgICAgICAgICfQv9GA0L7QuNC30LLQvtC00YHRgtCy0LXQvdC90L7Qs9C+INC60L7QvdGC0YDQvtC70Y8g0LfQsCDRjdC60YHQv9C70YPQsNGC0LDRhtC40LXQuSDRgdC+0YHRg9C00LApLiAnICtcbiAgICAgICAgICAgICAgICAgICAgJ1xcbtCd0J4sINCS0J4g4oCTIDEg0YDQsNC3INCyIDQg0LPQvtC00LAgKNGD0L/QvtC70L3QvtC80L7Rh9C10L3QvdCw0Y8g0YHQv9C10YbQuNCw0LvQuNC30LjRgNC+0LLQsNC90L3QsNGPINC+0YDQs9Cw0L3QuNC30LDRhtC40Y8sICcgK1xuICAgICAgICAgICAgICAgICAgICAn0L7RgtCy0LXRgtGB0YLQstC10L3QvdGL0Lkg0LfQsCDQvtGB0YPRidC10YHRgtCy0LvQtdC90LjQtSDQv9GA0L7QuNC30LLQvtC00YHRgtCy0LXQvdC90L7Qs9C+INC60L7QvdGC0YDQvtC70Y8g0LfQsCDRjdC60YHQv9C70YPQsNGC0LDRhtC40LXQuSDRgdC+0YHRg9C00LApLiAnICtcbiAgICAgICAgICAgICAgICAgICAgJ1xcbtCT0Jgg4oCTIDEg0YDQsNC3INCyIDgg0LvQtdGCICjRg9C/0L7Qu9C90L7QvNC+0YfQtdC90L3QsNGPINGB0L/QtdGG0LjQsNC70LjQt9C40YDQvtCy0LDQvdC90LDRjyDQvtGA0LPQsNC90LjQt9Cw0YbQuNGPLCAnICsgXG4gICAgICAgICAgICAgICAgICAgICfQvtGC0LLQtdGC0YHRgtCy0LXQvdC90YvQuSDQt9CwINC+0YHRg9GJ0LXRgdGC0LLQu9C10L3QuNC1INC/0YDQvtC40LfQstC+0LTRgdGC0LLQtdC90L3QvtCz0L4g0LrQvtC90YLRgNC+0LvRjyDQt9CwINGN0LrRgdC/0LvRg9Cw0YLQsNGG0LjQtdC5INGB0L7RgdGD0LTQsCknLFxuICAgICAgICAgICAgICAgICdpbmZvX3JlcGFpcic6ICfQkiDQv9GA0LXQtNGB0YLQsNCy0LvQtdC90L3QvtC5INGC0LXRhdC90LjRh9C10YHQutC+0Lkg0LTQvtC60YPQvNC10L3RgtCw0YbQuNC4INC90LUg0L7RgtC80LXRh9C10L3QvicsXG4gICAgICAgICAgICAgICAgJ2Rhbmdlcl9wbGFjZXMnOiAn0JzQtdGB0YLQsCDQutC+0L3RhtC10L3RgtGA0LDRhtC40Lkg0L3QsNC/0YDRj9C20LXQvdC40Lkg4oCTINC/0YDQvtC00L7Qu9GM0L3Ri9C1INC4INC60L7Qu9GM0YbQtdCy0YvQtSDRgdCy0LDRgNC90YvQtSDRiNCy0YssICcgKyBcbiAgICAgICAgICAgICAgICAgICAgJ9C80LXRgdGC0LAg0LLQstCw0YDQutC4INGI0YLRg9GG0LXRgNC+0LI7INC80LXRgdGC0LAg0L3QsNC40LHQvtC70LXQtSDQstC10YDQvtGP0YLQvdC+0LPQviDQutC+0YDRgNC+0LfQuNC+0L3QvdC+0LPQviDQuNC30L3QvtGB0LAg4oCTICcgKyBcbiAgICAgICAgICAgICAgICAgICAgJ9Cy0L3Rg9GC0YDQtdC90L3Rj9GPINC/0L7QstC10YDRhdC90L7RgdGC0Ywg0L3QuNC20L3QtdCz0L4g0LTQvdC40YnQsCcsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuLy8gICAgICAgICAgICB0ZWFtOiB1bmRlZmluZWQsXG4vLyAgICAgICAgICAgIG1lYXN1cmVyczogbWVhc3VyZXJzLnNlbGVjdGVkLFxuLy8gICAgICAgICAgICBmaWxlczoge1xuLy8gICAgICAgICAgICAgICAgJ21haW4nOiBbXSxcbi8vICAgICAgICAgICAgICAgICd0aGVybTEnOiBbXSxcbi8vICAgICAgICAgICAgICAgICd0aGVybTInOiBbXSxcbi8vICAgICAgICAgICAgICAgICdsaWNlbnNlcyc6IFtdXG4vLyAgICAgICAgICAgIH0sXG4vLyAgICAgICAgICAgIHRoZXJtOiB7fSxcbi8vICAgICAgICAgICAgdmlicm86IHt9LFxuLy8gICAgICAgICAgICBvcmRlcjoge30sXG4vLyAgICAgICAgICAgIHJlc2lzdGFuY2U6IHt9XG4vLyAgICAgICAgfTtcbiAgICAgICAgdm0uc2V0U2VsZWN0ZWQgPSBzZXRTZWxlY3RlZDtcblxuICAgICAgICBhY3RpdmF0ZSgpO1xuXG4gICAgICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuICAgICAgICAgICAgZ2V0Q29udGFpbmVycygpO1xuICAgICAgICAgICAgZ2V0T3JncygpO1xuICAgICAgICAgICAgZ2V0RW1wbG95ZWVzKCk7XG4vLyAgICAgICAgICAgIHZtLnJlcG9ydC5pbmZvID0ge1xuLy8gICAgICAgICAgICAgICAgbGljZW5zZTogJ9CU0L7Qs9C+0LLQvtGAIOKEliAgICAgICAgICDQvtGCICAgICAgICAgINC90LAg0LLRi9C/0L7Qu9C90LXQvdC40LUg0YDQsNCx0L7RgiDQv9C+INGN0LrRgdC/0LXRgNGC0LjQt9C1INC/0YDQvtC80YvRiNC70LXQvdC90L7QuSDQsdC10LfQvtC/0LDRgdC90L7RgdGC0LguJ1xuLy8gICAgICAgICAgICB9O1xuLy8gICAgICAgICAgICB2bS5yZXBvcnQudGVhbSA9IHt9O1xuLy8gICAgICAgICAgICB2bS5yZXBvcnQuZG9jcyA9IFtdO1xuLy8gICAgICAgICAgICB2bS5yZXBvcnQub2JqX2RhdGEgPSB7XG4vLyAgICAgICAgICAgICAgICBkZXRhaWxfaW5mbzogW11cbi8vICAgICAgICAgICAgfTtcbi8vXG4vLyAgICAgICAgICAgIGdldEVuZ2luZXMoKTtcbi8vICAgICAgICAgICAgZ2V0VENsYXNzZXMoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGFkZFRvQ29sbGVjdGlvbihhcnIsIHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSB2YWx1ZS50cmltKCk7XG4gICAgICAgICAgICAvLyBUZXN0IGZvciBhYnNlbmNlIG9mIGEgbmV3IHZhbHVlIGluIGFycmF5IFxuICAgICAgICAgICAgaWYgKHZhbHVlICE9PSAnJyAmJiBhcnIuaW5kZXhPZih2YWx1ZSkgPT09IC0xICkge1xuICAgICAgICAgICAgICAgIGFyci5wdXNoKHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZVBhc3Nwb3J0KCkge1xuLy8vLyAgICAgICAgICAgIGNvbnNvbGUubG9nKCdkb2NzICcgKyBKU09OLnN0cmluZ2lmeSh2bS5yZXBvcnQuZG9jcykpO1xuLy8vLyAgICAgICAgICAgIGNvbnNvbGUubG9nKCdpbnZlc3RpZ2F0aW9uRGF0ZSAnICsgdm0uaW52ZXN0aWdhdGlvbkRhdGUudG9Mb2NhbGVTdHJpbmcoKSk7XG4vLy8vICAgICAgICAgICAgY29uc29sZS5sb2coJ2JlZ2luICcgKyB2bS53b3JrQmVnaW4pO1xuLy8vLyAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlbmQgJyArIHZtLndvcmtFbmQudG9Mb2NhbGVTdHJpbmcoKSk7XG4vLy8vICAgICAgICAgICAgUGFzc3BvcnQuY3JlYXRlUGFzc3BvcnQodm0ud29ya0JlZ2luKTtcbiAgICAgICAgICAgIHZtLnJlcG9ydC50eXBlID0gJ3JlcG9ydC1jb250YWluZXInO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ3JlcG9ydDonLCBKU09OLnN0cmluZ2lmeSh2bS5yZXBvcnQpKTtcbi8vLy8gICAgICAgICAgICByZXR1cm47XG4vLy8vICAgICAgICAgICAgY29uc29sZS5kaXIoJ3ZtLnRjbGFzc2VzLmFsbDogJyArIEpTT04uc3RyaW5naWZ5KHZtLnRjbGFzc2VzLmFsbCkpO1xuLy8gICAgICAgICAgICB2bS5yZXBvcnQudGhlcm0udGNsYXNzID0gdm0udGNsYXNzZXMuYWxsLmZpbHRlcihmdW5jdGlvbihlbCkge1xuLy8gICAgICAgICAgICAgICAgcmV0dXJuIGVsLm5hbWUgPT09IHZtLnRjbGFzc2VzLnNlbGVjdGVkO1xuLy8gICAgICAgICAgICB9KVswXS5pZDtcbi8vLy8gICAgICAgICAgICBjb25zb2xlLmRpcignc2VsZWN0ZWQgY2xhc3M6ICcgKyBKU09OLnN0cmluZ2lmeSh2bS5yZXBvcnQudGhlcm0pKTtcbiAgICAgICAgICAgIFBhc3Nwb3J0LmNyZWF0ZVBhc3Nwb3J0KHZtLnJlcG9ydCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRFbXBsb3llZXMoKSB7XG4gICAgICAgICAgICBVc2VyRGF0YS5nZXRBbGxVc2VycygpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICB2bS5hbGxFbXBsb3llZXMgPSBkYXRhO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0Q29udGFpbmVycygpIHtcbiAgICAgICAgICAgIFNlcnZlckRhdGEucXVlcnkoe2NhdGVnb3J5OiAnY29udGFpbmVyJ30sIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICB2bS5kZXZpY2VzLmFsbCA9IGRhdGE7XG4vLyAgICAgICAgICAgICAgICB2bS5kZXZpY2VzLmFsbCA9IGRhdGEubWFwKGZ1bmN0aW9uKGVsKSB7XG4vLyAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsO1xuLy8gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIGZ1bmN0aW9uIGdldE9yZ3MoKSB7XG4gICAgICAgICAgICBQYXNzcG9ydC5nZXRPcmdzKClcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHZtLm9yZ3MgPSBkYXRhO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0TFBVcyhvcmdOYW1lKSB7XG4gICAgICAgICAgICB2YXIgb3JnYW4gPSB2bS5vcmdzLmZpbHRlcihmdW5jdGlvbihlbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBlbC5uYW1lID09PSBvcmdOYW1lO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIFBhc3Nwb3J0LmdldExQVXMob3JnYW5bMF0uaWQpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICB2bS5scHVzID0gZGF0YTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuLy9cbi8vICAgICAgICBmdW5jdGlvbiBnZXRUQ2xhc3NlcygpIHtcbi8vICAgICAgICAgICAgUGFzc3BvcnQuZ2V0VENsYXNzZXMoKVxuLy8gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuLy8gICAgICAgICAgICAgICAgICAgIHZtLnRjbGFzc2VzLmFsbCA9IGRhdGE7XG4vLyAgICAgICAgICAgICAgICB9KTtcbi8vICAgICAgICB9XG4vL1xuLy8gICAgICAgIGZ1bmN0aW9uIHByb2NLZXlQcmVzcyhjbGlja0V2ZW50LCBhcnIpIHtcbi8vICAgICAgICAgICAgLy8gQ2hlY2sgZm9yIFJldHVybiAoRW50ZXIpIGtleSBwcmVzc2VkXG4vLyAgICAgICAgICAgIGlmIChjbGlja0V2ZW50LndoaWNoID09PSAxMykge1xuLy8gICAgICAgICAgICAgICAgY2xpY2tFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuLy8gICAgICAgICAgICAgICAgYWRkVG9Db2xsZWN0aW9uKGFyciwgY2xpY2tFdmVudC50YXJnZXQudmFsdWUpO1xuLy8gICAgICAgICAgICAgICAgY2xpY2tFdmVudC50YXJnZXQudmFsdWUgPSAnJztcbi8vICAgICAgICAgICAgfVxuLy8gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZXRTZWxlY3RlZChzZWxlY3RlZCwgaXRlbSkge1xuICAgICAgICAgICAgdmFyIGlkID0gaXRlbS5pZCxcbiAgICAgICAgICAgICAgICBpbmRleCA9IHNlbGVjdGVkLmluZGV4T2YoaWQpO1xuICAgICAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIHNlbGVjdGVkLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgaXRlbS5zZWxlY3RlZCA9IGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpdGVtLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBzZWxlY3RlZC5wdXNoKGlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHVwbG9hZChlbGVtZW50KSB7XG4gICAgICAgICAgICB2YXIgZmllbGRuYW1lID0gZWxlbWVudC5uYW1lO1xuICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKGVsZW1lbnQuZmlsZXMsIGZ1bmN0aW9uKGZpbGUpIHtcbiAgICAgICAgICAgICAgICBVcGxvYWQudXBsb2FkKHtcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnL2FwaS91cGxvYWQvJyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge2ZpbGV1cGxvYWQ6IGZpbGV9XG4gICAgICAgICAgICAgICAgfSkuXG4gICAgICAgICAgICAgICAgdGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICB2bS5yZXBvcnQuZmlsZXNbZmllbGRuYW1lXS5wdXNoKHJlc3BvbnNlLmRhdGEuaWQpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh2bS5yZXBvcnQuZmlsZXMpO1xuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdFcnJvciBzdGF0dXM6ICcgKyByZXNwb25zZS5zdGF0dXMpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG59KSgpO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
