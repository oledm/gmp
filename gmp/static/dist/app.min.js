!function(){"use strict";angular.module("app.authentication",[])}(),function(){"use strict";angular.module("app.cookies",["ngCookies"])}(),function(){"use strict";angular.module("app.department",["ngResource"])}(),function(){"use strict";angular.module("app.login",["ngMessages","ui.router"])}(),function(){"use strict";angular.module("app.main",["ui.router"])}(),function(){"use strict";angular.module("app",["app.config","app.authentication","app.department","app.serverdata","app.engine.service","app.main","app.datepicker","app.login","app.register","app.cookies","app.userdata.service","app.userdata.controller","app.toolbar","app.upload","app.upload.service","app.passport","app.passport.service","app.report"])}(),function(){"use strict";angular.module("app.register",[])}(),function(){"use strict";angular.module("app.config",["ui.router","ngResource"])}(),function(){"use strict";angular.module("app.toolbar",[])}(),function(){"use strict";angular.module("app.engine.service",[])}(),function(){"use strict";angular.module("app.serverdata",["ngResource"])}(),function(){"use strict";angular.module("app.passport",["ngMessages","ngAnimate"])}(),function(){"use strict";angular.module("app.passport.service",[])}(),function(){"use strict";angular.module("app.upload",["ngFileUpload"])}(),function(){"use strict";angular.module("app.upload.service",[])}(),function(){"use strict";angular.module("app.datepicker",["ui.bootstrap"])}(),function(){"use strict";angular.module("app.userdata.controller",[])}(),function(){"use strict";angular.module("app.userdata.service",[])}(),function(){"use strict";angular.module("app.report",["ngMessages","ngAnimate"])}(),function(){"use strict";function e(e,t,n,r){function o(){return t.isSet()}function a(t,n){return e.post("/api/login/",{email:t,password:n}).then(s,c)}function i(){return e.post("/api/logout/",{}).then(u)}function l(t,n,r){return e.post("/api/department/"+r+"/user/",{email:t,password:n})}function s(e){t.set(e.data),n.$emit("cokkiesSet",""),r.go("home")}function u(){t.remove(),n.$emit("cokkiesSet",void 0),r.go("login")}function c(){}var p={isAuthenticated:o,login:a,logout:i,register:l};return p}angular.module("app.authentication").factory("Authentication",e),e.$inject=["$http","Cookies","$rootScope","$state"]}(),function(){"use strict";function e(e){"ngInject";function t(){try{return JSON.parse(e.get(a))}catch(t){return}}function n(){return!!e.get(a)}function r(t){e.put(a,JSON.stringify(t))}function o(){e.remove(a)}var a="authentcatedAccount",i={get:t,isSet:n,set:r,remove:o};return i}e.$inject=["$cookies"],angular.module("app.cookies").factory("Cookies",e)}(),function(){"use strict";function e(e){return e("/api/department/:depId/",{},{measurers:{method:"get",isArray:!0,params:{depId:1},url:"/api/department/:depId/measurer/"}})}angular.module("app.department").factory("Department",e),e.$inject=["$resource"]}(),function(){"use strict";angular.module("app").run(["$http",function(e){e.defaults.xsrfHeaderName="X-CSRFToken",e.defaults.xsrfCookieName="csrftoken"}])}(),function(){"use strict";function e(e){"ngInject";function t(){e.login(r.email,r.password)}function n(){e.isAuthenticated()&&$state.go("home")}var r=this;r.login=t,n()}e.$inject=["Authentication"],angular.module("app.login").controller("LoginController",e)}(),function(){"use strict";function e(e,t,n,r){function o(){e.isAuthenticated()||t.path("/login"),r.$on("cokkiesSet",function(e,t){void 0===t?i.menu=[]:a()}),a()}function a(){i.menu=[{name:"Профиль",link:"Профиль",ref:"profile"}];var e=n.get();if(void 0!==e){var t=e.department.report_types;angular.forEach(t,function(e){i.menu.push({name:e.name,link:e.name,ref:e.url})})}}var i=this;i.menu=[],o(),i.isAuthenticated=function(){return e.isAuthenticated()}}angular.module("app.main").controller("MainController",e),e.$inject=["Authentication","$location","Cookies","$rootScope"]}(),function(){"use strict";function e(e,t){function n(){a.loadDepartments()}function r(){e.login(a.email,a.password)}function o(){console.log("Registration failed")}var a=this;a.loadDepartments=function(){t.query(function(e){a.allDeps=e})},a.register=function(){e.register(a.email,a.password,a.department.id).then(r,o)},n()}angular.module("app.register").controller("RegisterController",e),e.$inject=["Authentication","Department"]}(),function(){"use strict";function e(e,t,n,r){e.state("home",{url:"/"}).state("login",{url:"/login",controller:"LoginController",controllerAs:"vm",templateUrl:"/static/src/app/user/login.tpl.html"}).state("register",{url:"/register",controller:"RegisterController",controllerAs:"vm",templateUrl:"/static/src/app/user/register.tpl.html"}).state("profile",{url:"/profile",controller:"UserDataController",controllerAs:"vm",templateUrl:"/static/src/app/user/profile.tpl.html"}).state("upload",{url:"/upload",controller:"UploadController",controllerAs:"vm",templateUrl:"/static/src/app/filestorage/upload.tpl.html"}).state("passport",{url:"/passport",controller:"PassportController",controllerAs:"vm",templateUrl:"/static/src/app/report/passport.tpl.html"}).state("report",{url:"/report",controller:"ReportController",controllerAs:"vm",templateUrl:"/static/src/app/report/report/report.tpl.html"}).state("report-container",{url:"/report-container",controller:"ReportContainerController",controllerAs:"vm",templateUrl:"/static/src/app/report/report_container/report.tpl.html"}),t.otherwise("/login"),n.defaults.stripTrailingSlashes=!1,r.html5Mode(!0),r.hashPrefix("!")}function t(){var e=angular.element(document);e.on("click",function(){var t=e.find(".navbar-collapse"),n=t.hasClass("in");n&&t.collapse("hide")})}angular.module("app.config").config(e).run(t),e.$inject=["$stateProvider","$urlRouterProvider","$resourceProvider","$locationProvider"]}(),function(){"use strict";function e(e){var t=this;t.logout=function(){e.logout()}}angular.module("app.toolbar").controller("ToolbarController",e),e.$inject=["Authentication"]}(),function(){"use strict";function e(e){function t(){return e.get("/api/engine/").then(function(e){return e.data})}var n={getAllEngines:t};return n}angular.module("app.engine.service").factory("Engine",e),e.$inject=["$http"]}(),function(){"use strict";function e(e){return e("/api/:category/")}angular.module("app.serverdata").factory("ServerData",e),e.$inject=["$resource"]}(),function(){"use strict";function e(e){return{restrict:"A",link:function(t,n){e(function(){n.focus()})}}}angular.module("app.passport").directive("autofocus",e),e.$inject=["$timeout"]}(),function(){"use strict";function e(){return{require:"^form",restrict:"A",link:function(e,t,n,r){return"vm.docsForm"===r.$name?void(e.showCheckmark=!0):void e.$watch(r.$name+".$valid",function(t){t?e.showCheckmark=!0:e.showCheckmark=!1})},scope:!0,transclude:!0,template:'<span ng-if="showCheckmark"><i class="icon ion-checkmark" style="color: #00e676"></i>&nbsp;</span><span ng-transclude></span>'}}angular.module("app.passport").directive("checkmark",e)}(),function(){"use strict";function e(e,t,n,r,o,a,i){function l(e){var t=e.name;angular.forEach(e.files,function(e){i.upload({url:"/api/upload/",data:{fileupload:e}}).then(function(e){v.report.files[t]=e.data.id},function(e){console.log("Error status: "+e.status)})})}function s(){v.report.team=[{name:"",required:!0}],v.report.docs=$,p(),f(),d(),g()}function u(){v.report.team.push({name:"",required:!1})}function c(){v.report.type="passport",console.log("team:",JSON.stringify(v.report)),delete v.report.team[0].required,v.report.therm.tclass=v.tclasses.all.filter(function(e){return e.name===v.tclasses.selected})[0].id,a.createPassport(v.report)}function p(){n.getAllUsers().then(function(e){v.allEmployees=e})}function f(){o.getAllEngines().then(function(e){v.engine.all=e})}function d(){a.getOrgs().then(function(e){v.orgs=e})}function m(e){var t=v.orgs.filter(function(t){return t.name===e});a.getLPUs(t[0].id).then(function(e){v.lpus=e})}function g(){a.getTClasses().then(function(e){v.tclasses.all=e})}function h(e,t){var n=t.id,r=e.indexOf(n);-1!==r?(e.splice(r,1),t.selected=!1):(t.selected=!0,e.push(n))}e.upload=l;var v=this,$=[{name:"Журнал ремонта электродвигателя",value:!0},{name:"Журнал эксплуатации электродвигателя",value:!0},{name:"Инструкция по эксплуатации завода-изготовителя",value:!0},{name:"Протоколы штатных измерений и испытаний",value:!0},{name:"Паспорт завода-изготовителя на взрывозащищенный электродвигатель",value:!0},{name:"Схема электроснабжения электродвигателя",value:!0}],y=["team.tpl.html","measurers.tpl.html","lpu.tpl.html","dates.tpl.html","engines.tpl.html","values.tpl.html","docs.tpl.html","photos.tpl.html","therm.tpl.html","vibro.tpl.html","resistance.tpl.html","signers.tpl.html"],k=["руководитель бригады","зам. руководителя бригады","член бригады"],C={all:r.measurers(),selected:[],sortOrder:"name"},U={all:[],selected:{type:"",serial_number:0},sortOrder:"name"};v.addEmployee=u,v.allEmployees=[],v.createPassport=c,v.engine=U,v.workBegin=void 0,v.workEnd=void 0,v.investigationDate=void 0,v.lpus={},v.orgs={},v.pages=y,v.tclasses={all:[],selected:""},v.getLPUs=m,v.measurers=C,v.ranks=k,v.report={team:void 0,measurers:C.selected,files:{},therm:{},vibro:{},order:{},resistance:{}},v.setSelected=h,s()}angular.module("app.passport").controller("PassportController",e),e.$inject=["$scope","$state","UserData","Department","Engine","Passport","Upload"]}(),function(){"use strict";function e(e){function t(t){e.post("/report/",{report_data:t},{responseType:"arraybuffer",headers:{"Content-Type":"application/json"}}).success(function(e,t,n){var r=new Blob([e],{type:"application/pdf"});return saveAs(r,"report.pdf"),n})}function n(t){return e.get("/api/organization/"+t+"/lpu/").then(function(e){return e.data})}function r(){return e.get("/api/organization/").then(function(e){return e.data})}function o(){return e.get("/api/tclass/").then(function(e){return e.data})}var a={createPassport:t,getLPUs:n,getOrgs:r,getTClasses:o};return a}angular.module("app.passport.service").factory("Passport",e),e.$inject=["$http"]}(),function(){"use strict";function e(){return{require:"ngModel",scope:!0,link:function(e,t,n,r){t.bind("change",function(){e.$apply(function(){r.$setViewValue(t.val()),r.$render()})})}}}angular.module("app.passport").directive("validFile",e)}(),function(){"use strict";function e(e,t,n){function r(){i()}function o(e){a(e.files),i()}function a(e){angular.forEach(e,function(e){t.upload({url:"/api/upload/",data:{fileupload:e}}).then(function(){i()},function(e){console.log("Error status: "+e.status)})})}function i(){n.query().then(function(e){u.uploadedFiles=e})}function l(){angular.forEach(u.selected,function(e){n.remove(e.id),s(e.id)}),u.selected=[]}function s(e){angular.forEach(u.uploadedFiles,function(t,n){u.uploadedFiles[n].id===e&&u.uploadedFiles.splice(n,1)})}var u=this;e.fileSelected=o,u.files=[],u.upload=a,u.uploadedFiles=[],u.remove=l,u.selected=[],u.sortOrder="-uploaded_at",r()}angular.module("app.upload").controller("UploadController",e),e.$inject=["$scope","Upload","UploadService"]}(),function(){"use strict";function e(e){function t(){return e.get("/api/file/").then(function(e){return e.data})}function n(t){return e["delete"]("/api/file/"+t+"/").then(function(e){return e.data})}var r={query:t,remove:n};return r}angular.module("app.upload.service").factory("UploadService",e),e.$inject=["$http"]}(),function(){"use strict";function e(e){var t=this;e.closeText="Закрыть",e.currentText="Сегодня",e.clearText="Очистить",t.dateOptions={startingDay:1},t.yearOptions={datepickerMode:"year",maxMode:"year",minMode:"year",formatYear:"yyyy"},t.open=function(){t.popup.opened=!0},t.popup={opened:!1}}angular.module("app.datepicker").controller("DatepickerController",e),e.$inject=["uibDatepickerPopupConfig"]}(),function(){"use strict";function e(e){function t(){e.get()}function n(){e.update()}var r=this;r.updateProfile=n,r.userdata=e,t()}angular.module("app.userdata.controller").controller("UserDataController",e),e.$inject=["UserData"]}(),function(){"use strict";function e(e,t,n,r){function o(){angular.forEach(d.data,function(e,t){f[t]=""})}function a(){var t=e.get();angular.forEach(t,function(e,n){n in f&&(f[n]=t[n])})}function i(){var n=e.get();return t.get("/api/department/"+n.department.id+"/user/").then(l)}function l(e){return e.data}function s(){var t=e.get();return d.isLoading=!0,d.updateSuccessfull=!1,angular.forEach(f,function(e,n){t[n]=f[n]}),e.set(t),u(t)}function u(e){return t.put("/api/department/"+e.department.id+"/user/"+e.username+"/",{first_name:f.first_name,last_name:f.last_name,middle_name:f.middle_name,email:f.email}).then(c)["catch"](p)}function c(e){return d.isLoading=!1,d.updateSuccessfull=!0,r(function(){d.updateSuccessfull=!1},3e3),e.data}function p(e){return n.reject(e)}var f={email:"",first_name:"",last_name:"",middle_name:"",department:""},d={clean:o,data:f,get:a,getAllUsers:i,isLoading:!1,update:s,updateSuccessfull:!1};return d}angular.module("app.userdata.service").factory("UserData",e),e.$inject=["Cookies","$http","$q","$timeout"]}(),function(){"use strict";function e(){return{restrict:"E",link:function(e){e.isValid=e.userForm.email.$touched},templateUrl:"/static/src/app/user/gmp-input.directive.tpl.html"}}angular.module("app.login").directive("gmpInput",e)}(),function(){"use strict";function e(e,t,n,r,o,a,i){function l(){$.report.info={license:"Договор №          от          на выполнение работ по экспертизе промышленной безопасности."},$.report.team={},$.report.docs=[],$.report.obj_data={detail_info:[]},c(),p(),f(),m()}function s(e,t){var t=t.trim();""!==t&&-1===e.indexOf(t)&&e.push(t)}function u(){$.report.type="report",console.log("team:",JSON.stringify($.report)),$.report.therm.tclass=$.tclasses.all.filter(function(e){return e.name===$.tclasses.selected})[0].id,a.createPassport($.report)}function c(){n.getAllUsers().then(function(e){$.allEmployees=e})}function p(){o.getAllEngines().then(function(e){$.engine.all=e})}function f(){a.getOrgs().then(function(e){$.orgs=e})}function d(e){var t=$.orgs.filter(function(t){return t.name===e});a.getLPUs(t[0].id).then(function(e){$.lpus=e})}function m(){a.getTClasses().then(function(e){$.tclasses.all=e})}function g(e,t){13===e.which&&(e.preventDefault(),s(t,e.target.value),e.target.value="")}function h(e,t){var n=t.id,r=e.indexOf(n);-1!==r?(e.splice(r,1),t.selected=!1):(t.selected=!0,e.push(n))}function v(e){var t=e.name;angular.forEach(e.files,function(e){i.upload({url:"/api/upload/",data:{fileupload:e}}).then(function(e){$.report.files[t].push(e.data.id),console.log($.report.files)},function(e){console.log("Error status: "+e.status)})})}e.upload=v;var $=this,y=["report/team.tpl.html","report/report_info.tpl.html","measurers.tpl.html","lpu.tpl.html","report/dates.tpl.html","engines.tpl.html","order.tpl.html","report/photos.tpl.html","therm.tpl.html","vibro.tpl.html","resistance.tpl.html"],k=[{name:"ВИК",full_name:"Визуальный и измерительный контроль"},{name:"УК",full_name:"Ультразвуковой контроль"},{name:"ТК",full_name:"Тепловой контроль"},{name:"ВД",full_name:"Вибродиагностический контроль"},{name:"ЭЛ",full_name:"Электрический контроль"}],C={all:r.measurers(),selected:[],sortOrder:"name"},U={all:[],selected:{type:"",serial_number:0},sortOrder:"name"};$.addToCollection=s,$.allEmployees=[],$.control_types=k,$.createPassport=u,$.engine=U,$.workBegin=void 0,$.workEnd=void 0,$.lpus={},$.orgs={},$.pages=y,$.procKeyPress=g,$.tclasses={all:[],selected:""},$.getLPUs=d,$.measurers=C,$.report={team:void 0,measurers:C.selected,files:{main:[],therm1:[],therm2:[],licenses:[]},therm:{},vibro:{},order:{},resistance:{}},$.setSelected=h,l()}angular.module("app.report").controller("ReportController",e),e.$inject=["$scope","$state","UserData","Department","Engine","Passport","Upload"]}(),function(){"use strict";function e(e,t,n,r,o,a){"ngInject";function i(){u(),c(),s()}function l(){m.report.type="report-container",console.log("report:",JSON.stringify(m.report)),r.createPassport(m.report)}function s(){t.getAllUsers().then(function(e){m.allEmployees=e})}function u(){a.query({category:"container"},function(e){m.devices.all=e})}function c(){r.getOrgs().then(function(e){m.orgs=e})}function p(e){var t=m.orgs.filter(function(t){return t.name===e});r.getLPUs(t[0].id).then(function(e){m.lpus=e})}function f(e,t){var n=t.id,r=e.indexOf(n);-1!==r?(e.splice(r,1),t.selected=!1):(t.selected=!0,e.push(n))}function d(e){var t=e.name;angular.forEach(e.files,function(e){o.upload({url:"/api/upload/",data:{fileupload:e}}).then(function(e){m.report.files[t].push(e.data.id),console.log(m.report.files)},function(e){console.log("Error status: "+e.status)})})}e.upload=d;var m=this,g=["report_container/devices.tpl.html","report_container/report_info.tpl.html","report_container/order.tpl.html","report_container/team.tpl.html"],h=({all:n.measurers(),selected:[],sortOrder:"name"},{all:[]}),v=["работоспособное","неработоспособное","предельное"];m.allEmployees=[],m.device_conditions=v,m.createPassport=l,m.devices=h,m.lpus={},m.orgs={},m.pages=g,m.getLPUs=p,m.report={team:[],info:{info_investigation:"Экспертиза промышленной безопасности проводится впервые. \nНО, ВО – 1 раз в 2 года (ответственный за осуществление производственного контроля за эксплуатацией сосуда). \nНО, ВО – 1 раз в 4 года (уполномоченная специализированная организация, ответственный за осуществление производственного контроля за эксплуатацией сосуда). \nГИ – 1 раз в 8 лет (уполномоченная специализированная организация, ответственный за осуществление производственного контроля за эксплуатацией сосуда)",info_repair:"В представленной технической документации не отмечено",danger_places:"Места концентраций напряжений – продольные и кольцевые сварные швы, места вварки штуцеров; места наиболее вероятного коррозионного износа – внутренняя поверхность нижнего днища"}},m.setSelected=f,i()}e.$inject=["$scope","UserData","Department","Passport","Upload","ServerData"],angular.module("app.report").controller("ReportContainerController",e)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGhlbnRpY2F0aW9uL2FwcC5hdXRoZW50aWNhdGlvbi5zZXJ2aWNlLm1vZHVsZS5qcyIsImF1dGhlbnRpY2F0aW9uL2FwcC5jb29raWVzLnNlcnZpY2UubW9kdWxlLmpzIiwiYXV0aGVudGljYXRpb24vYXBwLmRlcGFydG1lbnQuc2VydmljZS5tb2R1bGUuanMiLCJhdXRoZW50aWNhdGlvbi9hcHAubG9naW4ubW9kdWxlLmpzIiwiYXV0aGVudGljYXRpb24vYXBwLm1haW4ubW9kdWxlLmpzIiwiYXV0aGVudGljYXRpb24vYXBwLm1vZHVsZS5qcyIsImF1dGhlbnRpY2F0aW9uL2FwcC5yZWdpc3Rlci5tb2R1bGUuanMiLCJhdXRoZW50aWNhdGlvbi9hcHAucm91dGVzLm1vZHVsZS5qcyIsImF1dGhlbnRpY2F0aW9uL2FwcC50b29sYmFyLm1vZHVsZS5qcyIsImVuZ2luZS9hcHAuZW5naW5lLnNlcnZpY2UubW9kdWxlLmpzIiwic2VydmVyZGF0YS9hcHAuc2VydmVyZGF0YS5zZXJ2aWNlLm1vZHVsZS5qcyIsInJlcG9ydC9hcHAucGFzc3BvcnQubW9kdWxlLmpzIiwicmVwb3J0L2FwcC5wYXNzcG9ydC5zZXJ2aWNlLm1vZHVsZS5qcyIsImZpbGVzdG9yYWdlL2FwcC51cGxvYWQubW9kdWxlLmpzIiwiZmlsZXN0b3JhZ2UvYXBwLnVwbG9hZC5zZXJ2aWNlLm1vZHVsZS5qcyIsInVzZXIvYXBwLmRhdGVwaWNrZXIubW9kdWxlLmpzIiwidXNlci9hcHAudXNlcmRhdGEuY29udHJvbGxlci5tb2R1bGUuanMiLCJ1c2VyL2FwcC51c2VyZGF0YS5zZXJ2aWNlLm1vZHVsZS5qcyIsInJlcG9ydC9yZXBvcnQvYXBwLnJlcG9ydC5tb2R1bGUuanMiLCJhdXRoZW50aWNhdGlvbi9hcHAuYXV0aGVudGljYXRpb24uc2VydmljZS5qcyIsImF1dGhlbnRpY2F0aW9uL2FwcC5jb29raWVzLnNlcnZpY2UuanMiLCJhcHAubWluLmpzIiwiYXV0aGVudGljYXRpb24vYXBwLmRlcGFydG1lbnQuc2VydmljZS5qcyIsImF1dGhlbnRpY2F0aW9uL2FwcC5qcyIsImF1dGhlbnRpY2F0aW9uL2FwcC5sb2dpbi5qcyIsImF1dGhlbnRpY2F0aW9uL2FwcC5tYWluLmpzIiwiYXV0aGVudGljYXRpb24vYXBwLnJlZ2lzdGVyLmpzIiwiYXV0aGVudGljYXRpb24vYXBwLnJvdXRlcy5qcyIsImF1dGhlbnRpY2F0aW9uL2FwcC50b29sYmFyLmpzIiwiZW5naW5lL2FwcC5lbmdpbmUuc2VydmljZS5qcyIsInNlcnZlcmRhdGEvYXBwLnNlcnZlcmRhdGEuc2VydmljZS5qcyIsInJlcG9ydC9hcHAucGFzc3BvcnQuYXV0b2ZvY3VzLmRpcmVjdGl2ZS5qcyIsInJlcG9ydC9hcHAucGFzc3BvcnQuY2hlY2ttYXJrLmRpcmVjdGl2ZS5qcyIsInJlcG9ydC9hcHAucGFzc3BvcnQuanMiLCJyZXBvcnQvYXBwLnBhc3Nwb3J0LnNlcnZpY2UuanMiLCJyZXBvcnQvYXBwLnBhc3Nwb3J0LnZhbGlkRmlsZS5kaXJlY3RpdmUuanMiLCJmaWxlc3RvcmFnZS9hcHAudXBsb2FkLmpzIiwiZmlsZXN0b3JhZ2UvYXBwLnVwbG9hZC5zZXJ2aWNlLmpzIiwidXNlci9hcHAuZGF0ZXBpY2tlci5qcyIsInVzZXIvYXBwLnVzZXJkYXRhLmNvbnRyb2xsZXIuanMiLCJ1c2VyL2FwcC51c2VyZGF0YS5zZXJ2aWNlLmpzIiwidXNlci9nbXAtaW5wdXQuZGlyZWN0aXZlLmpzIiwicmVwb3J0L3JlcG9ydC9hcHAucmVwb3J0LmpzIiwicmVwb3J0L3JlcG9ydF9jb250YWluZXIvYXBwLnJlcG9ydC5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiQXV0aGVudGljYXRpb24iLCIkaHR0cCIsIkNvb2tpZXMiLCIkcm9vdFNjb3BlIiwiJHN0YXRlIiwiaXNBdXRoZW50aWNhdGVkIiwiaXNTZXQiLCJsb2dpbiIsImVtYWlsIiwicGFzc3dvcmQiLCJwb3N0IiwidGhlbiIsImxvZ2luU3VjY2VzcyIsImxvZ2luRmFpbCIsImxvZ291dCIsImxvZ291dFN1Y2Nlc3MiLCJyZWdpc3RlciIsImRlcGFydG1lbnRfaWQiLCJyZXNwb25zZSIsInNldCIsImRhdGEiLCIkZW1pdCIsImdvIiwicmVtb3ZlIiwidW5kZWZpbmVkIiwiYXV0aGVudGljYXRpb24iLCJmYWN0b3J5IiwiJGluamVjdCIsIiRjb29raWVzIiwiZ2V0IiwiSlNPTiIsInBhcnNlIiwiY29va2llTmFtZSIsImUiLCJwdXQiLCJzdHJpbmdpZnkiLCJjb29raWVzIiwiRGVwYXJ0bWVudCIsIiRyZXNvdXJjZSIsIm1lYXN1cmVycyIsIm1ldGhvZCIsImlzQXJyYXkiLCJwYXJhbXMiLCJkZXBJZCIsInVybCIsInJ1biIsImRlZmF1bHRzIiwieHNyZkhlYWRlck5hbWUiLCJ4c3JmQ29va2llTmFtZSIsIkxvZ2luQ29udHJvbGxlciIsInZtIiwiYWN0aXZhdGUiLCJ0aGlzIiwiY29udHJvbGxlciIsIk1haW5Db250cm9sbGVyIiwiJGxvY2F0aW9uIiwicGF0aCIsIiRvbiIsImV2ZW50IiwibWVudSIsInNldHVwTWVudSIsIm5hbWUiLCJsaW5rIiwicmVmIiwicmVwb3J0X3R5cGVzIiwiZGVwYXJ0bWVudCIsImZvckVhY2giLCJyZXBvcnQiLCJwdXNoIiwiUmVnaXN0ZXJDb250cm9sbGVyIiwibG9hZERlcGFydG1lbnRzIiwicmVnaXN0ZXJTdWNjZXNzIiwicmVnaXN0ZXJGYWlsIiwiY29uc29sZSIsImxvZyIsInF1ZXJ5IiwiYWxsRGVwcyIsImlkIiwiY29uZmlnIiwiJHN0YXRlUHJvdmlkZXIiLCIkdXJsUm91dGVyUHJvdmlkZXIiLCIkcmVzb3VyY2VQcm92aWRlciIsIiRsb2NhdGlvblByb3ZpZGVyIiwic3RhdGUiLCJjb250cm9sbGVyQXMiLCJ0ZW1wbGF0ZVVybCIsIm90aGVyd2lzZSIsInN0cmlwVHJhaWxpbmdTbGFzaGVzIiwiaHRtbDVNb2RlIiwiaGFzaFByZWZpeCIsImRvYyIsImVsZW1lbnQiLCJkb2N1bWVudCIsIm9uIiwibmF2YmFyIiwiZmluZCIsIm9wZW5lZCIsImhhc0NsYXNzIiwiY29sbGFwc2UiLCJUb29sYmFyQ29udHJvbGxlciIsIkVuZ2luZSIsImdldEFsbEVuZ2luZXMiLCJlbmdpbmUiLCJTZXJ2ZXJEYXRhIiwiQXV0b2ZvY3VzRGlyZWN0aXZlIiwiJHRpbWVvdXQiLCJyZXN0cmljdCIsIiRzY29wZSIsIiRlbGVtZW50IiwiZm9jdXMiLCJkaXJlY3RpdmUiLCJDaGVja21hcmtEaXJlY3RpdmUiLCJyZXF1aXJlIiwic2NvcGUiLCJlbGVtIiwiYXR0cnMiLCJmb3JtQ29udHJvbGxlciIsIiRuYW1lIiwic2hvd0NoZWNrbWFyayIsIiR3YXRjaCIsIm5ld1ZhbHVlIiwidHJhbnNjbHVkZSIsInRlbXBsYXRlIiwiUGFzc3BvcnRDb250cm9sbGVyIiwiVXNlckRhdGEiLCJQYXNzcG9ydCIsIlVwbG9hZCIsInVwbG9hZCIsImZpZWxkbmFtZSIsImZpbGVzIiwiZmlsZSIsImZpbGV1cGxvYWQiLCJzdGF0dXMiLCJ0ZWFtIiwicmVxdWlyZWQiLCJkb2NzIiwiZ2V0RW1wbG95ZWVzIiwiZ2V0RW5naW5lcyIsImdldE9yZ3MiLCJnZXRUQ2xhc3NlcyIsImFkZEVtcGxveWVlIiwiY3JlYXRlUGFzc3BvcnQiLCJ0eXBlIiwidGhlcm0iLCJ0Y2xhc3MiLCJ0Y2xhc3NlcyIsImFsbCIsImZpbHRlciIsImVsIiwic2VsZWN0ZWQiLCJnZXRBbGxVc2VycyIsImFsbEVtcGxveWVlcyIsIm9yZ3MiLCJnZXRMUFVzIiwib3JnTmFtZSIsIm9yZ2FuIiwibHB1cyIsInNldFNlbGVjdGVkIiwiaXRlbSIsImluZGV4IiwiaW5kZXhPZiIsInNwbGljZSIsInZhbHVlIiwicGFnZXMiLCJyYW5rcyIsInNvcnRPcmRlciIsInNlcmlhbF9udW1iZXIiLCJ3b3JrQmVnaW4iLCJ3b3JrRW5kIiwiaW52ZXN0aWdhdGlvbkRhdGUiLCJ2aWJybyIsIm9yZGVyIiwicmVzaXN0YW5jZSIsInJlcG9ydF9kYXRhIiwicmVzcG9uc2VUeXBlIiwiaGVhZGVycyIsIkNvbnRlbnQtVHlwZSIsInN1Y2Nlc3MiLCJCbG9iIiwic2F2ZUFzIiwib3JnSWQiLCJwYXNzcG9ydCIsIlZhbGlkRmlsZURpcmVjdGl2ZSIsIm5nTW9kZWwiLCJiaW5kIiwiJGFwcGx5IiwiJHNldFZpZXdWYWx1ZSIsInZhbCIsIiRyZW5kZXIiLCJVcGxvYWRDb250cm9sbGVyIiwiVXBsb2FkU2VydmljZSIsImdldFVwbG9hZGVkRmlsZXMiLCJmaWxlU2VsZWN0ZWQiLCJyZXNwIiwidXBsb2FkZWRGaWxlcyIsInJlbW92ZUZpbGVFbnRyeSIsInYiLCJrIiwic2VydmljZSIsIkRhdGVwaWNrZXJDb250cm9sbGVyIiwidWliRGF0ZXBpY2tlclBvcHVwQ29uZmlnIiwiY2xvc2VUZXh0IiwiY3VycmVudFRleHQiLCJjbGVhclRleHQiLCJkYXRlT3B0aW9ucyIsInN0YXJ0aW5nRGF5IiwieWVhck9wdGlvbnMiLCJkYXRlcGlja2VyTW9kZSIsIm1heE1vZGUiLCJtaW5Nb2RlIiwiZm9ybWF0WWVhciIsIm9wZW4iLCJwb3B1cCIsIlVzZXJEYXRhQ29udHJvbGxlciIsInVwZGF0ZVByb2ZpbGUiLCJ1cGRhdGUiLCJ1c2VyZGF0YSIsIiRxIiwiY2xlYW4iLCJjb29raWUiLCJnZXRBbGxVc2Vyc1N1Y2Nlc3MiLCJpc0xvYWRpbmciLCJ1cGRhdGVTdWNjZXNzZnVsbCIsInVwZGF0ZURCIiwidXNlcm5hbWUiLCJmaXJzdF9uYW1lIiwibGFzdF9uYW1lIiwibWlkZGxlX25hbWUiLCJ1cGRhdGVTdWNjZXNzIiwidXBkYXRlRmFpbGVkIiwicmVqZWN0IiwiZ21wSW5wdXQiLCJpc1ZhbGlkIiwidXNlckZvcm0iLCIkdG91Y2hlZCIsIlJlcG9ydENvbnRyb2xsZXIiLCJpbmZvIiwibGljZW5zZSIsIm9ial9kYXRhIiwiZGV0YWlsX2luZm8iLCJhZGRUb0NvbGxlY3Rpb24iLCJhcnIiLCJ0cmltIiwicHJvY0tleVByZXNzIiwiY2xpY2tFdmVudCIsIndoaWNoIiwicHJldmVudERlZmF1bHQiLCJ0YXJnZXQiLCJjb250cm9sX3R5cGVzIiwiZnVsbF9uYW1lIiwibWFpbiIsInRoZXJtMSIsInRoZXJtMiIsImxpY2Vuc2VzIiwiUmVwb3J0Q29udGFpbmVyQ29udHJvbGxlciIsImdldENvbnRhaW5lcnMiLCJjYXRlZ29yeSIsImRldmljZXMiLCJkZXZpY2VfY29uZGl0aW9ucyIsImluZm9faW52ZXN0aWdhdGlvbiIsImluZm9fcmVwYWlyIiwiZGFuZ2VyX3BsYWNlcyJdLCJtYXBwaW5ncyI6IkNBQUEsV0FDQSxZQUVBQSxTQUFBQyxPQUFBLDRCQ0hBLFdBQ0EsWUFFQUQsU0FBQUMsT0FBQSxlQUFBLGlCQ0hBLFdBQ0EsWUFFQUQsU0FBQUMsT0FBQSxrQkFBQSxrQkNIQSxXQUNBLFlBRUFELFNBQUFDLE9BQUEsYUFBQSxhQUFBLGlCQ0hBLFdBQ0EsWUFFQUQsU0FBQUMsT0FBQSxZQUFBLGlCQ0hBLFdBQ0EsWUFFQUQsU0FBQUMsT0FBQSxPQUNBLGFBQ0EscUJBQ0EsaUJBQ0EsaUJBQ0EscUJBQ0EsV0FDQSxpQkFDQSxZQUNBLGVBQ0EsY0FDQSx1QkFDQSwwQkFDQSxjQUNBLGFBQ0EscUJBQ0EsZUFDQSx1QkFDQSxrQkNyQkEsV0FDQSxZQUVBRCxTQUFBQyxPQUFBLHNCQ0hBLFdBQ0EsWUFFQUQsU0FBQUMsT0FBQSxjQUNBLFlBQ0Esa0JDTEEsV0FDQSxZQUVBRCxTQUFBQyxPQUFBLHFCQ0hBLFdBQ0EsWUFFQUQsU0FDQUMsT0FBQSw0QkNKQSxXQUNBLFlBRUFELFNBQUFDLE9BQUEsa0JBQUEsa0JDSEEsV0FDQSxZQUVBRCxTQUFBQyxPQUFBLGdCQUFBLGFBQUEsaUJDSEEsV0FDQSxZQUVBRCxTQUFBQyxPQUFBLDhCQ0hBLFdBQ0EsWUFFQUQsU0FBQUMsT0FBQSxjQUFBLG9CQ0hBLFdBQ0EsWUFFQUQsU0FBQUMsT0FBQSw0QkNIQSxXQUNBLFlBRUFELFNBQUFDLE9BQUEsa0JBQUEsb0JDSEEsV0FDQSxZQUVBRCxTQUFBQyxPQUFBLGlDQ0hBLFdBQ0EsWUFFQUQsU0FBQUMsT0FBQSw4QkNIQSxXQUNBLFlBRUFELFNBQUFDLE9BQUEsY0FBQSxhQUFBLGlCQ0hBLFdBQ0EsWUFRQSxTQUFBQyxHQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxHQVVBLFFBQUFDLEtBQ0EsTUFBQUgsR0FBQUksUUFHQSxRQUFBQyxHQUFBQyxFQUFBQyxHQUNBLE1BQUFSLEdBQUFTLEtBQUEsZUFDQUYsTUFBQUEsRUFDQUMsU0FBQUEsSUFDQUUsS0FBQUMsRUFBQUMsR0FHQSxRQUFBQyxLQUNBLE1BQUFiLEdBQUFTLEtBQUEsbUJBQ0FDLEtBQUFJLEdBR0EsUUFBQUMsR0FBQVIsRUFBQUMsRUFBQVEsR0FDQSxNQUFBaEIsR0FBQVMsS0FBQSxtQkFBQU8sRUFBQSxVQUNBVCxNQUFBQSxFQUNBQyxTQUFBQSxJQUlBLFFBQUFHLEdBQUFNLEdBQ0FoQixFQUFBaUIsSUFBQUQsRUFBQUUsTUFDQWpCLEVBQUFrQixNQUFBLGFBQUEsSUFDQWpCLEVBQUFrQixHQUFBLFFBR0EsUUFBQVAsS0FDQWIsRUFBQXFCLFNBQ0FwQixFQUFBa0IsTUFBQSxhQUFBRyxRQUNBcEIsRUFBQWtCLEdBQUEsU0FHQSxRQUFBVCxNQTVDQSxHQUFBWSxJQUNBcEIsZ0JBQUFBLEVBQ0FFLE1BQUFBLEVBQ0FPLE9BQUFBLEVBQ0FFLFNBQUFBLEVBR0EsT0FBQVMsR0FkQTNCLFFBQ0FDLE9BQUEsc0JBQ0EyQixRQUFBLGlCQUFBMUIsR0FFQUEsRUFBQTJCLFNBQUEsUUFBQSxVQUFBLGFBQUEsYUNQQSxXQUNBLFlBTUEsU0FBQXpCLEdBQUEwQixHQUNBLFVBV0EsU0FBQUMsS0FDQSxJQUNBLE1BQUFDLE1BQUFDLE1BQUFILEVBQUFDLElBQUFHLElBRUEsTUFBQUMsR0FDQSxRQUlBLFFBQUEzQixLQUNBLFFBQUFzQixFQUFBQyxJQUFBRyxHQUdBLFFBQUFiLEdBQUFDLEdBRUFRLEVBQUFNLElBQUFGLEVBQUFGLEtBQUFLLFVBQUFmLElBSUEsUUFBQUcsS0FFQUssRUFBQUwsT0FBQVMsR0EvQkEsR0FBQUEsR0FBQSxzQkFDQUksR0FDQVAsSUFBQUEsRUFDQXZCLE1BQUFBLEVBQ0FhLElBQUFBLEVBQ0FJLE9BQUFBLEVBR0EsT0FBQWEsR0NxTUlsQyxFQUFReUIsU0FBVyxZRG5OdkI3QixRQUNBQyxPQUFBLGVBQ0EyQixRQUFBLFVBQUF4QixNRUxBLFdBQ0EsWUFRQSxTQUFBbUMsR0FBQUMsR0FDQSxNQUFBQSxHQUFBLDhCQUNBQyxXQUNBQyxPQUFBLE1BQ0FDLFNBQUEsRUFDQUMsUUFBQUMsTUFBQSxHQUNBQyxJQUFBLHNDQVpBOUMsUUFDQUMsT0FBQSxrQkFDQTJCLFFBQUEsYUFBQVcsR0FFQUEsRUFBQVYsU0FBQSxnQkNQQSxXQUNBLFlBRUE3QixTQUNBQyxPQUFBLE9BQ0E4QyxLQUFBLFFBQ0EsU0FBQTVDLEdBQ0FBLEVBQUE2QyxTQUFBQyxlQUFBLGNBQ0E5QyxFQUFBNkMsU0FBQUUsZUFBQSxrQkNSQSxXQUNBLFlBTUEsU0FBQUMsR0FBQWpELEdBQ0EsVUFPQSxTQUFBTyxLQUNBUCxFQUFBTyxNQUFBMkMsRUFBQTFDLE1BQUEwQyxFQUFBekMsVUFHQSxRQUFBMEMsS0FDQW5ELEVBQUFLLG1CQUNBRCxPQUFBa0IsR0FBQSxRQVpBLEdBQUE0QixHQUFBRSxJQUVBRixHQUFBM0MsTUFBQUEsRUFFQTRDLElIMFJJRixFQUFnQnRCLFNBQVcsa0JHcFMvQjdCLFFBQ0FDLE9BQUEsYUFDQXNELFdBQUEsa0JBQUFKLE1DTEEsV0FDQSxZQVFBLFNBQUFLLEdBQUF0RCxFQUFBdUQsRUFBQXJELEVBQUFDLEdBUUEsUUFBQWdELEtBQ0FuRCxFQUFBSyxtQkFDQWtELEVBQUFDLEtBQUEsVUFHQXJELEVBQUFzRCxJQUFBLGFBQUEsU0FBQUMsRUFBQXRDLEdBQ0FJLFNBQUFKLEVBQ0E4QixFQUFBUyxRQUVBQyxNQUlBQSxJQUdBLFFBQUFBLEtBQ0FWLEVBQUFTLE9BQUFFLEtBQUEsVUFBQUMsS0FBQSxVQUFBQyxJQUFBLFdBRUEsSUFBQTNCLEdBQUFsQyxFQUFBMkIsS0FDQSxJQUFBTCxTQUFBWSxFQUFBLENBQ0EsR0FBQTRCLEdBQUE1QixFQUFBNkIsV0FBQUQsWUFDQWxFLFNBQUFvRSxRQUFBRixFQUFBLFNBQUFHLEdBQ0FqQixFQUFBUyxLQUFBUyxNQUFBUCxLQUFBTSxFQUFBTixLQUFBQyxLQUFBSyxFQUFBTixLQUFBRSxJQUFBSSxFQUFBdkIsU0E5QkEsR0FBQU0sR0FBQUUsSUFDQUYsR0FBQVMsUUFFQVIsSUFnQ0FELEVBQUE3QyxnQkFBQSxXQUNBLE1BQUFMLEdBQUFLLG1CQTNDQVAsUUFDQUMsT0FBQSxZQUNBc0QsV0FBQSxpQkFBQUMsR0FFQUEsRUFBQTNCLFNBQUEsaUJBQUEsWUFBQSxVQUFBLGlCQ1BBLFdBQ0EsWUFRQSxTQUFBMEMsR0FBQXJFLEVBQUFxQyxHQWdCQSxRQUFBYyxLQUNBRCxFQUFBb0Isa0JBR0EsUUFBQUMsS0FDQXZFLEVBQUFPLE1BQUEyQyxFQUFBMUMsTUFBQTBDLEVBQUF6QyxVQUdBLFFBQUErRCxLQUNBQyxRQUFBQyxJQUFBLHVCQXhCQSxHQUFBeEIsR0FBQUUsSUFFQUYsR0FBQW9CLGdCQUFBLFdBQ0FqQyxFQUFBc0MsTUFBQSxTQUFBdkQsR0FDQThCLEVBQUEwQixRQUFBeEQsS0FJQThCLEVBQUFsQyxTQUFBLFdBQ0FoQixFQUFBZ0IsU0FBQWtDLEVBQUExQyxNQUFBMEMsRUFBQXpDLFNBQUF5QyxFQUFBZSxXQUFBWSxJQUNBbEUsS0FBQTRELEVBQUFDLElBR0FyQixJQXBCQXJELFFBQ0FDLE9BQUEsZ0JBQ0FzRCxXQUFBLHFCQUFBZ0IsR0FFQUEsRUFBQTFDLFNBQUEsaUJBQUEsaUJDUEEsV0FDQSxZQWNBLFNBQUFtRCxHQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxHQUNBSCxFQUNBSSxNQUFBLFFBQ0F2QyxJQUFBLE1BRUF1QyxNQUFBLFNBQ0F2QyxJQUFBLFNBQ0FTLFdBQUEsa0JBQ0ErQixhQUFBLEtBQ0FDLFlBQUEsd0NBRUFGLE1BQUEsWUFDQXZDLElBQUEsWUFDQVMsV0FBQSxxQkFDQStCLGFBQUEsS0FDQUMsWUFBQSwyQ0FFQUYsTUFBQSxXQUNBdkMsSUFBQSxXQUNBUyxXQUFBLHFCQUNBK0IsYUFBQSxLQUNBQyxZQUFBLDBDQUVBRixNQUFBLFVBQ0F2QyxJQUFBLFVBQ0FTLFdBQUEsbUJBQ0ErQixhQUFBLEtBQ0FDLFlBQUEsZ0RBRUFGLE1BQUEsWUFDQXZDLElBQUEsWUFDQVMsV0FBQSxxQkFDQStCLGFBQUEsS0FDQUMsWUFBQSw2Q0FFQUYsTUFBQSxVQUNBdkMsSUFBQSxVQUNBUyxXQUFBLG1CQUNBK0IsYUFBQSxLQUNBQyxZQUFBLGtEQUVBRixNQUFBLG9CQUNBdkMsSUFBQSxvQkFDQVMsV0FBQSw0QkFDQStCLGFBQUEsS0FDQUMsWUFBQSw0REFHQUwsRUFBQU0sVUFBQSxVQUVBTCxFQUFBbkMsU0FBQXlDLHNCQUFBLEVBRUFMLEVBQUFNLFdBQUEsR0FDQU4sRUFBQU8sV0FBQSxLQUdBLFFBQUE1QyxLQUNBLEdBQUE2QyxHQUFBNUYsUUFBQTZGLFFBQUFDLFNBQ0FGLEdBQUFHLEdBQUEsUUFBQSxXQUNBLEdBQUFDLEdBQUFKLEVBQUFLLEtBQUEsb0JBQ0FDLEVBQUFGLEVBQUFHLFNBQUEsS0FDQUQsSUFDQUYsRUFBQUksU0FBQSxVQTFFQXBHLFFBQ0FDLE9BQUEsY0FDQStFLE9BQUFBLEdBQ0FqQyxJQUFBQSxHQUVBaUMsRUFBQW5ELFNBQ0EsaUJBQ0EscUJBQ0Esb0JBQ0Esd0JDWkEsV0FDQSxZQVFBLFNBQUF3RSxHQUFBbkcsR0FDQSxHQUFBa0QsR0FBQUUsSUFFQUYsR0FBQXBDLE9BQUEsV0FDQWQsRUFBQWMsVUFWQWhCLFFBQ0FDLE9BQUEsZUFDQXNELFdBQUEsb0JBQUE4QyxHQUVBQSxFQUFBeEUsU0FBQSxxQkNQQSxXQUNBLFlBUUEsU0FBQXlFLEdBQUFuRyxHQVNBLFFBQUFvRyxLQUNBLE1BQUFwRyxHQUFBNEIsSUFBQSxnQkFDQWxCLEtBQUEsU0FBQU8sR0FDQSxNQUFBQSxHQUFBRSxPQVhBLEdBQUFrRixJQUNBRCxjQUFBQSxFQUdBLE9BQUFDLEdBWEF4RyxRQUNBQyxPQUFBLHNCQUNBMkIsUUFBQSxTQUFBMEUsR0FFQUEsRUFBQXpFLFNBQUEsWUNQQSxXQUNBLFlBUUEsU0FBQTRFLEdBQUFqRSxHQUNBLE1BQUFBLEdBQUEsbUJBUEF4QyxRQUNBQyxPQUFBLGtCQUNBMkIsUUFBQSxhQUFBNkUsR0FFQUEsRUFBQTVFLFNBQUEsZ0JDUEEsV0FDQSxZQU1BLFNBQUE2RSxHQUFBQyxHQUNBLE9BQ0FDLFNBQUEsSUFDQTVDLEtBQUEsU0FBQTZDLEVBQUFDLEdBQ0FILEVBQUEsV0FDQUcsRUFBQUMsWUFUQS9HLFFBQUFDLE9BQUEsZ0JBQ0ErRyxVQUFBLFlBQUFOLEdBRUFBLEVBQUE3RSxTQUFBLGVDTkEsV0FDQSxZQUtBLFNBQUFvRixLQUNBLE9BQ0FDLFFBQUEsUUFDQU4sU0FBQSxJQUNBNUMsS0FBQSxTQUFBbUQsRUFBQUMsRUFBQUMsRUFBQUMsR0FDQSxNQUFBLGdCQUFBQSxFQUFBQyxXQUNBSixFQUFBSyxlQUFBLE9BR0FMLEdBQUFNLE9BQUFILEVBQUFDLE1BQUEsVUFBQSxTQUFBRyxHQUNBQSxFQUNBUCxFQUFBSyxlQUFBLEVBRUFMLEVBQUFLLGVBQUEsS0FJQUwsT0FBQSxFQUNBUSxZQUFBLEVBQ0FDLFNBQUEsaUlBdEJBNUgsUUFBQUMsT0FBQSxnQkFDQStHLFVBQUEsWUFBQUMsTUNKQSxXQUNBLFlBT0EsU0FBQVksR0FBQWhCLEVBQUF2RyxFQUFBd0gsRUFBQXZGLEVBQUErRCxFQUFBeUIsRUFBQUMsR0EwRUEsUUFBQUMsR0FBQXBDLEdBQ0EsR0FBQXFDLEdBQUFyQyxFQUFBOUIsSUFDQS9ELFNBQUFvRSxRQUFBeUIsRUFBQXNDLE1BQUEsU0FBQUMsR0FDQUosRUFBQUMsUUFDQW5GLElBQUEsZUFDQXhCLE1BQUErRyxXQUFBRCxLQUVBdkgsS0FBQSxTQUFBTyxHQUNBZ0MsRUFBQWlCLE9BQUE4RCxNQUFBRCxHQUFBOUcsRUFBQUUsS0FBQXlELElBQ0EsU0FBQTNELEdBQ0F1RCxRQUFBQyxJQUFBLGlCQUFBeEQsRUFBQWtILFlBS0EsUUFBQWpGLEtBQ0FELEVBQUFpQixPQUFBa0UsT0FBQXhFLEtBQUEsR0FBQXlFLFVBQUEsSUFDQXBGLEVBQUFpQixPQUFBb0UsS0FBQUEsRUFDQUMsSUFDQUMsSUFDQUMsSUFDQUMsSUFHQSxRQUFBQyxLQUNBMUYsRUFBQWlCLE9BQUFrRSxLQUFBakUsTUFDQVAsS0FBQSxHQUFBeUUsVUFBQSxJQUlBLFFBQUFPLEtBT0EzRixFQUFBaUIsT0FBQTJFLEtBQUEsV0FDQXJFLFFBQUFDLElBQUEsUUFBQTVDLEtBQUFLLFVBQUFlLEVBQUFpQixlQUVBakIsR0FBQWlCLE9BQUFrRSxLQUFBLEdBQUFDLFNBRUFwRixFQUFBaUIsT0FBQTRFLE1BQUFDLE9BQUE5RixFQUFBK0YsU0FBQUMsSUFBQUMsT0FBQSxTQUFBQyxHQUNBLE1BQUFBLEdBQUF2RixPQUFBWCxFQUFBK0YsU0FBQUksV0FDQSxHQUFBeEUsR0FFQWdELEVBQUFnQixlQUFBM0YsRUFBQWlCLFFBR0EsUUFBQXFFLEtBQ0FaLEVBQUEwQixjQUNBM0ksS0FBQSxTQUFBUyxHQUNBOEIsRUFBQXFHLGFBQUFuSSxJQUtBLFFBQUFxSCxLQUNBckMsRUFBQUMsZ0JBQ0ExRixLQUFBLFNBQUFTLEdBQ0E4QixFQUFBb0QsT0FBQTRDLElBQUE5SCxJQUlBLFFBQUFzSCxLQUNBYixFQUFBYSxVQUNBL0gsS0FBQSxTQUFBUyxHQUNBOEIsRUFBQXNHLEtBQUFwSSxJQUlBLFFBQUFxSSxHQUFBQyxHQUNBLEdBQUFDLEdBQUF6RyxFQUFBc0csS0FBQUwsT0FBQSxTQUFBQyxHQUNBLE1BQUFBLEdBQUF2RixPQUFBNkYsR0FHQTdCLEdBQUE0QixRQUFBRSxFQUFBLEdBQUE5RSxJQUNBbEUsS0FBQSxTQUFBUyxHQUNBOEIsRUFBQTBHLEtBQUF4SSxJQUlBLFFBQUF1SCxLQUNBZCxFQUFBYyxjQUNBaEksS0FBQSxTQUFBUyxHQUNBOEIsRUFBQStGLFNBQUFDLElBQUE5SCxJQUlBLFFBQUF5SSxHQUFBUixFQUFBUyxHQUNBLEdBQUFqRixHQUFBaUYsRUFBQWpGLEdBQ0FrRixFQUFBVixFQUFBVyxRQUFBbkYsRUFDQSxNQUFBa0YsR0FDQVYsRUFBQVksT0FBQUYsRUFBQSxHQUNBRCxFQUFBVCxVQUFBLElBRUFTLEVBQUFULFVBQUEsRUFDQUEsRUFBQWpGLEtBQUFTLElBektBOEIsRUFBQW9CLE9BQUFBLENBRUEsSUFBQTdFLEdBQUFFLEtBQ0FtRixJQUNBMUUsS0FBQSxrQ0FBQXFHLE9BQUEsSUFDQXJHLEtBQUEsdUNBQUFxRyxPQUFBLElBQ0FyRyxLQUFBLGlEQUFBcUcsT0FBQSxJQUNBckcsS0FBQSwwQ0FBQXFHLE9BQUEsSUFDQXJHLEtBQUEsbUVBQUFxRyxPQUFBLElBQ0FyRyxLQUFBLDBDQUFBcUcsT0FBQSxJQUVBQyxHQUNBLGdCQUNBLHFCQUNBLGVBQ0EsaUJBQ0EsbUJBQ0Esa0JBQ0EsZ0JBQ0Esa0JBQ0EsaUJBQ0EsaUJBQ0Esc0JBQ0Esb0JBRUFDLEdBQ0EsdUJBQ0EsNEJBQ0EsZ0JBRUE3SCxHQUNBMkcsSUFBQTdHLEVBQUFFLFlBQ0E4RyxZQUNBZ0IsVUFBQSxRQUVBL0QsR0FDQTRDLE9BQ0FHLFVBQ0FQLEtBQUEsR0FDQXdCLGNBQUEsR0FFQUQsVUFBQSxPQUlBbkgsR0FBQTBGLFlBQUFBLEVBQ0ExRixFQUFBcUcsZ0JBQ0FyRyxFQUFBMkYsZUFBQUEsRUFDQTNGLEVBQUFvRCxPQUFBQSxFQUNBcEQsRUFBQXFILFVBQUEvSSxPQUNBMEIsRUFBQXNILFFBQUFoSixPQUNBMEIsRUFBQXVILGtCQUFBakosT0FDQTBCLEVBQUEwRyxRQUNBMUcsRUFBQXNHLFFBQ0F0RyxFQUFBaUgsTUFBQUEsRUFDQWpILEVBQUErRixVQUFBQyxPQUFBRyxTQUFBLElBQ0FuRyxFQUFBdUcsUUFBQUEsRUFDQXZHLEVBQUFYLFVBQUFBLEVBQ0FXLEVBQUFrSCxNQUFBQSxFQUNBbEgsRUFBQWlCLFFBQ0FrRSxLQUFBN0csT0FDQWUsVUFBQUEsRUFBQThHLFNBQ0FwQixTQUNBYyxTQUNBMkIsU0FDQUMsU0FDQUMsZUFFQTFILEVBQUEyRyxZQUFBQSxFQUVBMUcsSUE3RUFyRCxRQUNBQyxPQUFBLGdCQUNBc0QsV0FBQSxxQkFBQXNFLEdBRUFBLEVBQUFoRyxTQUFBLFNBQUEsU0FBQSxXQUFBLGFBQUEsU0FBQSxXQUFBLGFDUEEsV0FDQSxZQVFBLFNBQUFrRyxHQUFBNUgsR0FVQSxRQUFBNEksR0FBQWdDLEdBQ0E1SyxFQUFBUyxLQUFBLFlBQ0FtSyxZQUFBQSxJQUNBQyxhQUFBLGNBQ0FDLFNBQUFDLGVBQUEsc0JBRUFDLFFBQUEsU0FBQTdKLEVBQUFnSCxFQUFBMkMsR0FDQSxHQUFBN0MsR0FBQSxHQUFBZ0QsT0FBQTlKLElBQUEwSCxLQUFBLG1CQUVBLE9BREFxQyxRQUFBakQsRUFBQSxjQUNBNkMsSUFJQSxRQUFBdEIsR0FBQTJCLEdBQ0EsTUFBQW5MLEdBQUE0QixJQUFBLHFCQUFBdUosRUFBQSxTQUNBekssS0FBQSxTQUFBUyxHQUNBLE1BQUFBLEdBQUFBLE9BSUEsUUFBQXNILEtBQ0EsTUFBQXpJLEdBQUE0QixJQUFBLHNCQUNBbEIsS0FBQSxTQUFBUyxHQUNBLE1BQUFBLEdBQUFBLE9BSUEsUUFBQXVILEtBQ0EsTUFBQTFJLEdBQUE0QixJQUFBLGdCQUNBbEIsS0FBQSxTQUFBUyxHQUNBLE1BQUFBLEdBQUFBLE9BdkNBLEdBQUFpSyxJQUNBeEMsZUFBQUEsRUFDQVksUUFBQUEsRUFDQWYsUUFBQUEsRUFDQUMsWUFBQUEsRUFHQSxPQUFBMEMsR0FkQXZMLFFBQ0FDLE9BQUEsd0JBQ0EyQixRQUFBLFdBQUFtRyxHQUVBQSxFQUFBbEcsU0FBQSxZQ1BBLFdBQ0EsWUFxQkEsU0FBQTJKLEtBQ0EsT0FDQXRFLFFBQUEsVUFDQUMsT0FBQSxFQUNBbkQsS0FBQSxTQUFBbUQsRUFBQW1DLEVBQUFqQyxFQUFBb0UsR0FDQW5DLEVBQUFvQyxLQUFBLFNBQUEsV0FDQXZFLEVBQUF3RSxPQUFBLFdBQ0FGLEVBQUFHLGNBQUF0QyxFQUFBdUMsT0FFQUosRUFBQUssZ0JBNUJBOUwsUUFBQUMsT0FBQSxnQkFDQStHLFVBQUEsWUFBQXdFLE1DSkEsV0FDQSxZQVFBLFNBQUFPLEdBQUFsRixFQUFBbUIsRUFBQWdFLEdBY0EsUUFBQTNJLEtBQ0E0SSxJQUdBLFFBQUFDLEdBQUFyRyxHQUNBb0MsRUFBQXBDLEVBQUFzQyxPQUNBOEQsSUFHQSxRQUFBaEUsR0FBQUUsR0FDQW5JLFFBQUFvRSxRQUFBK0QsRUFBQSxTQUFBQyxHQUNBSixFQUFBQyxRQUNBbkYsSUFBQSxlQUNBeEIsTUFBQStHLFdBQUFELEtBRUF2SCxLQUFBLFdBQ0FvTCxLQUNBLFNBQUFFLEdBQ0F4SCxRQUFBQyxJQUFBLGlCQUFBdUgsRUFBQTdELFlBS0EsUUFBQTJELEtBQ0FELEVBQUFuSCxRQUNBaEUsS0FBQSxTQUFBc0wsR0FDQS9JLEVBQUFnSixjQUFBRCxJQUlBLFFBQUExSyxLQUNBekIsUUFBQW9FLFFBQUFoQixFQUFBbUcsU0FBQSxTQUFBbkIsR0FDQTRELEVBQUF2SyxPQUFBMkcsRUFBQXJELElBQ0FzSCxFQUFBakUsRUFBQXJELE1BR0EzQixFQUFBbUcsWUFHQSxRQUFBOEMsR0FBQXRILEdBQ0EvRSxRQUFBb0UsUUFBQWhCLEVBQUFnSixjQUFBLFNBQUFFLEVBQUFDLEdBQ0FuSixFQUFBZ0osY0FBQUcsR0FBQXhILEtBQUFBLEdBQ0EzQixFQUFBZ0osY0FBQWpDLE9BQUFvQyxFQUFBLEtBdkRBLEdBQUFuSixHQUFBRSxJQUVBdUQsR0FBQXFGLGFBQUFBLEVBRUE5SSxFQUFBK0UsU0FDQS9FLEVBQUE2RSxPQUFBQSxFQUNBN0UsRUFBQWdKLGlCQUNBaEosRUFBQTNCLE9BQUFBLEVBQ0EyQixFQUFBbUcsWUFDQW5HLEVBQUFtSCxVQUFBLGVBRUFsSCxJQWxCQXJELFFBQ0FDLE9BQUEsY0FDQXNELFdBQUEsbUJBQUF3SSxHQUVBQSxFQUFBbEssU0FBQSxTQUFBLFNBQUEsb0JDUEEsV0FDQSxZQU9BLFNBQUFtSyxHQUFBN0wsR0FRQSxRQUFBMEUsS0FDQSxNQUFBMUUsR0FBQTRCLElBQUEsY0FDQWxCLEtBQUEsU0FBQXNMLEdBQ0EsTUFBQUEsR0FBQTdLLE9BSUEsUUFBQUcsR0FBQXNELEdBQ0EsTUFBQTVFLEdBQUFBLFVBQUEsYUFBQTRFLEVBQUEsS0FDQWxFLEtBQUEsU0FBQXNMLEdBQ0EsTUFBQUEsR0FBQTdLLE9BakJBLEdBQUFrTCxJQUNBM0gsTUFBQUEsRUFDQXBELE9BQUFBLEVBR0EsT0FBQStLLEdBWEF4TSxRQUNBQyxPQUFBLHNCQUNBMkIsUUFBQSxnQkFBQW9LLEdBRUFBLEVBQUFuSyxTQUFBLFlDUEEsV0FDQSxZQU9BLFNBQUE0SyxHQUFBQyxHQUNBLEdBQUF0SixHQUFBRSxJQUVBb0osR0FBQUMsVUFBQSxVQUNBRCxFQUFBRSxZQUFBLFVBQ0FGLEVBQUFHLFVBQUEsV0FJQXpKLEVBQUEwSixhQUNBQyxZQUFBLEdBR0EzSixFQUFBNEosYUFDQUMsZUFBQSxPQUNBQyxRQUFBLE9BQ0FDLFFBQUEsT0FDQUMsV0FBQSxRQUdBaEssRUFBQWlLLEtBQUEsV0FDQWpLLEVBQUFrSyxNQUFBcEgsUUFBQSxHQUdBOUMsRUFBQWtLLE9BQ0FwSCxRQUFBLEdBOUJBbEcsUUFBQUMsT0FBQSxrQkFDQXNELFdBQUEsdUJBQUFrSixHQUVBQSxFQUFBNUssU0FBQSwrQkNOQSxXQUNBLFlBUUEsU0FBQTBMLEdBQUF6RixHQVFBLFFBQUF6RSxLQUNBeUUsRUFBQS9GLE1BR0EsUUFBQXlMLEtBQ0ExRixFQUFBMkYsU0FaQSxHQUFBckssR0FBQUUsSUFFQUYsR0FBQW9LLGNBQUFBLEVBQ0FwSyxFQUFBc0ssU0FBQTVGLEVBRUF6RSxJQVpBckQsUUFDQUMsT0FBQSwyQkFDQXNELFdBQUEscUJBQUFnSyxHQUVBQSxFQUFBMUwsU0FBQSxlQ1BBLFdBQ0EsWUFRQSxTQUFBaUcsR0FBQTFILEVBQUFELEVBQUF3TixFQUFBaEgsR0FvQkEsUUFBQWlILEtBQ0E1TixRQUFBb0UsUUFBQXNKLEVBQUFwTSxLQUFBLFNBQUFnTCxFQUFBQyxHQUNBakwsRUFBQWlMLEdBQUEsS0FJQSxRQUFBeEssS0FDQSxHQUFBOEwsR0FBQXpOLEVBQUEyQixLQUNBL0IsU0FBQW9FLFFBQUF5SixFQUFBLFNBQUF2QixFQUFBQyxHQUNBQSxJQUFBakwsS0FDQUEsRUFBQWlMLEdBQUFzQixFQUFBdEIsTUFLQSxRQUFBL0MsS0FDQSxHQUFBcUUsR0FBQXpOLEVBQUEyQixLQUNBLE9BQUE1QixHQUFBNEIsSUFBQSxtQkFBQThMLEVBQUExSixXQUFBWSxHQUFBLFVBQUFsRSxLQUNBaU4sR0FJQSxRQUFBQSxHQUFBMU0sR0FDQSxNQUFBQSxHQUFBRSxLQUdBLFFBQUFtTSxLQUNBLEdBQUFJLEdBQUF6TixFQUFBMkIsS0FVQSxPQVJBMkwsR0FBQUssV0FBQSxFQUNBTCxFQUFBTSxtQkFBQSxFQUVBaE8sUUFBQW9FLFFBQUE5QyxFQUFBLFNBQUFnTCxFQUFBQyxHQUNBc0IsRUFBQXRCLEdBQUFqTCxFQUFBaUwsS0FHQW5NLEVBQUFpQixJQUFBd00sR0FDQUksRUFBQUosR0FHQSxRQUFBSSxHQUFBSixHQUNBLE1BQUExTixHQUFBaUMsSUFBQSxtQkFBQXlMLEVBQUExSixXQUFBWSxHQUNBLFNBQUE4SSxFQUFBSyxTQUFBLEtBQ0FDLFdBQUE3TSxFQUFBNk0sV0FDQUMsVUFBQTlNLEVBQUE4TSxVQUNBQyxZQUFBL00sRUFBQStNLFlBQ0EzTixNQUFBWSxFQUFBWixRQUVBRyxLQUFBeU4sR0FQQW5PLFNBUUFvTyxHQUdBLFFBQUFELEdBQUFsTixHQVdBLE1BVkFzTSxHQUFBSyxXQUFBLEVBQ0FMLEVBQUFNLG1CQUFBLEVBR0FySCxFQUFBLFdBQ0ErRyxFQUFBTSxtQkFBQSxHQUNBLEtBSUE1TSxFQUFBRSxLQUdBLFFBQUFpTixHQUFBcE0sR0FDQSxNQUFBd0wsR0FBQWEsT0FBQXJNLEdBdEZBLEdBQUFiLElBQ0FaLE1BQUEsR0FDQXlOLFdBQUEsR0FDQUMsVUFBQSxHQUNBQyxZQUFBLEdBQ0FsSyxXQUFBLElBRUF1SixHQUNBRSxNQUFBQSxFQUNBdE0sS0FBQUEsRUFDQVMsSUFBQUEsRUFDQXlILFlBQUFBLEVBQ0F1RSxXQUFBLEVBQ0FOLE9BQUFBLEVBQ0FPLG1CQUFBLEVBR0EsT0FBQU4sR0F4QkExTixRQUNBQyxPQUFBLHdCQUNBMkIsUUFBQSxXQUFBa0csR0FFQUEsRUFBQWpHLFNBQUEsVUFBQSxRQUFBLEtBQUEsZUNQQSxXQUNBLFlBS0EsU0FBQTRNLEtBQ0EsT0FDQTdILFNBQUEsSUFNQTVDLEtBQUEsU0FBQW1ELEdBQ0FBLEVBQUF1SCxRQUFBdkgsRUFBQXdILFNBQUFqTyxNQUFBa08sVUFnQkFySixZQUFBLHFEQTVCQXZGLFFBQUFDLE9BQUEsYUFDQStHLFVBQUEsV0FBQXlILE1DSkEsV0FDQSxZQU9BLFNBQUFJLEdBQUFoSSxFQUFBdkcsRUFBQXdILEVBQUF2RixFQUFBK0QsRUFBQXlCLEVBQUFDLEdBMEZBLFFBQUEzRSxLQUNBRCxFQUFBaUIsT0FBQXlLLE1BQ0FDLFFBQUEsK0ZBRUEzTCxFQUFBaUIsT0FBQWtFLFFBQ0FuRixFQUFBaUIsT0FBQW9FLFFBQ0FyRixFQUFBaUIsT0FBQTJLLFVBQ0FDLGdCQUdBdkcsSUFDQUMsSUFDQUMsSUFDQUMsSUFHQSxRQUFBcUcsR0FBQUMsRUFBQS9FLEdBQ0EsR0FBQUEsR0FBQUEsRUFBQWdGLE1BRUEsTUFBQWhGLEdBQUEsS0FBQStFLEVBQUFqRixRQUFBRSxJQUNBK0UsRUFBQTdLLEtBQUE4RixHQUlBLFFBQUFyQixLQU1BM0YsRUFBQWlCLE9BQUEyRSxLQUFBLFNBQ0FyRSxRQUFBQyxJQUFBLFFBQUE1QyxLQUFBSyxVQUFBZSxFQUFBaUIsU0FHQWpCLEVBQUFpQixPQUFBNEUsTUFBQUMsT0FBQTlGLEVBQUErRixTQUFBQyxJQUFBQyxPQUFBLFNBQUFDLEdBQ0EsTUFBQUEsR0FBQXZGLE9BQUFYLEVBQUErRixTQUFBSSxXQUNBLEdBQUF4RSxHQUVBZ0QsRUFBQWdCLGVBQUEzRixFQUFBaUIsUUFHQSxRQUFBcUUsS0FDQVosRUFBQTBCLGNBQ0EzSSxLQUFBLFNBQUFTLEdBQ0E4QixFQUFBcUcsYUFBQW5JLElBSUEsUUFBQXFILEtBQ0FyQyxFQUFBQyxnQkFDQTFGLEtBQUEsU0FBQVMsR0FDQThCLEVBQUFvRCxPQUFBNEMsSUFBQTlILElBSUEsUUFBQXNILEtBQ0FiLEVBQUFhLFVBQ0EvSCxLQUFBLFNBQUFTLEdBQ0E4QixFQUFBc0csS0FBQXBJLElBSUEsUUFBQXFJLEdBQUFDLEdBQ0EsR0FBQUMsR0FBQXpHLEVBQUFzRyxLQUFBTCxPQUFBLFNBQUFDLEdBQ0EsTUFBQUEsR0FBQXZGLE9BQUE2RixHQUdBN0IsR0FBQTRCLFFBQUFFLEVBQUEsR0FBQTlFLElBQ0FsRSxLQUFBLFNBQUFTLEdBQ0E4QixFQUFBMEcsS0FBQXhJLElBSUEsUUFBQXVILEtBQ0FkLEVBQUFjLGNBQ0FoSSxLQUFBLFNBQUFTLEdBQ0E4QixFQUFBK0YsU0FBQUMsSUFBQTlILElBSUEsUUFBQStOLEdBQUFDLEVBQUFILEdBRUEsS0FBQUcsRUFBQUMsUUFDQUQsRUFBQUUsaUJBQ0FOLEVBQUFDLEVBQUFHLEVBQUFHLE9BQUFyRixPQUNBa0YsRUFBQUcsT0FBQXJGLE1BQUEsSUFJQSxRQUFBTCxHQUFBUixFQUFBUyxHQUNBLEdBQUFqRixHQUFBaUYsRUFBQWpGLEdBQ0FrRixFQUFBVixFQUFBVyxRQUFBbkYsRUFDQSxNQUFBa0YsR0FDQVYsRUFBQVksT0FBQUYsRUFBQSxHQUNBRCxFQUFBVCxVQUFBLElBRUFTLEVBQUFULFVBQUEsRUFDQUEsRUFBQWpGLEtBQUFTLElBSUEsUUFBQWtELEdBQUFwQyxHQUNBLEdBQUFxQyxHQUFBckMsRUFBQTlCLElBQ0EvRCxTQUFBb0UsUUFBQXlCLEVBQUFzQyxNQUFBLFNBQUFDLEdBQ0FKLEVBQUFDLFFBQ0FuRixJQUFBLGVBQ0F4QixNQUFBK0csV0FBQUQsS0FFQXZILEtBQUEsU0FBQU8sR0FDQWdDLEVBQUFpQixPQUFBOEQsTUFBQUQsR0FBQTVELEtBQUFsRCxFQUFBRSxLQUFBeUQsSUFDQUosUUFBQUMsSUFBQXhCLEVBQUFpQixPQUFBOEQsUUFDQSxTQUFBL0csR0FDQXVELFFBQUFDLElBQUEsaUJBQUF4RCxFQUFBa0gsWUF4TUF6QixFQUFBb0IsT0FBQUEsQ0FFQSxJQUFBN0UsR0FBQUUsS0FDQStHLEdBQ0EsdUJBQ0EsOEJBQ0EscUJBQ0EsZUFDQSx3QkFDQSxtQkFDQSxpQkFDQSx5QkFHQSxpQkFDQSxpQkFDQSx1QkFHQXFGLElBRUEzTCxLQUFBLE1BQ0E0TCxVQUFBLHdDQUdBNUwsS0FBQSxLQUNBNEwsVUFBQSw0QkFHQTVMLEtBQUEsS0FDQTRMLFVBQUEsc0JBR0E1TCxLQUFBLEtBQ0E0TCxVQUFBLGtDQUdBNUwsS0FBQSxLQUNBNEwsVUFBQSwyQkFHQWxOLEdBQ0EyRyxJQUFBN0csRUFBQUUsWUFDQThHLFlBQ0FnQixVQUFBLFFBRUEvRCxHQUNBNEMsT0FDQUcsVUFDQVAsS0FBQSxHQUNBd0IsY0FBQSxHQUVBRCxVQUFBLE9BSUFuSCxHQUFBOEwsZ0JBQUFBLEVBQ0E5TCxFQUFBcUcsZ0JBQ0FyRyxFQUFBc00sY0FBQUEsRUFDQXRNLEVBQUEyRixlQUFBQSxFQUNBM0YsRUFBQW9ELE9BQUFBLEVBQ0FwRCxFQUFBcUgsVUFBQS9JLE9BQ0EwQixFQUFBc0gsUUFBQWhKLE9BQ0EwQixFQUFBMEcsUUFDQTFHLEVBQUFzRyxRQUNBdEcsRUFBQWlILE1BQUFBLEVBQ0FqSCxFQUFBaU0sYUFBQUEsRUFDQWpNLEVBQUErRixVQUFBQyxPQUFBRyxTQUFBLElBQ0FuRyxFQUFBdUcsUUFBQUEsRUFDQXZHLEVBQUFYLFVBQUFBLEVBQ0FXLEVBQUFpQixRQUNBa0UsS0FBQTdHLE9BQ0FlLFVBQUFBLEVBQUE4RyxTQUNBcEIsT0FDQXlILFFBQ0FDLFVBQ0FDLFVBQ0FDLGFBRUE5RyxTQUNBMkIsU0FDQUMsU0FDQUMsZUFFQTFILEVBQUEyRyxZQUFBQSxFQUVBMUcsSUE3RkFyRCxRQUNBQyxPQUFBLGNBQ0FzRCxXQUFBLG1CQUFBc0wsR0FFQUEsRUFBQWhOLFNBQUEsU0FBQSxTQUFBLFdBQUEsYUFBQSxTQUFBLFdBQUEsYUNQQSxXQUNBLFlBTUEsU0FBQW1PLEdBQUFuSixFQUFBaUIsRUFBQXZGLEVBQUF3RixFQUFBQyxFQUFBdkIsR0FDQSxVQTBGQSxTQUFBcEQsS0FDQTRNLElBQ0FySCxJQUNBRixJQXNCQSxRQUFBSyxLQU1BM0YsRUFBQWlCLE9BQUEyRSxLQUFBLG1CQUNBckUsUUFBQUMsSUFBQSxVQUFBNUMsS0FBQUssVUFBQWUsRUFBQWlCLFNBT0EwRCxFQUFBZ0IsZUFBQTNGLEVBQUFpQixRQUdBLFFBQUFxRSxLQUNBWixFQUFBMEIsY0FDQTNJLEtBQUEsU0FBQVMsR0FDQThCLEVBQUFxRyxhQUFBbkksSUFJQSxRQUFBMk8sS0FDQXhKLEVBQUE1QixPQUFBcUwsU0FBQSxhQUFBLFNBQUE1TyxHQUNBOEIsRUFBQStNLFFBQUEvRyxJQUFBOUgsSUFPQSxRQUFBc0gsS0FDQWIsRUFBQWEsVUFDQS9ILEtBQUEsU0FBQVMsR0FDQThCLEVBQUFzRyxLQUFBcEksSUFJQSxRQUFBcUksR0FBQUMsR0FDQSxHQUFBQyxHQUFBekcsRUFBQXNHLEtBQUFMLE9BQUEsU0FBQUMsR0FDQSxNQUFBQSxHQUFBdkYsT0FBQTZGLEdBR0E3QixHQUFBNEIsUUFBQUUsRUFBQSxHQUFBOUUsSUFDQWxFLEtBQUEsU0FBQVMsR0FDQThCLEVBQUEwRyxLQUFBeEksSUFvQkEsUUFBQXlJLEdBQUFSLEVBQUFTLEdBQ0EsR0FBQWpGLEdBQUFpRixFQUFBakYsR0FDQWtGLEVBQUFWLEVBQUFXLFFBQUFuRixFQUNBLE1BQUFrRixHQUNBVixFQUFBWSxPQUFBRixFQUFBLEdBQ0FELEVBQUFULFVBQUEsSUFFQVMsRUFBQVQsVUFBQSxFQUNBQSxFQUFBakYsS0FBQVMsSUFJQSxRQUFBa0QsR0FBQXBDLEdBQ0EsR0FBQXFDLEdBQUFyQyxFQUFBOUIsSUFDQS9ELFNBQUFvRSxRQUFBeUIsRUFBQXNDLE1BQUEsU0FBQUMsR0FDQUosRUFBQUMsUUFDQW5GLElBQUEsZUFDQXhCLE1BQUErRyxXQUFBRCxLQUVBdkgsS0FBQSxTQUFBTyxHQUNBZ0MsRUFBQWlCLE9BQUE4RCxNQUFBRCxHQUFBNUQsS0FBQWxELEVBQUFFLEtBQUF5RCxJQUNBSixRQUFBQyxJQUFBeEIsRUFBQWlCLE9BQUE4RCxRQUNBLFNBQUEvRyxHQUNBdUQsUUFBQUMsSUFBQSxpQkFBQXhELEVBQUFrSCxZQTNNQXpCLEVBQUFvQixPQUFBQSxDQUVBLElBQUE3RSxHQUFBRSxLQUNBK0csR0FDQSxvQ0FDQSx3Q0FDQSxrQ0FFQSxrQ0FpQkE4RixJQUpBL0csSUFBQTdHLEVBQUFFLFlBQ0E4RyxZQUNBZ0IsVUFBQSxTQUdBbkIsU0FPQWdILEdBQ0Esa0JBQ0Esb0JBQ0EsYUFLQWhOLEdBQUFxRyxnQkFFQXJHLEVBQUFnTixrQkFBQUEsRUFDQWhOLEVBQUEyRixlQUFBQSxFQUNBM0YsRUFBQStNLFFBQUFBLEVBR0EvTSxFQUFBMEcsUUFDQTFHLEVBQUFzRyxRQUNBdEcsRUFBQWlILE1BQUFBLEVBR0FqSCxFQUFBdUcsUUFBQUEsRUFFQXZHLEVBQUFpQixRQUNBa0UsUUFDQXVHLE1BQ0F1QixtQkFBQSxnZUFPQUMsWUFBQSx3REFDQUMsY0FBQSxxTEFrQkFuTixFQUFBMkcsWUFBQUEsRUFFQTFHLEl0QncwQ0kyTSxFQUEwQm5PLFNBQVcsU0FBVSxXQUFZLGFBQWMsV0FBWSxTQUFVLGNzQnI2Q25HN0IsUUFDQUMsT0FBQSxjQUNBc0QsV0FBQSw0QkFBQXlNIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5hdXRoZW50aWNhdGlvbicsIFtdKTtcblxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLmNvb2tpZXMnLCBbJ25nQ29va2llcyddKTtcblxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLmRlcGFydG1lbnQnLCBbJ25nUmVzb3VyY2UnXSk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAubG9naW4nLCBbJ25nTWVzc2FnZXMnLCAndWkucm91dGVyJ10pO1xufSkoKTtcblxuIiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAubWFpbicsIFsndWkucm91dGVyJ10pO1xufSkoKTtcblxuIiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAnLCBbXG4gICAgICAgICdhcHAuY29uZmlnJyxcbiAgICAgICAgJ2FwcC5hdXRoZW50aWNhdGlvbicsXG4gICAgICAgICdhcHAuZGVwYXJ0bWVudCcsXG4gICAgICAgICdhcHAuc2VydmVyZGF0YScsXG4gICAgICAgICdhcHAuZW5naW5lLnNlcnZpY2UnLFxuICAgICAgICAnYXBwLm1haW4nLFxuICAgICAgICAnYXBwLmRhdGVwaWNrZXInLFxuICAgICAgICAnYXBwLmxvZ2luJyxcbiAgICAgICAgJ2FwcC5yZWdpc3RlcicsXG4gICAgICAgICdhcHAuY29va2llcycsXG4gICAgICAgICdhcHAudXNlcmRhdGEuc2VydmljZScsXG4gICAgICAgICdhcHAudXNlcmRhdGEuY29udHJvbGxlcicsXG4gICAgICAgICdhcHAudG9vbGJhcicsXG4gICAgICAgICdhcHAudXBsb2FkJyxcbiAgICAgICAgJ2FwcC51cGxvYWQuc2VydmljZScsXG4gICAgICAgICdhcHAucGFzc3BvcnQnLFxuICAgICAgICAnYXBwLnBhc3Nwb3J0LnNlcnZpY2UnLFxuICAgICAgICAnYXBwLnJlcG9ydCcsXG4gICAgXSk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAucmVnaXN0ZXInLCBbXSk7XG59KSgpO1xuXG4iLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5jb25maWcnLCBbXG4gICAgICAgICd1aS5yb3V0ZXInLFxuICAgICAgICAnbmdSZXNvdXJjZSdcbiAgICBdKTtcbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC50b29sYmFyJywgW10pO1xufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ2FwcC5lbmdpbmUuc2VydmljZScsIFtdKTtcbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5zZXJ2ZXJkYXRhJywgWyduZ1Jlc291cmNlJ10pO1xufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLnBhc3Nwb3J0JywgWyduZ01lc3NhZ2VzJywgJ25nQW5pbWF0ZSddKTtcbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5wYXNzcG9ydC5zZXJ2aWNlJywgW10pO1xufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLnVwbG9hZCcsIFsnbmdGaWxlVXBsb2FkJ10pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAudXBsb2FkLnNlcnZpY2UnLCBbXSk7XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5kYXRlcGlja2VyJywgWyd1aS5ib290c3RyYXAnXSk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAudXNlcmRhdGEuY29udHJvbGxlcicsIFtdKTtcbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC51c2VyZGF0YS5zZXJ2aWNlJywgW10pO1xufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLnJlcG9ydCcsIFsnbmdNZXNzYWdlcycsICduZ0FuaW1hdGUnXSk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnYXBwLmF1dGhlbnRpY2F0aW9uJylcbiAgICAgICAgLmZhY3RvcnkoJ0F1dGhlbnRpY2F0aW9uJywgQXV0aGVudGljYXRpb24pO1xuXG4gICAgQXV0aGVudGljYXRpb24uJGluamVjdCA9IFsnJGh0dHAnLCAnQ29va2llcycsICckcm9vdFNjb3BlJywgJyRzdGF0ZSddO1xuXG4gICAgZnVuY3Rpb24gQXV0aGVudGljYXRpb24oJGh0dHAsIENvb2tpZXMsICRyb290U2NvcGUsICRzdGF0ZSkge1xuICAgICAgICB2YXIgYXV0aGVudGljYXRpb24gPSB7XG4gICAgICAgICAgICBpc0F1dGhlbnRpY2F0ZWQ6IGlzQXV0aGVudGljYXRlZCxcbiAgICAgICAgICAgIGxvZ2luOiBsb2dpbixcbiAgICAgICAgICAgIGxvZ291dDogbG9nb3V0LFxuICAgICAgICAgICAgcmVnaXN0ZXI6IHJlZ2lzdGVyXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIGF1dGhlbnRpY2F0aW9uO1xuXG4gICAgICAgIGZ1bmN0aW9uIGlzQXV0aGVudGljYXRlZCgpIHtcbiAgICAgICAgICAgIHJldHVybiBDb29raWVzLmlzU2V0KCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBsb2dpbihlbWFpbCwgcGFzc3dvcmQpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL2xvZ2luLycsIHtcbiAgICAgICAgICAgICAgICBlbWFpbDogZW1haWwsXG4gICAgICAgICAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkXG4gICAgICAgICAgICB9KS50aGVuKGxvZ2luU3VjY2VzcywgbG9naW5GYWlsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGxvZ291dCgpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL2xvZ291dC8nLCB7fSlcbiAgICAgICAgICAgICAgICAudGhlbihsb2dvdXRTdWNjZXNzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHJlZ2lzdGVyKGVtYWlsLCBwYXNzd29yZCwgZGVwYXJ0bWVudF9pZCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvZGVwYXJ0bWVudC8nICsgZGVwYXJ0bWVudF9pZCArICcvdXNlci8nLCB7XG4gICAgICAgICAgICAgICAgZW1haWw6IGVtYWlsLFxuICAgICAgICAgICAgICAgIHBhc3N3b3JkOiBwYXNzd29yZFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBsb2dpblN1Y2Nlc3MocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIENvb2tpZXMuc2V0KHJlc3BvbnNlLmRhdGEpO1xuICAgICAgICAgICAgJHJvb3RTY29wZS4kZW1pdCgnY29ra2llc1NldCcsICcnKTtcbiAgICAgICAgICAgICRzdGF0ZS5nbygnaG9tZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gbG9nb3V0U3VjY2VzcygpIHtcbiAgICAgICAgICAgIENvb2tpZXMucmVtb3ZlKCk7XG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRlbWl0KCdjb2traWVzU2V0JywgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgICRzdGF0ZS5nbygnbG9naW4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGxvZ2luRmFpbCgpIHtcbi8vICAgICAgICAgICAgJG1kRGlhbG9nXG4vLyAgICAgICAgICAgICAgICAuc2hvdyhcbi8vICAgICAgICAgICAgICAgICAgICAkbWREaWFsb2cuYWxlcnQoe1xuLy8gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ9Ce0YjQuNCx0LrQsCcsXG4vLyAgICAgICAgICAgICAgICAgICAgICAgIHRleHRDb250ZW50OiAn0J3QtdCy0LXRgNC90L4g0YPQutCw0LfQsNC9IGVtYWlsL9C/0LDRgNC+0LvRjCcsXG4vLyAgICAgICAgICAgICAgICAgICAgICAgIG9rOiAn0JfQsNC60YDRi9GC0YwnXG4vLyAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgfVxufSkoKTtcblxuIiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnYXBwLmNvb2tpZXMnKVxuICAgICAgICAuZmFjdG9yeSgnQ29va2llcycsIENvb2tpZXMpO1xuXG4gICAgZnVuY3Rpb24gQ29va2llcygkY29va2llcykge1xuICAgICAgICAnbmdJbmplY3QnO1xuICAgICAgICB2YXIgY29va2llTmFtZSA9ICdhdXRoZW50Y2F0ZWRBY2NvdW50JztcbiAgICAgICAgdmFyIGNvb2tpZXMgPSB7XG4gICAgICAgICAgICBnZXQ6IGdldCxcbiAgICAgICAgICAgIGlzU2V0OiBpc1NldCxcbiAgICAgICAgICAgIHNldDogc2V0LFxuICAgICAgICAgICAgcmVtb3ZlOiByZW1vdmVcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gY29va2llcztcblxuICAgICAgICBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKCRjb29raWVzLmdldChjb29raWVOYW1lKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaChlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGlzU2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuICEhJGNvb2tpZXMuZ2V0KGNvb2tpZU5hbWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc2V0KGRhdGEpIHtcbi8vICAgICAgICAgICAgJGxvZy5sb2coJ2Nvb2tpZSB0byBiZSBzZXQgJyArIEpTT04uc3RyaW5naWZ5KGRhdGEpKTtcbiAgICAgICAgICAgICRjb29raWVzLnB1dChjb29raWVOYW1lLCBKU09OLnN0cmluZ2lmeShkYXRhKSk7XG4vLyAgICAgICAgICAgICRsb2cubG9nKCdpbiBjb29raWU6ICcgKyBKU09OLnN0cmluZ2lmeShjb29raWVzLmdldCgpKSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiByZW1vdmUoKSB7XG4vLyAgICAgICAgICAgIGNvbnNvbGUubG9nKCdiZWZvcmUgZGVsZXRlICcgKyBKU09OLnBhcnNlKCRjb29raWVzLmdldChjb29raWVOYW1lKSkpO1xuICAgICAgICAgICAgJGNvb2tpZXMucmVtb3ZlKGNvb2tpZU5hbWUpO1xuLy8gICAgICAgICAgICBjb25zb2xlLmxvZygnYWZ0ZXIgZGVsZXRlICcgKyAkY29va2llcy5nZXQoY29va2llTmFtZSkpO1xuICAgICAgICB9XG4gICAgfVxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLmF1dGhlbnRpY2F0aW9uJywgW10pO1xuXG59KSgpO1xuXG4oZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5jb29raWVzJywgWyduZ0Nvb2tpZXMnXSk7XG5cbn0pKCk7XG5cbihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLmRlcGFydG1lbnQnLCBbJ25nUmVzb3VyY2UnXSk7XG59KSgpO1xuXG4oZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5sb2dpbicsIFsnbmdNZXNzYWdlcycsICd1aS5yb3V0ZXInXSk7XG59KSgpO1xuXG5cbihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLm1haW4nLCBbJ3VpLnJvdXRlciddKTtcbn0pKCk7XG5cblxuKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAnLCBbXG4gICAgICAgICdhcHAuY29uZmlnJyxcbiAgICAgICAgJ2FwcC5hdXRoZW50aWNhdGlvbicsXG4gICAgICAgICdhcHAuZGVwYXJ0bWVudCcsXG4gICAgICAgICdhcHAuc2VydmVyZGF0YScsXG4gICAgICAgICdhcHAuZW5naW5lLnNlcnZpY2UnLFxuICAgICAgICAnYXBwLm1haW4nLFxuICAgICAgICAnYXBwLmRhdGVwaWNrZXInLFxuICAgICAgICAnYXBwLmxvZ2luJyxcbiAgICAgICAgJ2FwcC5yZWdpc3RlcicsXG4gICAgICAgICdhcHAuY29va2llcycsXG4gICAgICAgICdhcHAudXNlcmRhdGEuc2VydmljZScsXG4gICAgICAgICdhcHAudXNlcmRhdGEuY29udHJvbGxlcicsXG4gICAgICAgICdhcHAudG9vbGJhcicsXG4gICAgICAgICdhcHAudXBsb2FkJyxcbiAgICAgICAgJ2FwcC51cGxvYWQuc2VydmljZScsXG4gICAgICAgICdhcHAucGFzc3BvcnQnLFxuICAgICAgICAnYXBwLnBhc3Nwb3J0LnNlcnZpY2UnLFxuICAgICAgICAnYXBwLnJlcG9ydCcsXG4gICAgXSk7XG59KSgpO1xuXG4oZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5yZWdpc3RlcicsIFtdKTtcbn0pKCk7XG5cblxuKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAuY29uZmlnJywgW1xuICAgICAgICAndWkucm91dGVyJyxcbiAgICAgICAgJ25nUmVzb3VyY2UnXG4gICAgXSk7XG59KSgpO1xuXG4oZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC50b29sYmFyJywgW10pO1xufSkoKTtcblxuKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnYXBwLmVuZ2luZS5zZXJ2aWNlJywgW10pO1xufSkoKTtcblxuKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAuc2VydmVyZGF0YScsIFsnbmdSZXNvdXJjZSddKTtcbn0pKCk7XG5cbihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLnBhc3Nwb3J0JywgWyduZ01lc3NhZ2VzJywgJ25nQW5pbWF0ZSddKTtcbn0pKCk7XG5cbihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLnBhc3Nwb3J0LnNlcnZpY2UnLCBbXSk7XG59KSgpO1xuXG4oZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC51cGxvYWQnLCBbJ25nRmlsZVVwbG9hZCddKTtcblxufSkoKTtcblxuKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAudXBsb2FkLnNlcnZpY2UnLCBbXSk7XG5cbn0pKCk7XG5cbihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLmRhdGVwaWNrZXInLCBbJ3VpLmJvb3RzdHJhcCddKTtcbn0pKCk7XG5cbihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLnVzZXJkYXRhLmNvbnRyb2xsZXInLCBbXSk7XG59KSgpO1xuXG4oZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC51c2VyZGF0YS5zZXJ2aWNlJywgW10pO1xufSkoKTtcblxuKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAucmVwb3J0JywgWyduZ01lc3NhZ2VzJywgJ25nQW5pbWF0ZSddKTtcbn0pKCk7XG5cbihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ2FwcC5hdXRoZW50aWNhdGlvbicpXG4gICAgICAgIC5mYWN0b3J5KCdBdXRoZW50aWNhdGlvbicsIEF1dGhlbnRpY2F0aW9uKTtcblxuICAgIEF1dGhlbnRpY2F0aW9uLiRpbmplY3QgPSBbJyRodHRwJywgJ0Nvb2tpZXMnLCAnJHJvb3RTY29wZScsICckc3RhdGUnXTtcblxuICAgIGZ1bmN0aW9uIEF1dGhlbnRpY2F0aW9uKCRodHRwLCBDb29raWVzLCAkcm9vdFNjb3BlLCAkc3RhdGUpIHtcbiAgICAgICAgdmFyIGF1dGhlbnRpY2F0aW9uID0ge1xuICAgICAgICAgICAgaXNBdXRoZW50aWNhdGVkOiBpc0F1dGhlbnRpY2F0ZWQsXG4gICAgICAgICAgICBsb2dpbjogbG9naW4sXG4gICAgICAgICAgICBsb2dvdXQ6IGxvZ291dCxcbiAgICAgICAgICAgIHJlZ2lzdGVyOiByZWdpc3RlclxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBhdXRoZW50aWNhdGlvbjtcblxuICAgICAgICBmdW5jdGlvbiBpc0F1dGhlbnRpY2F0ZWQoKSB7XG4gICAgICAgICAgICByZXR1cm4gQ29va2llcy5pc1NldCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gbG9naW4oZW1haWwsIHBhc3N3b3JkKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9sb2dpbi8nLCB7XG4gICAgICAgICAgICAgICAgZW1haWw6IGVtYWlsLFxuICAgICAgICAgICAgICAgIHBhc3N3b3JkOiBwYXNzd29yZFxuICAgICAgICAgICAgfSkudGhlbihsb2dpblN1Y2Nlc3MsIGxvZ2luRmFpbCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBsb2dvdXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9sb2dvdXQvJywge30pXG4gICAgICAgICAgICAgICAgLnRoZW4obG9nb3V0U3VjY2Vzcyk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiByZWdpc3RlcihlbWFpbCwgcGFzc3dvcmQsIGRlcGFydG1lbnRfaWQpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL2RlcGFydG1lbnQvJyArIGRlcGFydG1lbnRfaWQgKyAnL3VzZXIvJywge1xuICAgICAgICAgICAgICAgIGVtYWlsOiBlbWFpbCxcbiAgICAgICAgICAgICAgICBwYXNzd29yZDogcGFzc3dvcmRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gbG9naW5TdWNjZXNzKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICBDb29raWVzLnNldChyZXNwb25zZS5kYXRhKTtcbiAgICAgICAgICAgICRyb290U2NvcGUuJGVtaXQoJ2Nva2tpZXNTZXQnLCAnJyk7XG4gICAgICAgICAgICAkc3RhdGUuZ28oJ2hvbWUnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGxvZ291dFN1Y2Nlc3MoKSB7XG4gICAgICAgICAgICBDb29raWVzLnJlbW92ZSgpO1xuICAgICAgICAgICAgJHJvb3RTY29wZS4kZW1pdCgnY29ra2llc1NldCcsIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAkc3RhdGUuZ28oJ2xvZ2luJyk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBsb2dpbkZhaWwoKSB7XG4vLyAgICAgICAgICAgICRtZERpYWxvZ1xuLy8gICAgICAgICAgICAgICAgLnNob3coXG4vLyAgICAgICAgICAgICAgICAgICAgJG1kRGlhbG9nLmFsZXJ0KHtcbi8vICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICfQntGI0LjQsdC60LAnLFxuLy8gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0Q29udGVudDogJ9Cd0LXQstC10YDQvdC+INGD0LrQsNC30LDQvSBlbWFpbC/Qv9Cw0YDQvtC70YwnLFxuLy8gICAgICAgICAgICAgICAgICAgICAgICBvazogJ9CX0LDQutGA0YvRgtGMJ1xuLy8gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgIH1cbn0pKCk7XG5cblxuKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIENvb2tpZXMuJGluamVjdCA9IFtcIiRjb29raWVzXCJdO1xuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnYXBwLmNvb2tpZXMnKVxuICAgICAgICAuZmFjdG9yeSgnQ29va2llcycsIENvb2tpZXMpO1xuXG4gICAgZnVuY3Rpb24gQ29va2llcygkY29va2llcykge1xuICAgICAgICAnbmdJbmplY3QnO1xuICAgICAgICB2YXIgY29va2llTmFtZSA9ICdhdXRoZW50Y2F0ZWRBY2NvdW50JztcbiAgICAgICAgdmFyIGNvb2tpZXMgPSB7XG4gICAgICAgICAgICBnZXQ6IGdldCxcbiAgICAgICAgICAgIGlzU2V0OiBpc1NldCxcbiAgICAgICAgICAgIHNldDogc2V0LFxuICAgICAgICAgICAgcmVtb3ZlOiByZW1vdmVcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gY29va2llcztcblxuICAgICAgICBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKCRjb29raWVzLmdldChjb29raWVOYW1lKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaChlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGlzU2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuICEhJGNvb2tpZXMuZ2V0KGNvb2tpZU5hbWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc2V0KGRhdGEpIHtcbi8vICAgICAgICAgICAgJGxvZy5sb2coJ2Nvb2tpZSB0byBiZSBzZXQgJyArIEpTT04uc3RyaW5naWZ5KGRhdGEpKTtcbiAgICAgICAgICAgICRjb29raWVzLnB1dChjb29raWVOYW1lLCBKU09OLnN0cmluZ2lmeShkYXRhKSk7XG4vLyAgICAgICAgICAgICRsb2cubG9nKCdpbiBjb29raWU6ICcgKyBKU09OLnN0cmluZ2lmeShjb29raWVzLmdldCgpKSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiByZW1vdmUoKSB7XG4vLyAgICAgICAgICAgIGNvbnNvbGUubG9nKCdiZWZvcmUgZGVsZXRlICcgKyBKU09OLnBhcnNlKCRjb29raWVzLmdldChjb29raWVOYW1lKSkpO1xuICAgICAgICAgICAgJGNvb2tpZXMucmVtb3ZlKGNvb2tpZU5hbWUpO1xuLy8gICAgICAgICAgICBjb25zb2xlLmxvZygnYWZ0ZXIgZGVsZXRlICcgKyAkY29va2llcy5nZXQoY29va2llTmFtZSkpO1xuICAgICAgICB9XG4gICAgfVxufSkoKTtcblxuKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnYXBwLmRlcGFydG1lbnQnKVxuICAgICAgICAuZmFjdG9yeSgnRGVwYXJ0bWVudCcsIERlcGFydG1lbnQpO1xuXG4gICAgRGVwYXJ0bWVudC4kaW5qZWN0ID0gWyckcmVzb3VyY2UnXTtcblxuICAgIGZ1bmN0aW9uIERlcGFydG1lbnQoJHJlc291cmNlKSB7XG4gICAgICAgIHJldHVybiAkcmVzb3VyY2UoJy9hcGkvZGVwYXJ0bWVudC86ZGVwSWQvJywge30sIHtcbiAgICAgICAgICAgIG1lYXN1cmVyczoge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ2dldCcsXG4gICAgICAgICAgICAgICAgaXNBcnJheTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHtkZXBJZDogMX0sXG4gICAgICAgICAgICAgICAgdXJsOiAnL2FwaS9kZXBhcnRtZW50LzpkZXBJZC9tZWFzdXJlci8nXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn0pKCk7XG5cbihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgICAgIC5ydW4oWyckaHR0cCcsXG4gICAgICAgICAgICBmdW5jdGlvbigkaHR0cCkge1xuICAgICAgICAgICAgICAgICRodHRwLmRlZmF1bHRzLnhzcmZIZWFkZXJOYW1lID0gJ1gtQ1NSRlRva2VuJztcbiAgICAgICAgICAgICAgICAkaHR0cC5kZWZhdWx0cy54c3JmQ29va2llTmFtZSA9ICdjc3JmdG9rZW4nO1xuICAgICAgICB9XSk7XG5cbn0pKCk7XG5cbihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBMb2dpbkNvbnRyb2xsZXIuJGluamVjdCA9IFtcIkF1dGhlbnRpY2F0aW9uXCJdO1xuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnYXBwLmxvZ2luJylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0xvZ2luQ29udHJvbGxlcicsIExvZ2luQ29udHJvbGxlcik7XG5cbiAgICBmdW5jdGlvbiBMb2dpbkNvbnRyb2xsZXIoQXV0aGVudGljYXRpb24pIHtcbiAgICAgICAgJ25nSW5qZWN0JztcbiAgICAgICAgdmFyIHZtID0gdGhpcztcblxuICAgICAgICB2bS5sb2dpbiA9IGxvZ2luO1xuXG4gICAgICAgIGFjdGl2YXRlKCk7XG5cbiAgICAgICAgZnVuY3Rpb24gbG9naW4oKSB7XG4gICAgICAgICAgICBBdXRoZW50aWNhdGlvbi5sb2dpbih2bS5lbWFpbCwgdm0ucGFzc3dvcmQpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICAgICAgICBpZiAoQXV0aGVudGljYXRpb24uaXNBdXRoZW50aWNhdGVkKCkpIHtcbiAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ2hvbWUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn0pKCk7XG5cblxuKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnYXBwLm1haW4nKVxuICAgICAgICAuY29udHJvbGxlcignTWFpbkNvbnRyb2xsZXInLCBNYWluQ29udHJvbGxlcik7XG5cbiAgICBNYWluQ29udHJvbGxlci4kaW5qZWN0ID0gWydBdXRoZW50aWNhdGlvbicsICckbG9jYXRpb24nLCAnQ29va2llcycsICckcm9vdFNjb3BlJ107XG5cbiAgICBmdW5jdGlvbiBNYWluQ29udHJvbGxlcihBdXRoZW50aWNhdGlvbiwgJGxvY2F0aW9uLCBDb29raWVzLCAkcm9vdFNjb3BlKSB7XG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG4gICAgICAgIHZtLm1lbnUgPSBbXTtcblxuICAgICAgICBhY3RpdmF0ZSgpO1xuXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgICAgICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICAgICAgICBpZiAoIUF1dGhlbnRpY2F0aW9uLmlzQXV0aGVudGljYXRlZCgpKSB7XG4gICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy9sb2dpbicpO1xuICAgICAgICAgICAgfSBcblxuICAgICAgICAgICAgJHJvb3RTY29wZS4kb24oJ2Nva2tpZXNTZXQnLCBmdW5jdGlvbihldmVudCwgZGF0YSkge1xuICAgICAgICAgICAgICAgIGlmIChkYXRhID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdm0ubWVudSA9IFtdO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNldHVwTWVudSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBzZXR1cE1lbnUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNldHVwTWVudSgpIHtcbiAgICAgICAgICAgICAgICB2bS5tZW51ID0gW3tuYW1lOiAn0J/RgNC+0YTQuNC70YwnLCBsaW5rOiAn0J/RgNC+0YTQuNC70YwnLCByZWY6ICdwcm9maWxlJ31dO1xuXG4gICAgICAgICAgICAgICAgdmFyIGNvb2tpZXMgPSBDb29raWVzLmdldCgpO1xuICAgICAgICAgICAgICAgIGlmIChjb29raWVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlcG9ydF90eXBlcyA9IGNvb2tpZXMuZGVwYXJ0bWVudC5yZXBvcnRfdHlwZXM7XG4gICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChyZXBvcnRfdHlwZXMsIGZ1bmN0aW9uKHJlcG9ydCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdm0ubWVudS5wdXNoKHtuYW1lOiByZXBvcnQubmFtZSwgbGluazogcmVwb3J0Lm5hbWUsIHJlZjogcmVwb3J0LnVybH0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB2bS5pc0F1dGhlbnRpY2F0ZWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBBdXRoZW50aWNhdGlvbi5pc0F1dGhlbnRpY2F0ZWQoKTtcbiAgICAgICAgfTtcbiAgICB9XG59KSgpO1xuXG4oZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCdhcHAucmVnaXN0ZXInKVxuICAgICAgICAuY29udHJvbGxlcignUmVnaXN0ZXJDb250cm9sbGVyJywgUmVnaXN0ZXJDb250cm9sbGVyKTtcblxuICAgIFJlZ2lzdGVyQ29udHJvbGxlci4kaW5qZWN0ID0gWydBdXRoZW50aWNhdGlvbicsICdEZXBhcnRtZW50J107XG5cbiAgICBmdW5jdGlvbiBSZWdpc3RlckNvbnRyb2xsZXIoQXV0aGVudGljYXRpb24sIERlcGFydG1lbnQpIHtcbiAgICAgICAgdmFyIHZtID0gdGhpcztcblxuICAgICAgICB2bS5sb2FkRGVwYXJ0bWVudHMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIERlcGFydG1lbnQucXVlcnkoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgIHZtLmFsbERlcHMgPSBkYXRhO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdm0ucmVnaXN0ZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIEF1dGhlbnRpY2F0aW9uLnJlZ2lzdGVyKHZtLmVtYWlsLCB2bS5wYXNzd29yZCwgdm0uZGVwYXJ0bWVudC5pZClcbiAgICAgICAgICAgICAgICAudGhlbihyZWdpc3RlclN1Y2Nlc3MsIHJlZ2lzdGVyRmFpbCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgYWN0aXZhdGUoKTtcblxuICAgICAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgICAgICAgIHZtLmxvYWREZXBhcnRtZW50cygpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gcmVnaXN0ZXJTdWNjZXNzKCkge1xuICAgICAgICAgICAgQXV0aGVudGljYXRpb24ubG9naW4odm0uZW1haWwsIHZtLnBhc3N3b3JkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHJlZ2lzdGVyRmFpbCgpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdSZWdpc3RyYXRpb24gZmFpbGVkJyk7XG4gICAgICAgIH1cbiAgICB9XG59KSgpO1xuXG5cbihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ2FwcC5jb25maWcnKVxuICAgICAgICAuY29uZmlnKGNvbmZpZylcbiAgICAgICAgLnJ1bihydW4pO1xuXG4gICAgY29uZmlnLiRpbmplY3QgPSBbXG4gICAgICAgICckc3RhdGVQcm92aWRlcicsXG4gICAgICAgICckdXJsUm91dGVyUHJvdmlkZXInLFxuICAgICAgICAnJHJlc291cmNlUHJvdmlkZXInLFxuICAgICAgICAnJGxvY2F0aW9uUHJvdmlkZXInXG4gICAgXTtcblxuICAgIGZ1bmN0aW9uIGNvbmZpZygkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyLCAkcmVzb3VyY2VQcm92aWRlciwgJGxvY2F0aW9uUHJvdmlkZXIpIHtcbiAgICAgICAgJHN0YXRlUHJvdmlkZXJcbiAgICAgICAgICAgIC5zdGF0ZSgnaG9tZScsIHtcbiAgICAgICAgICAgICAgICB1cmw6ICcvJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5zdGF0ZSgnbG9naW4nLCB7XG4gICAgICAgICAgICAgICAgdXJsOiAnL2xvZ2luJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnTG9naW5Db250cm9sbGVyJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvc3RhdGljL3NyYy9hcHAvdXNlci9sb2dpbi50cGwuaHRtbCdcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuc3RhdGUoJ3JlZ2lzdGVyJywge1xuICAgICAgICAgICAgICAgIHVybDogJy9yZWdpc3RlcicsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ1JlZ2lzdGVyQ29udHJvbGxlcicsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3N0YXRpYy9zcmMvYXBwL3VzZXIvcmVnaXN0ZXIudHBsLmh0bWwnXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnN0YXRlKCdwcm9maWxlJywge1xuICAgICAgICAgICAgICAgIHVybDogJy9wcm9maWxlJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnVXNlckRhdGFDb250cm9sbGVyJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvc3RhdGljL3NyYy9hcHAvdXNlci9wcm9maWxlLnRwbC5odG1sJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5zdGF0ZSgndXBsb2FkJywge1xuICAgICAgICAgICAgICAgIHVybDogJy91cGxvYWQnLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdVcGxvYWRDb250cm9sbGVyJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvc3RhdGljL3NyYy9hcHAvZmlsZXN0b3JhZ2UvdXBsb2FkLnRwbC5odG1sJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5zdGF0ZSgncGFzc3BvcnQnLCB7XG4gICAgICAgICAgICAgICAgdXJsOiAnL3Bhc3Nwb3J0JyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnUGFzc3BvcnRDb250cm9sbGVyJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvc3RhdGljL3NyYy9hcHAvcmVwb3J0L3Bhc3Nwb3J0LnRwbC5odG1sJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5zdGF0ZSgncmVwb3J0Jywge1xuICAgICAgICAgICAgICAgIHVybDogJy9yZXBvcnQnLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdSZXBvcnRDb250cm9sbGVyJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvc3RhdGljL3NyYy9hcHAvcmVwb3J0L3JlcG9ydC9yZXBvcnQudHBsLmh0bWwnXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnN0YXRlKCdyZXBvcnQtY29udGFpbmVyJywge1xuICAgICAgICAgICAgICAgIHVybDogJy9yZXBvcnQtY29udGFpbmVyJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnUmVwb3J0Q29udGFpbmVyQ29udHJvbGxlcicsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3N0YXRpYy9zcmMvYXBwL3JlcG9ydC9yZXBvcnRfY29udGFpbmVyL3JlcG9ydC50cGwuaHRtbCdcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJy9sb2dpbicpO1xuXG4gICAgICAgICRyZXNvdXJjZVByb3ZpZGVyLmRlZmF1bHRzLnN0cmlwVHJhaWxpbmdTbGFzaGVzID0gZmFsc2U7XG5cbiAgICAgICAgJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKHRydWUpO1xuICAgICAgICAkbG9jYXRpb25Qcm92aWRlci5oYXNoUHJlZml4KCchJyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcnVuKCkge1xuICAgICAgICB2YXIgZG9jID0gYW5ndWxhci5lbGVtZW50KGRvY3VtZW50KTtcbiAgICAgICAgZG9jLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIG5hdmJhciA9IGRvYy5maW5kKCcubmF2YmFyLWNvbGxhcHNlJyksXG4gICAgICAgICAgICAgICAgb3BlbmVkID0gbmF2YmFyLmhhc0NsYXNzKCdpbicpO1xuICAgICAgICAgICAgaWYgKG9wZW5lZCkge1xuICAgICAgICAgICAgICAgIG5hdmJhci5jb2xsYXBzZSgnaGlkZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59KSgpO1xuXG4oZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCdhcHAudG9vbGJhcicpXG4gICAgICAgIC5jb250cm9sbGVyKCdUb29sYmFyQ29udHJvbGxlcicsIFRvb2xiYXJDb250cm9sbGVyKTtcblxuICAgIFRvb2xiYXJDb250cm9sbGVyLiRpbmplY3QgPSBbJ0F1dGhlbnRpY2F0aW9uJ107XG5cbiAgICBmdW5jdGlvbiBUb29sYmFyQ29udHJvbGxlcihBdXRoZW50aWNhdGlvbikge1xuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuXG4gICAgICAgIHZtLmxvZ291dCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgQXV0aGVudGljYXRpb24ubG9nb3V0KCk7XG4gICAgICAgIH07XG4gICAgfVxufSkoKTtcblxuKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnYXBwLmVuZ2luZS5zZXJ2aWNlJylcbiAgICAgICAgLmZhY3RvcnkoJ0VuZ2luZScsIEVuZ2luZSk7XG5cbiAgICBFbmdpbmUuJGluamVjdCA9IFsnJGh0dHAnXTtcblxuICAgIGZ1bmN0aW9uIEVuZ2luZSgkaHR0cCkge1xuICAgICAgICB2YXIgZW5naW5lID0ge1xuICAgICAgICAgICAgZ2V0QWxsRW5naW5lczogZ2V0QWxsRW5naW5lc1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBlbmdpbmU7XG5cbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0QWxsRW5naW5lcygpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvZW5naW5lLycpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbn0pKCk7XG5cbihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ2FwcC5zZXJ2ZXJkYXRhJylcbiAgICAgICAgLmZhY3RvcnkoJ1NlcnZlckRhdGEnLCBTZXJ2ZXJEYXRhKTtcblxuICAgIFNlcnZlckRhdGEuJGluamVjdCA9IFsnJHJlc291cmNlJ107XG5cbiAgICBmdW5jdGlvbiBTZXJ2ZXJEYXRhKCRyZXNvdXJjZSkge1xuICAgICAgICByZXR1cm4gJHJlc291cmNlKCcvYXBpLzpjYXRlZ29yeS8nKTtcbiAgICB9XG59KSgpO1xuXG4oZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5wYXNzcG9ydCcpXG4gICAgICAgIC5kaXJlY3RpdmUoJ2F1dG9mb2N1cycsIEF1dG9mb2N1c0RpcmVjdGl2ZSk7XG5cbiAgICBBdXRvZm9jdXNEaXJlY3RpdmUuJGluamVjdCA9IFsnJHRpbWVvdXQnXVxuICAgIGZ1bmN0aW9uIEF1dG9mb2N1c0RpcmVjdGl2ZSgkdGltZW91dCkge1xuXHRyZXR1cm4ge1xuXHQgICAgcmVzdHJpY3Q6ICdBJyxcblx0ICAgIGxpbmsgOiBmdW5jdGlvbigkc2NvcGUsICRlbGVtZW50KSB7XG5cdFx0ICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdCAgICAkZWxlbWVudC5mb2N1cygpO1xuXHRcdH0pO1xuXHQgICAgfVxuXHR9XG4gICAgfVxufSkoKTtcblxuXG4oZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5wYXNzcG9ydCcpXG4gICAgICAgIC5kaXJlY3RpdmUoJ2NoZWNrbWFyaycsIENoZWNrbWFya0RpcmVjdGl2ZSk7XG5cbiAgICBmdW5jdGlvbiBDaGVja21hcmtEaXJlY3RpdmUoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXF1aXJlOiAnXmZvcm0nLFxuICAgICAgICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtLCBhdHRycywgZm9ybUNvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAoZm9ybUNvbnRyb2xsZXIuJG5hbWUgPT09ICd2bS5kb2NzRm9ybScpIHtcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuc2hvd0NoZWNrbWFyayA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2NvcGUuJHdhdGNoKGZvcm1Db250cm9sbGVyLiRuYW1lICsgJy4kdmFsaWQnLCBmdW5jdGlvbihuZXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobmV3VmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLnNob3dDaGVja21hcmsgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUuc2hvd0NoZWNrbWFyayA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2NvcGU6IHRydWUsXG4gICAgICAgICAgICB0cmFuc2NsdWRlOiB0cnVlLFxuICAgICAgICAgICAgdGVtcGxhdGU6ICc8c3BhbiBuZy1pZj1cInNob3dDaGVja21hcmtcIj4nICtcbiAgICAgICAgICAgICAgICAnPGkgY2xhc3M9XCJpY29uIGlvbi1jaGVja21hcmtcIiBzdHlsZT1cImNvbG9yOiAjMDBlNjc2XCI+PC9pPiZuYnNwOycgK1xuICAgICAgICAgICAgICAgICc8L3NwYW4+JyArXG4gICAgICAgICAgICAgICAgJzxzcGFuIG5nLXRyYW5zY2x1ZGU+PC9zcGFuPidcbiAgICAgICAgfTtcbiAgICB9XG59KSgpO1xuXG4oZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCdhcHAucGFzc3BvcnQnKVxuICAgICAgICAuY29udHJvbGxlcignUGFzc3BvcnRDb250cm9sbGVyJywgUGFzc3BvcnRDb250cm9sbGVyKTtcblxuICAgIFBhc3Nwb3J0Q29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJHN0YXRlJywgJ1VzZXJEYXRhJywgJ0RlcGFydG1lbnQnLCAnRW5naW5lJywgJ1Bhc3Nwb3J0JywgJ1VwbG9hZCddO1xuICAgIGZ1bmN0aW9uIFBhc3Nwb3J0Q29udHJvbGxlcigkc2NvcGUsICRzdGF0ZSwgVXNlckRhdGEsIERlcGFydG1lbnQsIEVuZ2luZSwgUGFzc3BvcnQsIFVwbG9hZCkge1xuXG4gICAgICAgICRzY29wZS51cGxvYWQgPSB1cGxvYWQ7XG5cbiAgICAgICAgdmFyIHZtID0gdGhpcyxcbiAgICAgICAgICAgIGRvY3MgPSBbXG4gICAgICAgICAgICAgICAge25hbWU6ICfQltGD0YDQvdCw0Lsg0YDQtdC80L7QvdGC0LAg0Y3Qu9C10LrRgtGA0L7QtNCy0LjQs9Cw0YLQtdC70Y8nLCB2YWx1ZTogdHJ1ZX0sXG4gICAgICAgICAgICAgICAge25hbWU6ICfQltGD0YDQvdCw0Lsg0Y3QutGB0L/Qu9GD0LDRgtCw0YbQuNC4INGN0LvQtdC60YLRgNC+0LTQstC40LPQsNGC0LXQu9GPJywgdmFsdWU6IHRydWV9LFxuICAgICAgICAgICAgICAgIHtuYW1lOiAn0JjQvdGB0YLRgNGD0LrRhtC40Y8g0L/QviDRjdC60YHQv9C70YPQsNGC0LDRhtC40Lgg0LfQsNCy0L7QtNCwLdC40LfQs9C+0YLQvtCy0LjRgtC10LvRjycsIHZhbHVlOiB0cnVlfSxcbiAgICAgICAgICAgICAgICB7bmFtZTogJ9Cf0YDQvtGC0L7QutC+0LvRiyDRiNGC0LDRgtC90YvRhSDQuNC30LzQtdGA0LXQvdC40Lkg0Lgg0LjRgdC/0YvRgtCw0L3QuNC5JywgdmFsdWU6IHRydWV9LFxuICAgICAgICAgICAgICAgIHtuYW1lOiAn0J/QsNGB0L/QvtGA0YIg0LfQsNCy0L7QtNCwLdC40LfQs9C+0YLQvtCy0LjRgtC10LvRjyDQvdCwINCy0LfRgNGL0LLQvtC30LDRidC40YnQtdC90L3Ri9C5INGN0LvQtdC60YLRgNC+0LTQstC40LPQsNGC0LXQu9GMJywgdmFsdWU6IHRydWV9LFxuICAgICAgICAgICAgICAgIHtuYW1lOiAn0KHRhdC10LzQsCDRjdC70LXQutGC0YDQvtGB0L3QsNCx0LbQtdC90LjRjyDRjdC70LXQutGC0YDQvtC00LLQuNCz0LDRgtC10LvRjycsIHZhbHVlOiB0cnVlfVxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIHBhZ2VzID0gW1xuICAgICAgICAgICAgICAgICd0ZWFtLnRwbC5odG1sJyxcbiAgICAgICAgICAgICAgICAnbWVhc3VyZXJzLnRwbC5odG1sJyxcbiAgICAgICAgICAgICAgICAnbHB1LnRwbC5odG1sJyxcbiAgICAgICAgICAgICAgICAnZGF0ZXMudHBsLmh0bWwnLFxuICAgICAgICAgICAgICAgICdlbmdpbmVzLnRwbC5odG1sJyxcbiAgICAgICAgICAgICAgICAndmFsdWVzLnRwbC5odG1sJyxcbiAgICAgICAgICAgICAgICAnZG9jcy50cGwuaHRtbCcsXG4gICAgICAgICAgICAgICAgJ3Bob3Rvcy50cGwuaHRtbCcsXG4gICAgICAgICAgICAgICAgJ3RoZXJtLnRwbC5odG1sJyxcbiAgICAgICAgICAgICAgICAndmlicm8udHBsLmh0bWwnLFxuICAgICAgICAgICAgICAgICdyZXNpc3RhbmNlLnRwbC5odG1sJyxcbiAgICAgICAgICAgICAgICAnc2lnbmVycy50cGwuaHRtbCdcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICByYW5rcyA9IFtcbiAgICAgICAgICAgICAgICAn0YDRg9C60L7QstC+0LTQuNGC0LXQu9GMINCx0YDQuNCz0LDQtNGLJyxcbiAgICAgICAgICAgICAgICAn0LfQsNC8LiDRgNGD0LrQvtCy0L7QtNC40YLQtdC70Y8g0LHRgNC40LPQsNC00YsnLFxuICAgICAgICAgICAgICAgICfRh9C70LXQvSDQsdGA0LjQs9Cw0LTRiydcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBtZWFzdXJlcnMgPSB7XG4gICAgICAgICAgICAgICAgYWxsOiBEZXBhcnRtZW50Lm1lYXN1cmVycygpLFxuICAgICAgICAgICAgICAgIHNlbGVjdGVkOiBbXSxcbiAgICAgICAgICAgICAgICBzb3J0T3JkZXI6ICduYW1lJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVuZ2luZSA9IHtcbiAgICAgICAgICAgICAgICBhbGw6IFtdLFxuICAgICAgICAgICAgICAgIHNlbGVjdGVkOiB7XG4gICAgICAgICAgICAgICAgICAgICd0eXBlJzogJycsXG4gICAgICAgICAgICAgICAgICAgICdzZXJpYWxfbnVtYmVyJzogMFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgc29ydE9yZGVyOiAnbmFtZSdcbiAgICAgICAgICAgIH07XG5cblxuICAgICAgICB2bS5hZGRFbXBsb3llZSA9IGFkZEVtcGxveWVlO1xuICAgICAgICB2bS5hbGxFbXBsb3llZXMgPSBbXTtcbiAgICAgICAgdm0uY3JlYXRlUGFzc3BvcnQgPSBjcmVhdGVQYXNzcG9ydDtcbiAgICAgICAgdm0uZW5naW5lID0gZW5naW5lO1xuICAgICAgICB2bS53b3JrQmVnaW4gPSB1bmRlZmluZWQ7XG4gICAgICAgIHZtLndvcmtFbmQgPSB1bmRlZmluZWQ7XG4gICAgICAgIHZtLmludmVzdGlnYXRpb25EYXRlID0gdW5kZWZpbmVkO1xuICAgICAgICB2bS5scHVzID0ge307XG4gICAgICAgIHZtLm9yZ3MgPSB7fTtcbiAgICAgICAgdm0ucGFnZXMgPSBwYWdlcztcbiAgICAgICAgdm0udGNsYXNzZXMgPSB7YWxsOiBbXSwgc2VsZWN0ZWQ6ICcnfTtcbiAgICAgICAgdm0uZ2V0TFBVcyA9IGdldExQVXM7XG4gICAgICAgIHZtLm1lYXN1cmVycyA9IG1lYXN1cmVycztcbiAgICAgICAgdm0ucmFua3MgPSByYW5rcztcbiAgICAgICAgdm0ucmVwb3J0ID0ge1xuICAgICAgICAgICAgdGVhbTogdW5kZWZpbmVkLFxuICAgICAgICAgICAgbWVhc3VyZXJzOiBtZWFzdXJlcnMuc2VsZWN0ZWQsXG4gICAgICAgICAgICBmaWxlczoge30sXG4gICAgICAgICAgICB0aGVybToge30sXG4gICAgICAgICAgICB2aWJybzoge30sXG4gICAgICAgICAgICBvcmRlcjoge30sXG4gICAgICAgICAgICByZXNpc3RhbmNlOiB7fVxuICAgICAgICB9O1xuICAgICAgICB2bS5zZXRTZWxlY3RlZCA9IHNldFNlbGVjdGVkO1xuXG4gICAgICAgIGFjdGl2YXRlKCk7XG5cbiAgICAgICAgZnVuY3Rpb24gdXBsb2FkKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHZhciBmaWVsZG5hbWUgPSBlbGVtZW50Lm5hbWU7XG4gICAgICAgICAgICBhbmd1bGFyLmZvckVhY2goZWxlbWVudC5maWxlcywgZnVuY3Rpb24oZmlsZSkge1xuICAgICAgICAgICAgICAgIFVwbG9hZC51cGxvYWQoe1xuICAgICAgICAgICAgICAgICAgICB1cmw6ICcvYXBpL3VwbG9hZC8nLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7ZmlsZXVwbG9hZDogZmlsZX1cbiAgICAgICAgICAgICAgICB9KS5cbiAgICAgICAgICAgICAgICB0aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZtLnJlcG9ydC5maWxlc1tmaWVsZG5hbWVdID0gcmVzcG9uc2UuZGF0YS5pZDtcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRXJyb3Igc3RhdHVzOiAnICsgcmVzcG9uc2Uuc3RhdHVzKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICAgICAgICB2bS5yZXBvcnQudGVhbSA9IFt7J25hbWUnOiAnJywgJ3JlcXVpcmVkJzogdHJ1ZX1dO1xuICAgICAgICAgICAgdm0ucmVwb3J0LmRvY3MgPSBkb2NzO1xuICAgICAgICAgICAgZ2V0RW1wbG95ZWVzKCk7XG4gICAgICAgICAgICBnZXRFbmdpbmVzKCk7XG4gICAgICAgICAgICBnZXRPcmdzKCk7XG4gICAgICAgICAgICBnZXRUQ2xhc3NlcygpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gYWRkRW1wbG95ZWUoKSB7XG4gICAgICAgICAgICB2bS5yZXBvcnQudGVhbS5wdXNoKHtcbiAgICAgICAgICAgICAgICAnbmFtZSc6ICcnLCAncmVxdWlyZWQnOiBmYWxzZVxuICAgICAgICAgICAgfSk7XG4vLyAgICAgICAgICAgIGNvbnNvbGUuZGlyKCd0ZWFtOiAnICsgSlNPTi5zdHJpbmdpZnkodm0ucmVwb3J0LnRlYW0pKTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBjcmVhdGVQYXNzcG9ydCgpIHtcblxuLy8gICAgICAgICAgICBjb25zb2xlLmxvZygnZG9jcyAnICsgSlNPTi5zdHJpbmdpZnkodm0ucmVwb3J0LmRvY3MpKTtcbi8vICAgICAgICAgICAgY29uc29sZS5sb2coJ2ludmVzdGlnYXRpb25EYXRlICcgKyB2bS5pbnZlc3RpZ2F0aW9uRGF0ZS50b0xvY2FsZVN0cmluZygpKTtcbi8vICAgICAgICAgICAgY29uc29sZS5sb2coJ2JlZ2luICcgKyB2bS53b3JrQmVnaW4pO1xuLy8gICAgICAgICAgICBjb25zb2xlLmxvZygnZW5kICcgKyB2bS53b3JrRW5kLnRvTG9jYWxlU3RyaW5nKCkpO1xuLy8gICAgICAgICAgICBQYXNzcG9ydC5jcmVhdGVQYXNzcG9ydCh2bS53b3JrQmVnaW4pO1xuICAgICAgICAgICAgdm0ucmVwb3J0LnR5cGUgPSAncGFzc3BvcnQnO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ3RlYW06JywgSlNPTi5zdHJpbmdpZnkodm0ucmVwb3J0KSk7XG4vLyAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGRlbGV0ZSB2bS5yZXBvcnQudGVhbVswXS5yZXF1aXJlZDtcbi8vICAgICAgICAgICAgY29uc29sZS5kaXIoJ3ZtLnRjbGFzc2VzLmFsbDogJyArIEpTT04uc3RyaW5naWZ5KHZtLnRjbGFzc2VzLmFsbCkpO1xuICAgICAgICAgICAgdm0ucmVwb3J0LnRoZXJtLnRjbGFzcyA9IHZtLnRjbGFzc2VzLmFsbC5maWx0ZXIoZnVuY3Rpb24oZWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZWwubmFtZSA9PT0gdm0udGNsYXNzZXMuc2VsZWN0ZWQ7XG4gICAgICAgICAgICB9KVswXS5pZDtcbi8vICAgICAgICAgICAgY29uc29sZS5kaXIoJ3NlbGVjdGVkIGNsYXNzOiAnICsgSlNPTi5zdHJpbmdpZnkodm0ucmVwb3J0LnRoZXJtKSk7XG4gICAgICAgICAgICBQYXNzcG9ydC5jcmVhdGVQYXNzcG9ydCh2bS5yZXBvcnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0RW1wbG95ZWVzKCkge1xuICAgICAgICAgICAgVXNlckRhdGEuZ2V0QWxsVXNlcnMoKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgdm0uYWxsRW1wbG95ZWVzID0gZGF0YTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0RW5naW5lcygpIHtcbiAgICAgICAgICAgIEVuZ2luZS5nZXRBbGxFbmdpbmVzKClcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHZtLmVuZ2luZS5hbGwgPSBkYXRhO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0T3JncygpIHtcbiAgICAgICAgICAgIFBhc3Nwb3J0LmdldE9yZ3MoKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgdm0ub3JncyA9IGRhdGE7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRMUFVzKG9yZ05hbWUpIHtcbiAgICAgICAgICAgIHZhciBvcmdhbiA9IHZtLm9yZ3MuZmlsdGVyKGZ1bmN0aW9uKGVsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsLm5hbWUgPT09IG9yZ05hbWU7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgUGFzc3BvcnQuZ2V0TFBVcyhvcmdhblswXS5pZClcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHZtLmxwdXMgPSBkYXRhO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0VENsYXNzZXMoKSB7XG4gICAgICAgICAgICBQYXNzcG9ydC5nZXRUQ2xhc3NlcygpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICB2bS50Y2xhc3Nlcy5hbGwgPSBkYXRhO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc2V0U2VsZWN0ZWQoc2VsZWN0ZWQsIGl0ZW0pIHtcbiAgICAgICAgICAgIHZhciBpZCA9IGl0ZW0uaWQsXG4gICAgICAgICAgICAgICAgaW5kZXggPSBzZWxlY3RlZC5pbmRleE9mKGlkKTtcbiAgICAgICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICBzZWxlY3RlZC5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgIGl0ZW0uc2VsZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaXRlbS5zZWxlY3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgc2VsZWN0ZWQucHVzaChpZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59KSgpO1xuXG4oZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCdhcHAucGFzc3BvcnQuc2VydmljZScpXG4gICAgICAgIC5mYWN0b3J5KCdQYXNzcG9ydCcsIFBhc3Nwb3J0KTtcblxuICAgIFBhc3Nwb3J0LiRpbmplY3QgPSBbJyRodHRwJ107XG5cbiAgICBmdW5jdGlvbiBQYXNzcG9ydCgkaHR0cCkge1xuICAgICAgICB2YXIgcGFzc3BvcnQgPSB7XG4gICAgICAgICAgICBjcmVhdGVQYXNzcG9ydDogY3JlYXRlUGFzc3BvcnQsXG4gICAgICAgICAgICBnZXRMUFVzOiBnZXRMUFVzLFxuICAgICAgICAgICAgZ2V0T3JnczogZ2V0T3JncyxcbiAgICAgICAgICAgIGdldFRDbGFzc2VzOiBnZXRUQ2xhc3Nlc1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBwYXNzcG9ydDtcblxuICAgICAgICBmdW5jdGlvbiBjcmVhdGVQYXNzcG9ydChyZXBvcnRfZGF0YSkge1xuICAgICAgICAgICAgJGh0dHAucG9zdCgnL3JlcG9ydC8nLFxuICAgICAgICAgICAgICAgICAgICB7J3JlcG9ydF9kYXRhJzogcmVwb3J0X2RhdGF9LFxuICAgICAgICAgICAgICAgICAgICB7IHJlc3BvbnNlVHlwZTogJ2FycmF5YnVmZmVyJyxcbiAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ31cbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMsIGhlYWRlcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZpbGUgPSBuZXcgQmxvYihbZGF0YV0sIHt0eXBlOiAnYXBwbGljYXRpb24vcGRmJ30pO1xuICAgICAgICAgICAgICAgICAgICBzYXZlQXMoZmlsZSwgJ3JlcG9ydC5wZGYnKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGhlYWRlcnM7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRMUFVzKG9yZ0lkKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL29yZ2FuaXphdGlvbi8nICsgb3JnSWQgKyAnL2xwdS8nKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEuZGF0YTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldE9yZ3MoKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL29yZ2FuaXphdGlvbi8nKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEuZGF0YTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldFRDbGFzc2VzKCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS90Y2xhc3MvJylcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhLmRhdGE7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG59KSgpO1xuXG4oZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5wYXNzcG9ydCcpXG4gICAgICAgIC5kaXJlY3RpdmUoJ3ZhbGlkRmlsZScsIFZhbGlkRmlsZURpcmVjdGl2ZSk7XG5cbi8vICAgIFZhbGlkRmlsZURpcmVjdGl2ZS4kaW5qZWN0ID0gWydVcGxvYWQnXTtcbi8vXG4vLyAgICBmdW5jdGlvbiBWYWxpZEZpbGVEaXJlY3RpdmUoVXBsb2FkKSB7XG4vLyAgICAgICAgZnVuY3Rpb24gdXBsb2FkKGZpbGUpIHtcbi8vICAgICAgICAgICAgY29uc29sZS5sb2coJ3VwbG9hZGluZyBmaWxlICcgKyBmaWxlKTtcbi8vICAgICAgICAgICAgVXBsb2FkLnVwbG9hZCh7XG4vLyAgICAgICAgICAgICAgICB1cmw6ICcvYXBpL3VwbG9hZC8nLFxuLy8gICAgICAgICAgICAgICAgZGF0YToge2ZpbGV1cGxvYWQ6IGZpbGV9XG4vLyAgICAgICAgICAgIH0pLlxuLy8gICAgICAgICAgICB0aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4vLyAgICAgICAgICAgICAgICB2bS5yZXBvcnQuZmlsZXNbZmllbGRuYW1lXSA9IHJlc3BvbnNlLmRhdGEuaWQ7XG4vLyAgICAgICAgICAgIH0sIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4vLyAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRXJyb3Igc3RhdHVzOiAnICsgcmVzcG9uc2Uuc3RhdHVzKTtcbi8vICAgICAgICAgICAgfSk7XG4vLyAgICAgICAgfVxuXG4gICAgZnVuY3Rpb24gVmFsaWRGaWxlRGlyZWN0aXZlKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVxdWlyZTogJ25nTW9kZWwnLFxuICAgICAgICAgICAgc2NvcGU6IHRydWUsXG4gICAgICAgICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWwsIGF0dHJzLCBuZ01vZGVsKXtcbiAgICAgICAgICAgICAgICBlbC5iaW5kKCdjaGFuZ2UnLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5nTW9kZWwuJHNldFZpZXdWYWx1ZShlbC52YWwoKSk7XG4vLyAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdmaWxlbmFtZSAnICsgZWwudmFsKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbmdNb2RlbC4kcmVuZGVyKCk7XG4vLyAgICAgICAgICAgICAgICAgICAgICAgIHVwbG9hZChzY29wZS5pbWcpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxufSkoKTtcblxuKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnYXBwLnVwbG9hZCcpXG4gICAgICAgIC5jb250cm9sbGVyKCdVcGxvYWRDb250cm9sbGVyJywgVXBsb2FkQ29udHJvbGxlcik7XG5cbiAgICBVcGxvYWRDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICdVcGxvYWQnLCAnVXBsb2FkU2VydmljZSddO1xuXG4gICAgZnVuY3Rpb24gVXBsb2FkQ29udHJvbGxlcigkc2NvcGUsIFVwbG9hZCwgVXBsb2FkU2VydmljZSkge1xuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuXG4gICAgICAgICRzY29wZS5maWxlU2VsZWN0ZWQgPSBmaWxlU2VsZWN0ZWQ7XG5cbiAgICAgICAgdm0uZmlsZXMgPSBbXTtcbiAgICAgICAgdm0udXBsb2FkID0gdXBsb2FkO1xuICAgICAgICB2bS51cGxvYWRlZEZpbGVzID0gW107XG4gICAgICAgIHZtLnJlbW92ZSA9IHJlbW92ZTtcbiAgICAgICAgdm0uc2VsZWN0ZWQgPSBbXTtcbiAgICAgICAgdm0uc29ydE9yZGVyID0gJy11cGxvYWRlZF9hdCc7XG5cbiAgICAgICAgYWN0aXZhdGUoKTtcblxuICAgICAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgICAgICAgIGdldFVwbG9hZGVkRmlsZXMoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGZpbGVTZWxlY3RlZChlbGVtZW50KSB7XG4gICAgICAgICAgICB1cGxvYWQoZWxlbWVudC5maWxlcyk7XG4gICAgICAgICAgICBnZXRVcGxvYWRlZEZpbGVzKCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiB1cGxvYWQoZmlsZXMpIHtcbiAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChmaWxlcywgZnVuY3Rpb24oZmlsZSkge1xuICAgICAgICAgICAgICAgIFVwbG9hZC51cGxvYWQoe1xuICAgICAgICAgICAgICAgICAgICB1cmw6ICcvYXBpL3VwbG9hZC8nLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7ZmlsZXVwbG9hZDogZmlsZX1cbiAgICAgICAgICAgICAgICB9KS5cbiAgICAgICAgICAgICAgICB0aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBnZXRVcGxvYWRlZEZpbGVzKCk7XG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24ocmVzcCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRXJyb3Igc3RhdHVzOiAnICsgcmVzcC5zdGF0dXMpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRVcGxvYWRlZEZpbGVzKCkge1xuICAgICAgICAgICAgVXBsb2FkU2VydmljZS5xdWVyeSgpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcCkge1xuICAgICAgICAgICAgICAgICAgICB2bS51cGxvYWRlZEZpbGVzID0gcmVzcDtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHJlbW92ZSgpIHtcbiAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaCh2bS5zZWxlY3RlZCwgZnVuY3Rpb24oZmlsZSkge1xuICAgICAgICAgICAgICAgIFVwbG9hZFNlcnZpY2UucmVtb3ZlKGZpbGUuaWQpO1xuICAgICAgICAgICAgICAgIHJlbW92ZUZpbGVFbnRyeShmaWxlLmlkKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB2bS5zZWxlY3RlZCA9IFtdO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlRmlsZUVudHJ5KGlkKSB7XG4gICAgICAgICAgICBhbmd1bGFyLmZvckVhY2godm0udXBsb2FkZWRGaWxlcywgZnVuY3Rpb24odiwgaykge1xuICAgICAgICAgICAgICAgIGlmICh2bS51cGxvYWRlZEZpbGVzW2tdLmlkID09PSBpZCkge1xuICAgICAgICAgICAgICAgICAgICB2bS51cGxvYWRlZEZpbGVzLnNwbGljZShrLCAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbn0pKCk7XG5cbihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ2FwcC51cGxvYWQuc2VydmljZScpXG4gICAgICAgIC5mYWN0b3J5KCdVcGxvYWRTZXJ2aWNlJywgVXBsb2FkU2VydmljZSk7XG5cbiAgICBVcGxvYWRTZXJ2aWNlLiRpbmplY3QgPSBbJyRodHRwJ107XG4gICAgZnVuY3Rpb24gVXBsb2FkU2VydmljZSgkaHR0cCkge1xuICAgICAgICB2YXIgc2VydmljZSA9IHtcbiAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeSxcbiAgICAgICAgICAgIHJlbW92ZTogcmVtb3ZlXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHNlcnZpY2U7XG5cbiAgICAgICAgZnVuY3Rpb24gcXVlcnkoKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2ZpbGUvJykuXG4gICAgICAgICAgICAgICAgdGhlbihmdW5jdGlvbihyZXNwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNwLmRhdGE7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiByZW1vdmUoaWQpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5kZWxldGUoJy9hcGkvZmlsZS8nICsgaWQgKyAnLycpLlxuICAgICAgICAgICAgICAgIHRoZW4oZnVuY3Rpb24ocmVzcCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzcC5kYXRhO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxufSkoKTtcblxuKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAuZGF0ZXBpY2tlcicpXG4gICAgICAgIC5jb250cm9sbGVyKCdEYXRlcGlja2VyQ29udHJvbGxlcicsIERhdGVwaWNrZXJDb250cm9sbGVyKTtcblxuICAgIERhdGVwaWNrZXJDb250cm9sbGVyLiRpbmplY3QgPSBbJ3VpYkRhdGVwaWNrZXJQb3B1cENvbmZpZyddO1xuXG4gICAgZnVuY3Rpb24gRGF0ZXBpY2tlckNvbnRyb2xsZXIodWliRGF0ZXBpY2tlclBvcHVwQ29uZmlnKSB7XG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG5cbiAgICAgICAgdWliRGF0ZXBpY2tlclBvcHVwQ29uZmlnLmNsb3NlVGV4dCA9ICfQl9Cw0LrRgNGL0YLRjCc7XG4gICAgICAgIHVpYkRhdGVwaWNrZXJQb3B1cENvbmZpZy5jdXJyZW50VGV4dCA9ICfQodC10LPQvtC00L3Rjyc7XG4gICAgICAgIHVpYkRhdGVwaWNrZXJQb3B1cENvbmZpZy5jbGVhclRleHQgPSAn0J7Rh9C40YHRgtC40YLRjCc7XG4vLyAgICAgICAgdWliRGF0ZXBpY2tlclBvcHVwQ29uZmlnLmh0bWw1VHlwZXMgPSAnZGF0ZXRpbWUtbG9jYWwnO1xuXG5cbiAgICAgICAgdm0uZGF0ZU9wdGlvbnMgPSB7XG4gICAgICAgICAgICBzdGFydGluZ0RheTogMVxuICAgICAgICB9O1xuXG4gICAgICAgIHZtLnllYXJPcHRpb25zID0ge1xuICAgICAgICAgICAgZGF0ZXBpY2tlck1vZGU6ICd5ZWFyJyxcbiAgICAgICAgICAgIG1heE1vZGU6ICd5ZWFyJyxcbiAgICAgICAgICAgIG1pbk1vZGU6ICd5ZWFyJyxcbiAgICAgICAgICAgIGZvcm1hdFllYXI6ICd5eXl5J1xuICAgICAgICB9O1xuXG4gICAgICAgIHZtLm9wZW4gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICB2bS5wb3B1cC5vcGVuZWQgPSB0cnVlO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZtLnBvcHVwID0ge1xuICAgICAgICAgIG9wZW5lZDogZmFsc2VcbiAgICAgICAgfTtcblxuLy8gICAgICAgIHZhciB0b21vcnJvdyA9IG5ldyBEYXRlKCk7XG4vLyAgICAgICAgdG9tb3Jyb3cuc2V0RGF0ZSh0b21vcnJvdy5nZXREYXRlKCkgKyAxKTtcbi8vICAgICAgICB2YXIgYWZ0ZXJUb21vcnJvdyA9IG5ldyBEYXRlKCk7XG4vLyAgICAgICAgYWZ0ZXJUb21vcnJvdy5zZXREYXRlKHRvbW9ycm93LmdldERhdGUoKSArIDEpO1xuLy8gICAgICAgIHZtLmV2ZW50cyA9IFtcbi8vICAgICAgICAgIHtcbi8vICAgICAgICAgICAgZGF0ZTogdG9tb3Jyb3csXG4vLyAgICAgICAgICAgIHN0YXR1czogJ2Z1bGwnXG4vLyAgICAgICAgICB9LFxuLy8gICAgICAgICAge1xuLy8gICAgICAgICAgICBkYXRlOiBhZnRlclRvbW9ycm93LFxuLy8gICAgICAgICAgICBzdGF0dXM6ICdwYXJ0aWFsbHknXG4vLyAgICAgICAgICB9XG4vLyAgICAgICAgXTtcbi8vXG4vLyAgICAgICAgZnVuY3Rpb24gZ2V0RGF5Q2xhc3MoZGF0YSkge1xuLy8gICAgICAgICAgdmFyIGRhdGUgPSBkYXRhLmRhdGUsXG4vLyAgICAgICAgICAgIG1vZGUgPSBkYXRhLm1vZGU7XG4vLyAgICAgICAgICBpZiAobW9kZSA9PT0gJ2RheScpIHtcbi8vICAgICAgICAgICAgdmFyIGRheVRvQ2hlY2sgPSBuZXcgRGF0ZShkYXRlKS5zZXRIb3VycygwLDAsMCwwKTtcbi8vXG4vLyAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdm0uZXZlbnRzLmxlbmd0aDsgaSsrKSB7XG4vLyAgICAgICAgICAgICAgdmFyIGN1cnJlbnREYXkgPSBuZXcgRGF0ZSh2bS5ldmVudHNbaV0uZGF0ZSkuc2V0SG91cnMoMCwwLDAsMCk7XG4vL1xuLy8gICAgICAgICAgICAgIGlmIChkYXlUb0NoZWNrID09PSBjdXJyZW50RGF5KSB7XG4vLyAgICAgICAgICAgICAgICByZXR1cm4gdm0uZXZlbnRzW2ldLnN0YXR1cztcbi8vICAgICAgICAgICAgICB9XG4vLyAgICAgICAgICAgIH1cbi8vICAgICAgICAgIH1cbi8vXG4vLyAgICAgICAgICByZXR1cm4gJyc7XG4vLyAgICAgICAgfVxuICAgIH1cblxufSkoKTtcblxuKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnYXBwLnVzZXJkYXRhLmNvbnRyb2xsZXInKVxuICAgICAgICAuY29udHJvbGxlcignVXNlckRhdGFDb250cm9sbGVyJywgVXNlckRhdGFDb250cm9sbGVyKTtcblxuICAgIFVzZXJEYXRhQ29udHJvbGxlci4kaW5qZWN0ID0gWydVc2VyRGF0YSddO1xuXG4gICAgZnVuY3Rpb24gVXNlckRhdGFDb250cm9sbGVyKFVzZXJEYXRhKSB7XG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG5cbiAgICAgICAgdm0udXBkYXRlUHJvZmlsZSA9IHVwZGF0ZVByb2ZpbGU7XG4gICAgICAgIHZtLnVzZXJkYXRhID0gVXNlckRhdGE7XG5cbiAgICAgICAgYWN0aXZhdGUoKTtcblxuICAgICAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgICAgICAgIFVzZXJEYXRhLmdldCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlUHJvZmlsZSgpIHtcbiAgICAgICAgICAgIFVzZXJEYXRhLnVwZGF0ZSgpO1xuICAgICAgICB9XG4gICAgfVxufSkoKTtcblxuKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnYXBwLnVzZXJkYXRhLnNlcnZpY2UnKVxuICAgICAgICAuZmFjdG9yeSgnVXNlckRhdGEnLCBVc2VyRGF0YSk7XG5cbiAgICBVc2VyRGF0YS4kaW5qZWN0ID0gWydDb29raWVzJywgJyRodHRwJywgJyRxJywgJyR0aW1lb3V0J107XG5cbiAgICBmdW5jdGlvbiBVc2VyRGF0YShDb29raWVzLCAkaHR0cCwgJHEsICR0aW1lb3V0KSB7XG4gICAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICAgICAgZW1haWw6ICcnLFxuICAgICAgICAgICAgZmlyc3RfbmFtZTogJycsXG4gICAgICAgICAgICBsYXN0X25hbWU6ICcnLFxuICAgICAgICAgICAgbWlkZGxlX25hbWU6ICcnLFxuICAgICAgICAgICAgZGVwYXJ0bWVudDogJydcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIHVzZXJkYXRhID0ge1xuICAgICAgICAgICAgY2xlYW46IGNsZWFuLFxuICAgICAgICAgICAgZGF0YTogZGF0YSxcbiAgICAgICAgICAgIGdldDogZ2V0LFxuICAgICAgICAgICAgZ2V0QWxsVXNlcnM6IGdldEFsbFVzZXJzLFxuICAgICAgICAgICAgaXNMb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgICAgIHVwZGF0ZTogdXBkYXRlLFxuICAgICAgICAgICAgdXBkYXRlU3VjY2Vzc2Z1bGw6IGZhbHNlXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHVzZXJkYXRhO1xuXG4gICAgICAgIGZ1bmN0aW9uIGNsZWFuKCkge1xuICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKHVzZXJkYXRhLmRhdGEsIGZ1bmN0aW9uKHYsIGspIHtcbiAgICAgICAgICAgICAgICBkYXRhW2tdID0gJyc7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHZhciBjb29raWUgPSBDb29raWVzLmdldCgpO1xuICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKGNvb2tpZSwgZnVuY3Rpb24odiwgaykge1xuICAgICAgICAgICAgICAgIGlmIChrIGluIGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YVtrXSA9IGNvb2tpZVtrXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldEFsbFVzZXJzKCkge1xuICAgICAgICAgICAgdmFyIGNvb2tpZSA9IENvb2tpZXMuZ2V0KCk7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2RlcGFydG1lbnQvJyArIGNvb2tpZS5kZXBhcnRtZW50LmlkICsgJy91c2VyLycpLnRoZW4oXG4gICAgICAgICAgICAgICAgZ2V0QWxsVXNlcnNTdWNjZXNzXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0QWxsVXNlcnNTdWNjZXNzKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZSgpIHtcbiAgICAgICAgICAgIHZhciBjb29raWUgPSBDb29raWVzLmdldCgpO1xuXG4gICAgICAgICAgICB1c2VyZGF0YS5pc0xvYWRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgdXNlcmRhdGEudXBkYXRlU3VjY2Vzc2Z1bGwgPSBmYWxzZTtcblxuICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKGRhdGEsIGZ1bmN0aW9uKHYsIGspIHtcbiAgICAgICAgICAgICAgICBjb29raWVba10gPSBkYXRhW2tdO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIENvb2tpZXMuc2V0KGNvb2tpZSk7XG4gICAgICAgICAgICByZXR1cm4gdXBkYXRlREIoY29va2llKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZURCKGNvb2tpZSkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLnB1dCgnL2FwaS9kZXBhcnRtZW50LycgKyBjb29raWUuZGVwYXJ0bWVudC5pZCArXG4gICAgICAgICAgICAgICAgICAgICcvdXNlci8nICsgY29va2llLnVzZXJuYW1lICsgJy8nLCB7XG4gICAgICAgICAgICAgICAgZmlyc3RfbmFtZTogZGF0YS5maXJzdF9uYW1lLFxuICAgICAgICAgICAgICAgIGxhc3RfbmFtZTogZGF0YS5sYXN0X25hbWUsXG4gICAgICAgICAgICAgICAgbWlkZGxlX25hbWU6IGRhdGEubWlkZGxlX25hbWUsXG4gICAgICAgICAgICAgICAgZW1haWw6IGRhdGEuZW1haWxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbih1cGRhdGVTdWNjZXNzKVxuICAgICAgICAgICAgLmNhdGNoKHVwZGF0ZUZhaWxlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiB1cGRhdGVTdWNjZXNzKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICB1c2VyZGF0YS5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIHVzZXJkYXRhLnVwZGF0ZVN1Y2Nlc3NmdWxsID0gdHJ1ZTtcblxuICAgICAgICAgICAgLy8gT0staW5kaWNhdG9yIHdpbGwgYmUgc2hvd24gZm9yIDMgc2Vjb25kc1xuICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdXNlcmRhdGEudXBkYXRlU3VjY2Vzc2Z1bGwgPSBmYWxzZTtcbiAgICAgICAgICAgIH0sIDMwMDApO1xuXG4vLyAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRGF0YSBmcm9tIHVwZGF0ZTogJXMnLCBKU09OLnN0cmluZ2lmeShyZXNwb25zZS5kYXRhKSk7XG4vLyAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnU3RhdHVzIGZyb20gdXBkYXRlOiAlcycsIHJlc3BvbnNlLnN0YXR1cyk7XG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUZhaWxlZChlKSB7XG4gICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KGUpO1xuICAgICAgICB9XG4gICAgfVxufSkoKTtcblxuKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAubG9naW4nKVxuICAgICAgICAuZGlyZWN0aXZlKCdnbXBJbnB1dCcsIGdtcElucHV0KTtcblxuICAgIGZ1bmN0aW9uIGdtcElucHV0ICgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXG4vLyAgICAgICAgICAgIGNvbnRyb2xsZXI6IGZ1bmN0aW9uKCRzY29wZSwgJGVsZW1lbnQpIHtcbi8vICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCRlbGVtZW50LmF0dHIoJ25hbWUnKSk7XG4vLyAgICAgICAgICAgICAgICAkc2NvcGUuaGFzRXJyb3IgPSB0aGlzLmZpZWxkLiR0b3VjaGVkICYmIHRoaXMuZmllbGQuJGludmFsaWQ7XG4vL1xuLy8gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUpIHtcbiAgICAgICAgICAgICAgICBzY29wZS5pc1ZhbGlkID0gc2NvcGUudXNlckZvcm0uZW1haWwuJHRvdWNoZWQ7XG4vLyAgICAgICAgICAgICAgICBzY29wZS51c2VyRm9ybS5lbWFpbC4kdG91Y2hlZC4kd2F0Y2goKVxuXG4gICAgICAgICAgICB9LFxuLy8gICAgICAgICAgICBjb21waWxlOiBmdW5jdGlvbih0RWxlbSwgdEF0dHJzKSB7XG4vLyAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnYXR0cnM6ICcgKyB0QXR0cnMuaWQpO1xuLy8gICAgICAgICAgICAgICAgdEVsZW0uZmluZCgnbGFiZWwnKS5hdHRyKCdmb3InLCB0QXR0cnMuaWQpO1xuLy8gICAgICAgICAgICAgICAgdEVsZW0uZmluZCgnaW5wdXQnKS5hdHRyKCdpZCcsIHRBdHRycy5pZCk7XG4vLyAgICAgICAgICAgICAgICB0RWxlbS5maW5kKCdpbnB1dCcpLmF0dHIoJ25hbWUnLCAnZW1haWwnKTtcbi8vICAgICAgICAgICAgfSxcbi8vICAgICAgICAgICAgc2NvcGU6IHtcbi8vICAgICAgICAgICAgICAgIHR5cGU6ICdAJyxcbi8vICAgICAgICAgICAgICAgIG1vZGVsOiAnPW5nTW9kZWwnLFxuLy8gICAgICAgICAgICAgICAgZmllbGQ6ICc9Jyxcbi8vICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnQCdcbi8vICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3N0YXRpYy9zcmMvYXBwL3VzZXIvZ21wLWlucHV0LmRpcmVjdGl2ZS50cGwuaHRtbCdcbiAgICAgICAgfTtcbiAgICB9XG59KSgpO1xuXG4oZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCdhcHAucmVwb3J0JylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ1JlcG9ydENvbnRyb2xsZXInLCBSZXBvcnRDb250cm9sbGVyKTtcblxuICAgIFJlcG9ydENvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRzdGF0ZScsICdVc2VyRGF0YScsICdEZXBhcnRtZW50JywgJ0VuZ2luZScsICdQYXNzcG9ydCcsICdVcGxvYWQnXTtcbiAgICBmdW5jdGlvbiBSZXBvcnRDb250cm9sbGVyKCRzY29wZSwgJHN0YXRlLCBVc2VyRGF0YSwgRGVwYXJ0bWVudCwgRW5naW5lLCBQYXNzcG9ydCwgVXBsb2FkKSB7XG5cbiAgICAgICAgJHNjb3BlLnVwbG9hZCA9IHVwbG9hZDtcblxuICAgICAgICB2YXIgdm0gPSB0aGlzLFxuICAgICAgICAgICAgcGFnZXMgPSBbXG4gICAgICAgICAgICAgICAgJ3JlcG9ydC90ZWFtLnRwbC5odG1sJyxcbiAgICAgICAgICAgICAgICAncmVwb3J0L3JlcG9ydF9pbmZvLnRwbC5odG1sJyxcbiAgICAgICAgICAgICAgICAnbWVhc3VyZXJzLnRwbC5odG1sJyxcbiAgICAgICAgICAgICAgICAnbHB1LnRwbC5odG1sJyxcbiAgICAgICAgICAgICAgICAncmVwb3J0L2RhdGVzLnRwbC5odG1sJyxcbiAgICAgICAgICAgICAgICAnZW5naW5lcy50cGwuaHRtbCcsXG4gICAgICAgICAgICAgICAgJ29yZGVyLnRwbC5odG1sJyxcbiAgICAgICAgICAgICAgICAncmVwb3J0L3Bob3Rvcy50cGwuaHRtbCcsXG4vLyAgICAgICAgICAgICAgICAndmFsdWVzLnRwbC5odG1sJyxcbi8vICAgICAgICAgICAgICAgICdkb2NzLnRwbC5odG1sJyxcbiAgICAgICAgICAgICAgICAndGhlcm0udHBsLmh0bWwnLFxuICAgICAgICAgICAgICAgICd2aWJyby50cGwuaHRtbCcsXG4gICAgICAgICAgICAgICAgJ3Jlc2lzdGFuY2UudHBsLmh0bWwnLFxuLy8gICAgICAgICAgICAgICAgJ3NpZ25lcnMudHBsLmh0bWwnXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgY29udHJvbF90eXBlcyA9IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICfQktCY0JonLFxuICAgICAgICAgICAgICAgICAgICBmdWxsX25hbWU6ICfQktC40LfRg9Cw0LvRjNC90YvQuSDQuCDQuNC30LzQtdGA0LjRgtC10LvRjNC90YvQuSDQutC+0L3RgtGA0L7Qu9GMJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAn0KPQmicsXG4gICAgICAgICAgICAgICAgICAgIGZ1bGxfbmFtZTogJ9Cj0LvRjNGC0YDQsNC30LLRg9C60L7QstC+0Lkg0LrQvtC90YLRgNC+0LvRjCdcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ9Ci0JonLFxuICAgICAgICAgICAgICAgICAgICBmdWxsX25hbWU6ICfQotC10L/Qu9C+0LLQvtC5INC60L7QvdGC0YDQvtC70YwnXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICfQktCUJyxcbiAgICAgICAgICAgICAgICAgICAgZnVsbF9uYW1lOiAn0JLQuNCx0YDQvtC00LjQsNCz0L3QvtGB0YLQuNGH0LXRgdC60LjQuSDQutC+0L3RgtGA0L7Qu9GMJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAn0K3QmycsXG4gICAgICAgICAgICAgICAgICAgIGZ1bGxfbmFtZTogJ9Ct0LvQtdC60YLRgNC40YfQtdGB0LrQuNC5INC60L7QvdGC0YDQvtC70YwnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIG1lYXN1cmVycyA9IHtcbiAgICAgICAgICAgICAgICBhbGw6IERlcGFydG1lbnQubWVhc3VyZXJzKCksXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWQ6IFtdLFxuICAgICAgICAgICAgICAgIHNvcnRPcmRlcjogJ25hbWUnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZW5naW5lID0ge1xuICAgICAgICAgICAgICAgIGFsbDogW10sXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgJ3R5cGUnOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgJ3NlcmlhbF9udW1iZXInOiAwXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzb3J0T3JkZXI6ICduYW1lJ1xuICAgICAgICAgICAgfTtcblxuXG4gICAgICAgIHZtLmFkZFRvQ29sbGVjdGlvbiA9IGFkZFRvQ29sbGVjdGlvbjtcbiAgICAgICAgdm0uYWxsRW1wbG95ZWVzID0gW107XG4gICAgICAgIHZtLmNvbnRyb2xfdHlwZXMgPSBjb250cm9sX3R5cGVzO1xuICAgICAgICB2bS5jcmVhdGVQYXNzcG9ydCA9IGNyZWF0ZVBhc3Nwb3J0O1xuICAgICAgICB2bS5lbmdpbmUgPSBlbmdpbmU7XG4gICAgICAgIHZtLndvcmtCZWdpbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgdm0ud29ya0VuZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdm0ubHB1cyA9IHt9O1xuICAgICAgICB2bS5vcmdzID0ge307XG4gICAgICAgIHZtLnBhZ2VzID0gcGFnZXM7XG4gICAgICAgIHZtLnByb2NLZXlQcmVzcyA9IHByb2NLZXlQcmVzcztcbiAgICAgICAgdm0udGNsYXNzZXMgPSB7YWxsOiBbXSwgc2VsZWN0ZWQ6ICcnfTtcbiAgICAgICAgdm0uZ2V0TFBVcyA9IGdldExQVXM7XG4gICAgICAgIHZtLm1lYXN1cmVycyA9IG1lYXN1cmVycztcbiAgICAgICAgdm0ucmVwb3J0ID0ge1xuICAgICAgICAgICAgdGVhbTogdW5kZWZpbmVkLFxuICAgICAgICAgICAgbWVhc3VyZXJzOiBtZWFzdXJlcnMuc2VsZWN0ZWQsXG4gICAgICAgICAgICBmaWxlczoge1xuICAgICAgICAgICAgICAgICdtYWluJzogW10sXG4gICAgICAgICAgICAgICAgJ3RoZXJtMSc6IFtdLFxuICAgICAgICAgICAgICAgICd0aGVybTInOiBbXSxcbiAgICAgICAgICAgICAgICAnbGljZW5zZXMnOiBbXVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRoZXJtOiB7fSxcbiAgICAgICAgICAgIHZpYnJvOiB7fSxcbiAgICAgICAgICAgIG9yZGVyOiB7fSxcbiAgICAgICAgICAgIHJlc2lzdGFuY2U6IHt9XG4gICAgICAgIH07XG4gICAgICAgIHZtLnNldFNlbGVjdGVkID0gc2V0U2VsZWN0ZWQ7XG5cbiAgICAgICAgYWN0aXZhdGUoKTtcblxuICAgICAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgICAgICAgIHZtLnJlcG9ydC5pbmZvID0ge1xuICAgICAgICAgICAgICAgIGxpY2Vuc2U6ICfQlNC+0LPQvtCy0L7RgCDihJYgICAgICAgICAg0L7RgiAgICAgICAgICDQvdCwINCy0YvQv9C+0LvQvdC10L3QuNC1INGA0LDQsdC+0YIg0L/QviDRjdC60YHQv9C10YDRgtC40LfQtSDQv9GA0L7QvNGL0YjQu9C10L3QvdC+0Lkg0LHQtdC30L7Qv9Cw0YHQvdC+0YHRgtC4LidcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2bS5yZXBvcnQudGVhbSA9IHt9O1xuICAgICAgICAgICAgdm0ucmVwb3J0LmRvY3MgPSBbXTtcbiAgICAgICAgICAgIHZtLnJlcG9ydC5vYmpfZGF0YSA9IHtcbiAgICAgICAgICAgICAgICBkZXRhaWxfaW5mbzogW11cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGdldEVtcGxveWVlcygpO1xuICAgICAgICAgICAgZ2V0RW5naW5lcygpO1xuICAgICAgICAgICAgZ2V0T3JncygpO1xuICAgICAgICAgICAgZ2V0VENsYXNzZXMoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGFkZFRvQ29sbGVjdGlvbihhcnIsIHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSB2YWx1ZS50cmltKCk7XG4gICAgICAgICAgICAvLyBUZXN0IGZvciBhYnNlbmNlIG9mIGEgbmV3IHZhbHVlIGluIGFycmF5IFxuICAgICAgICAgICAgaWYgKHZhbHVlICE9PSAnJyAmJiBhcnIuaW5kZXhPZih2YWx1ZSkgPT09IC0xICkge1xuICAgICAgICAgICAgICAgIGFyci5wdXNoKHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZVBhc3Nwb3J0KCkge1xuLy8gICAgICAgICAgICBjb25zb2xlLmxvZygnZG9jcyAnICsgSlNPTi5zdHJpbmdpZnkodm0ucmVwb3J0LmRvY3MpKTtcbi8vICAgICAgICAgICAgY29uc29sZS5sb2coJ2ludmVzdGlnYXRpb25EYXRlICcgKyB2bS5pbnZlc3RpZ2F0aW9uRGF0ZS50b0xvY2FsZVN0cmluZygpKTtcbi8vICAgICAgICAgICAgY29uc29sZS5sb2coJ2JlZ2luICcgKyB2bS53b3JrQmVnaW4pO1xuLy8gICAgICAgICAgICBjb25zb2xlLmxvZygnZW5kICcgKyB2bS53b3JrRW5kLnRvTG9jYWxlU3RyaW5nKCkpO1xuLy8gICAgICAgICAgICBQYXNzcG9ydC5jcmVhdGVQYXNzcG9ydCh2bS53b3JrQmVnaW4pO1xuICAgICAgICAgICAgdm0ucmVwb3J0LnR5cGUgPSAgJ3JlcG9ydCc7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygndGVhbTonLCBKU09OLnN0cmluZ2lmeSh2bS5yZXBvcnQpKTtcbi8vICAgICAgICAgICAgcmV0dXJuO1xuLy8gICAgICAgICAgICBjb25zb2xlLmRpcigndm0udGNsYXNzZXMuYWxsOiAnICsgSlNPTi5zdHJpbmdpZnkodm0udGNsYXNzZXMuYWxsKSk7XG4gICAgICAgICAgICB2bS5yZXBvcnQudGhlcm0udGNsYXNzID0gdm0udGNsYXNzZXMuYWxsLmZpbHRlcihmdW5jdGlvbihlbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBlbC5uYW1lID09PSB2bS50Y2xhc3Nlcy5zZWxlY3RlZDtcbiAgICAgICAgICAgIH0pWzBdLmlkO1xuLy8gICAgICAgICAgICBjb25zb2xlLmRpcignc2VsZWN0ZWQgY2xhc3M6ICcgKyBKU09OLnN0cmluZ2lmeSh2bS5yZXBvcnQudGhlcm0pKTtcbiAgICAgICAgICAgIFBhc3Nwb3J0LmNyZWF0ZVBhc3Nwb3J0KHZtLnJlcG9ydCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRFbXBsb3llZXMoKSB7XG4gICAgICAgICAgICBVc2VyRGF0YS5nZXRBbGxVc2VycygpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICB2bS5hbGxFbXBsb3llZXMgPSBkYXRhO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0RW5naW5lcygpIHtcbiAgICAgICAgICAgIEVuZ2luZS5nZXRBbGxFbmdpbmVzKClcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHZtLmVuZ2luZS5hbGwgPSBkYXRhO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0T3JncygpIHtcbiAgICAgICAgICAgIFBhc3Nwb3J0LmdldE9yZ3MoKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgdm0ub3JncyA9IGRhdGE7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRMUFVzKG9yZ05hbWUpIHtcbiAgICAgICAgICAgIHZhciBvcmdhbiA9IHZtLm9yZ3MuZmlsdGVyKGZ1bmN0aW9uKGVsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsLm5hbWUgPT09IG9yZ05hbWU7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgUGFzc3BvcnQuZ2V0TFBVcyhvcmdhblswXS5pZClcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHZtLmxwdXMgPSBkYXRhO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0VENsYXNzZXMoKSB7XG4gICAgICAgICAgICBQYXNzcG9ydC5nZXRUQ2xhc3NlcygpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICB2bS50Y2xhc3Nlcy5hbGwgPSBkYXRhO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gcHJvY0tleVByZXNzKGNsaWNrRXZlbnQsIGFycikge1xuICAgICAgICAgICAgLy8gQ2hlY2sgZm9yIFJldHVybiAoRW50ZXIpIGtleSBwcmVzc2VkXG4gICAgICAgICAgICBpZiAoY2xpY2tFdmVudC53aGljaCA9PT0gMTMpIHtcbiAgICAgICAgICAgICAgICBjbGlja0V2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgYWRkVG9Db2xsZWN0aW9uKGFyciwgY2xpY2tFdmVudC50YXJnZXQudmFsdWUpO1xuICAgICAgICAgICAgICAgIGNsaWNrRXZlbnQudGFyZ2V0LnZhbHVlID0gJyc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZXRTZWxlY3RlZChzZWxlY3RlZCwgaXRlbSkge1xuICAgICAgICAgICAgdmFyIGlkID0gaXRlbS5pZCxcbiAgICAgICAgICAgICAgICBpbmRleCA9IHNlbGVjdGVkLmluZGV4T2YoaWQpO1xuICAgICAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIHNlbGVjdGVkLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgaXRlbS5zZWxlY3RlZCA9IGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpdGVtLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBzZWxlY3RlZC5wdXNoKGlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHVwbG9hZChlbGVtZW50KSB7XG4gICAgICAgICAgICB2YXIgZmllbGRuYW1lID0gZWxlbWVudC5uYW1lO1xuICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKGVsZW1lbnQuZmlsZXMsIGZ1bmN0aW9uKGZpbGUpIHtcbiAgICAgICAgICAgICAgICBVcGxvYWQudXBsb2FkKHtcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnL2FwaS91cGxvYWQvJyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge2ZpbGV1cGxvYWQ6IGZpbGV9XG4gICAgICAgICAgICAgICAgfSkuXG4gICAgICAgICAgICAgICAgdGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICB2bS5yZXBvcnQuZmlsZXNbZmllbGRuYW1lXS5wdXNoKHJlc3BvbnNlLmRhdGEuaWQpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh2bS5yZXBvcnQuZmlsZXMpO1xuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdFcnJvciBzdGF0dXM6ICcgKyByZXNwb25zZS5zdGF0dXMpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG59KSgpO1xuXG4oZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgUmVwb3J0Q29udGFpbmVyQ29udHJvbGxlci4kaW5qZWN0ID0gW1wiJHNjb3BlXCIsIFwiVXNlckRhdGFcIiwgXCJEZXBhcnRtZW50XCIsIFwiUGFzc3BvcnRcIiwgXCJVcGxvYWRcIiwgXCJTZXJ2ZXJEYXRhXCJdO1xuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnYXBwLnJlcG9ydCcpXG4gICAgICAgIC5jb250cm9sbGVyKCdSZXBvcnRDb250YWluZXJDb250cm9sbGVyJywgUmVwb3J0Q29udGFpbmVyQ29udHJvbGxlcik7XG5cbiAgICBmdW5jdGlvbiBSZXBvcnRDb250YWluZXJDb250cm9sbGVyKCRzY29wZSwgVXNlckRhdGEsIERlcGFydG1lbnQsIFBhc3Nwb3J0LCBVcGxvYWQsIFNlcnZlckRhdGEpIHtcbiAgICAgICAgJ25nSW5qZWN0JztcblxuICAgICAgICAkc2NvcGUudXBsb2FkID0gdXBsb2FkO1xuXG4gICAgICAgIHZhciB2bSA9IHRoaXMsXG4gICAgICAgICAgICBwYWdlcyA9IFtcbiAgICAgICAgICAgICAgICAncmVwb3J0X2NvbnRhaW5lci9kZXZpY2VzLnRwbC5odG1sJyxcbiAgICAgICAgICAgICAgICAncmVwb3J0X2NvbnRhaW5lci9yZXBvcnRfaW5mby50cGwuaHRtbCcsXG4gICAgICAgICAgICAgICAgJ3JlcG9ydF9jb250YWluZXIvb3JkZXIudHBsLmh0bWwnLFxuLy8gICAgICAgICAgICAgICAgJ3JlcG9ydF9jb250YWluZXIvZGV2aWNlX2xvY2F0aW9uLnRwbC5odG1sJyxcbiAgICAgICAgICAgICAgICAncmVwb3J0X2NvbnRhaW5lci90ZWFtLnRwbC5odG1sJyxcbi8vICAgICAgICAgICAgICAgICdtZWFzdXJlcnMudHBsLmh0bWwnLFxuLy8gICAgICAgICAgICAgICAgJ3JlcG9ydC9kYXRlcy50cGwuaHRtbCcsXG4vLyAgICAgICAgICAgICAgICAnZW5naW5lcy50cGwuaHRtbCcsXG4vLyAgICAgICAgICAgICAgICAncmVwb3J0L3Bob3Rvcy50cGwuaHRtbCcsXG4vLyAgICAgICAgICAgICAgICAndmFsdWVzLnRwbC5odG1sJyxcbi8vICAgICAgICAgICAgICAgICdkb2NzLnRwbC5odG1sJyxcbi8vICAgICAgICAgICAgICAgICd0aGVybS50cGwuaHRtbCcsXG4vLyAgICAgICAgICAgICAgICAndmlicm8udHBsLmh0bWwnLFxuLy8gICAgICAgICAgICAgICAgJ3Jlc2lzdGFuY2UudHBsLmh0bWwnLFxuLy8gICAgICAgICAgICAgICAgJ3NpZ25lcnMudHBsLmh0bWwnXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgbWVhc3VyZXJzID0ge1xuICAgICAgICAgICAgICAgIGFsbDogRGVwYXJ0bWVudC5tZWFzdXJlcnMoKSxcbiAgICAgICAgICAgICAgICBzZWxlY3RlZDogW10sXG4gICAgICAgICAgICAgICAgc29ydE9yZGVyOiAnbmFtZSdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkZXZpY2VzID0ge1xuICAgICAgICAgICAgICAgIGFsbDogW10sXG4vLyAgICAgICAgICAgICAgICBzZWxlY3RlZDoge1xuLy8gICAgICAgICAgICAgICAgICAgICd0eXBlJzogJycsXG4vLyAgICAgICAgICAgICAgICAgICAgJ3NlcmlhbF9udW1iZXInOiAwXG4vLyAgICAgICAgICAgICAgICB9LFxuLy8gICAgICAgICAgICAgICAgc29ydE9yZGVyOiAnbmFtZSdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkZXZpY2VfY29uZGl0aW9ucyA9IFtcbiAgICAgICAgICAgICAgICAn0YDQsNCx0L7RgtC+0YHQv9C+0YHQvtCx0L3QvtC1JyxcbiAgICAgICAgICAgICAgICAn0L3QtdGA0LDQsdC+0YLQvtGB0L/QvtGB0L7QsdC90L7QtScsXG4gICAgICAgICAgICAgICAgJ9C/0YDQtdC00LXQu9GM0L3QvtC1J1xuICAgICAgICAgICAgXTtcblxuXG4vLyAgICAgICAgdm0uYWRkVG9Db2xsZWN0aW9uID0gYWRkVG9Db2xsZWN0aW9uO1xuICAgICAgICB2bS5hbGxFbXBsb3llZXMgPSBbXTtcbi8vICAgICAgICB2bS5jb250cm9sX3R5cGVzID0gY29udHJvbF90eXBlcztcbiAgICAgICAgdm0uZGV2aWNlX2NvbmRpdGlvbnMgPSBkZXZpY2VfY29uZGl0aW9ucztcbiAgICAgICAgdm0uY3JlYXRlUGFzc3BvcnQgPSBjcmVhdGVQYXNzcG9ydDtcbiAgICAgICAgdm0uZGV2aWNlcyA9IGRldmljZXM7XG4vLyAgICAgICAgdm0ud29ya0JlZ2luID0gdW5kZWZpbmVkO1xuLy8gICAgICAgIHZtLndvcmtFbmQgPSB1bmRlZmluZWQ7XG4gICAgICAgIHZtLmxwdXMgPSB7fTtcbiAgICAgICAgdm0ub3JncyA9IHt9O1xuICAgICAgICB2bS5wYWdlcyA9IHBhZ2VzO1xuLy8gICAgICAgIHZtLnByb2NLZXlQcmVzcyA9IHByb2NLZXlQcmVzcztcbi8vICAgICAgICB2bS50Y2xhc3NlcyA9IHthbGw6IFtdLCBzZWxlY3RlZDogJyd9O1xuICAgICAgICB2bS5nZXRMUFVzID0gZ2V0TFBVcztcbi8vICAgICAgICB2bS5tZWFzdXJlcnMgPSBtZWFzdXJlcnM7XG4gICAgICAgIHZtLnJlcG9ydCA9IHtcbiAgICAgICAgICAgIHRlYW06IFtdLFxuICAgICAgICAgICAgaW5mbzoge1xuICAgICAgICAgICAgICAgICdpbmZvX2ludmVzdGlnYXRpb24nOiAn0K3QutGB0L/QtdGA0YLQuNC30LAg0L/RgNC+0LzRi9GI0LvQtdC90L3QvtC5INCx0LXQt9C+0L/QsNGB0L3QvtGB0YLQuCDQv9GA0L7QstC+0LTQuNGC0YHRjyDQstC/0LXRgNCy0YvQtS4gJyArXG4gICAgICAgICAgICAgICAgICAgICdcXG7QndCeLCDQktCeIOKAkyAxINGA0LDQtyDQsiAyINCz0L7QtNCwICjQvtGC0LLQtdGC0YHRgtCy0LXQvdC90YvQuSDQt9CwINC+0YHRg9GJ0LXRgdGC0LLQu9C10L3QuNC1ICcgKyBcbiAgICAgICAgICAgICAgICAgICAgJ9C/0YDQvtC40LfQstC+0LTRgdGC0LLQtdC90L3QvtCz0L4g0LrQvtC90YLRgNC+0LvRjyDQt9CwINGN0LrRgdC/0LvRg9Cw0YLQsNGG0LjQtdC5INGB0L7RgdGD0LTQsCkuICcgK1xuICAgICAgICAgICAgICAgICAgICAnXFxu0J3Qniwg0JLQniDigJMgMSDRgNCw0Lcg0LIgNCDQs9C+0LTQsCAo0YPQv9C+0LvQvdC+0LzQvtGH0LXQvdC90LDRjyDRgdC/0LXRhtC40LDQu9C40LfQuNGA0L7QstCw0L3QvdCw0Y8g0L7RgNCz0LDQvdC40LfQsNGG0LjRjywgJyArXG4gICAgICAgICAgICAgICAgICAgICfQvtGC0LLQtdGC0YHRgtCy0LXQvdC90YvQuSDQt9CwINC+0YHRg9GJ0LXRgdGC0LLQu9C10L3QuNC1INC/0YDQvtC40LfQstC+0LTRgdGC0LLQtdC90L3QvtCz0L4g0LrQvtC90YLRgNC+0LvRjyDQt9CwINGN0LrRgdC/0LvRg9Cw0YLQsNGG0LjQtdC5INGB0L7RgdGD0LTQsCkuICcgK1xuICAgICAgICAgICAgICAgICAgICAnXFxu0JPQmCDigJMgMSDRgNCw0Lcg0LIgOCDQu9C10YIgKNGD0L/QvtC70L3QvtC80L7Rh9C10L3QvdCw0Y8g0YHQv9C10YbQuNCw0LvQuNC30LjRgNC+0LLQsNC90L3QsNGPINC+0YDQs9Cw0L3QuNC30LDRhtC40Y8sICcgKyBcbiAgICAgICAgICAgICAgICAgICAgJ9C+0YLQstC10YLRgdGC0LLQtdC90L3Ri9C5INC30LAg0L7RgdGD0YnQtdGB0YLQstC70LXQvdC40LUg0L/RgNC+0LjQt9Cy0L7QtNGB0YLQstC10L3QvdC+0LPQviDQutC+0L3RgtGA0L7Qu9GPINC30LAg0Y3QutGB0L/Qu9GD0LDRgtCw0YbQuNC10Lkg0YHQvtGB0YPQtNCwKScsXG4gICAgICAgICAgICAgICAgJ2luZm9fcmVwYWlyJzogJ9CSINC/0YDQtdC00YHRgtCw0LLQu9C10L3QvdC+0Lkg0YLQtdGF0L3QuNGH0LXRgdC60L7QuSDQtNC+0LrRg9C80LXQvdGC0LDRhtC40Lgg0L3QtSDQvtGC0LzQtdGH0LXQvdC+JyxcbiAgICAgICAgICAgICAgICAnZGFuZ2VyX3BsYWNlcyc6ICfQnNC10YHRgtCwINC60L7QvdGG0LXQvdGC0YDQsNGG0LjQuSDQvdCw0L/RgNGP0LbQtdC90LjQuSDigJMg0L/RgNC+0LTQvtC70YzQvdGL0LUg0Lgg0LrQvtC70YzRhtC10LLRi9C1INGB0LLQsNGA0L3Ri9C1INGI0LLRiywgJyArIFxuICAgICAgICAgICAgICAgICAgICAn0LzQtdGB0YLQsCDQstCy0LDRgNC60Lgg0YjRgtGD0YbQtdGA0L7Qsjsg0LzQtdGB0YLQsCDQvdCw0LjQsdC+0LvQtdC1INCy0LXRgNC+0Y/RgtC90L7Qs9C+INC60L7RgNGA0L7Qt9C40L7QvdC90L7Qs9C+INC40LfQvdC+0YHQsCDigJMgJyArIFxuICAgICAgICAgICAgICAgICAgICAn0LLQvdGD0YLRgNC10L3QvdGP0Y8g0L/QvtCy0LXRgNGF0L3QvtGB0YLRjCDQvdC40LbQvdC10LPQviDQtNC90LjRidCwJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4vLyAgICAgICAgICAgIHRlYW06IHVuZGVmaW5lZCxcbi8vICAgICAgICAgICAgbWVhc3VyZXJzOiBtZWFzdXJlcnMuc2VsZWN0ZWQsXG4vLyAgICAgICAgICAgIGZpbGVzOiB7XG4vLyAgICAgICAgICAgICAgICAnbWFpbic6IFtdLFxuLy8gICAgICAgICAgICAgICAgJ3RoZXJtMSc6IFtdLFxuLy8gICAgICAgICAgICAgICAgJ3RoZXJtMic6IFtdLFxuLy8gICAgICAgICAgICAgICAgJ2xpY2Vuc2VzJzogW11cbi8vICAgICAgICAgICAgfSxcbi8vICAgICAgICAgICAgdGhlcm06IHt9LFxuLy8gICAgICAgICAgICB2aWJybzoge30sXG4vLyAgICAgICAgICAgIG9yZGVyOiB7fSxcbi8vICAgICAgICAgICAgcmVzaXN0YW5jZToge31cbi8vICAgICAgICB9O1xuICAgICAgICB2bS5zZXRTZWxlY3RlZCA9IHNldFNlbGVjdGVkO1xuXG4gICAgICAgIGFjdGl2YXRlKCk7XG5cbiAgICAgICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICAgICAgICBnZXRDb250YWluZXJzKCk7XG4gICAgICAgICAgICBnZXRPcmdzKCk7XG4gICAgICAgICAgICBnZXRFbXBsb3llZXMoKTtcbi8vICAgICAgICAgICAgdm0ucmVwb3J0LmluZm8gPSB7XG4vLyAgICAgICAgICAgICAgICBsaWNlbnNlOiAn0JTQvtCz0L7QstC+0YAg4oSWICAgICAgICAgINC+0YIgICAgICAgICAg0L3QsCDQstGL0L/QvtC70L3QtdC90LjQtSDRgNCw0LHQvtGCINC/0L4g0Y3QutGB0L/QtdGA0YLQuNC30LUg0L/RgNC+0LzRi9GI0LvQtdC90L3QvtC5INCx0LXQt9C+0L/QsNGB0L3QvtGB0YLQuC4nXG4vLyAgICAgICAgICAgIH07XG4vLyAgICAgICAgICAgIHZtLnJlcG9ydC50ZWFtID0ge307XG4vLyAgICAgICAgICAgIHZtLnJlcG9ydC5kb2NzID0gW107XG4vLyAgICAgICAgICAgIHZtLnJlcG9ydC5vYmpfZGF0YSA9IHtcbi8vICAgICAgICAgICAgICAgIGRldGFpbF9pbmZvOiBbXVxuLy8gICAgICAgICAgICB9O1xuLy9cbi8vICAgICAgICAgICAgZ2V0RW5naW5lcygpO1xuLy8gICAgICAgICAgICBnZXRUQ2xhc3NlcygpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gYWRkVG9Db2xsZWN0aW9uKGFyciwgdmFsdWUpIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IHZhbHVlLnRyaW0oKTtcbiAgICAgICAgICAgIC8vIFRlc3QgZm9yIGFic2VuY2Ugb2YgYSBuZXcgdmFsdWUgaW4gYXJyYXkgXG4gICAgICAgICAgICBpZiAodmFsdWUgIT09ICcnICYmIGFyci5pbmRleE9mKHZhbHVlKSA9PT0gLTEgKSB7XG4gICAgICAgICAgICAgICAgYXJyLnB1c2godmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlUGFzc3BvcnQoKSB7XG4vLy8vICAgICAgICAgICAgY29uc29sZS5sb2coJ2RvY3MgJyArIEpTT04uc3RyaW5naWZ5KHZtLnJlcG9ydC5kb2NzKSk7XG4vLy8vICAgICAgICAgICAgY29uc29sZS5sb2coJ2ludmVzdGlnYXRpb25EYXRlICcgKyB2bS5pbnZlc3RpZ2F0aW9uRGF0ZS50b0xvY2FsZVN0cmluZygpKTtcbi8vLy8gICAgICAgICAgICBjb25zb2xlLmxvZygnYmVnaW4gJyArIHZtLndvcmtCZWdpbik7XG4vLy8vICAgICAgICAgICAgY29uc29sZS5sb2coJ2VuZCAnICsgdm0ud29ya0VuZC50b0xvY2FsZVN0cmluZygpKTtcbi8vLy8gICAgICAgICAgICBQYXNzcG9ydC5jcmVhdGVQYXNzcG9ydCh2bS53b3JrQmVnaW4pO1xuICAgICAgICAgICAgdm0ucmVwb3J0LnR5cGUgPSAncmVwb3J0LWNvbnRhaW5lcic7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygncmVwb3J0OicsIEpTT04uc3RyaW5naWZ5KHZtLnJlcG9ydCkpO1xuLy8vLyAgICAgICAgICAgIHJldHVybjtcbi8vLy8gICAgICAgICAgICBjb25zb2xlLmRpcigndm0udGNsYXNzZXMuYWxsOiAnICsgSlNPTi5zdHJpbmdpZnkodm0udGNsYXNzZXMuYWxsKSk7XG4vLyAgICAgICAgICAgIHZtLnJlcG9ydC50aGVybS50Y2xhc3MgPSB2bS50Y2xhc3Nlcy5hbGwuZmlsdGVyKGZ1bmN0aW9uKGVsKSB7XG4vLyAgICAgICAgICAgICAgICByZXR1cm4gZWwubmFtZSA9PT0gdm0udGNsYXNzZXMuc2VsZWN0ZWQ7XG4vLyAgICAgICAgICAgIH0pWzBdLmlkO1xuLy8vLyAgICAgICAgICAgIGNvbnNvbGUuZGlyKCdzZWxlY3RlZCBjbGFzczogJyArIEpTT04uc3RyaW5naWZ5KHZtLnJlcG9ydC50aGVybSkpO1xuICAgICAgICAgICAgUGFzc3BvcnQuY3JlYXRlUGFzc3BvcnQodm0ucmVwb3J0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldEVtcGxveWVlcygpIHtcbiAgICAgICAgICAgIFVzZXJEYXRhLmdldEFsbFVzZXJzKClcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHZtLmFsbEVtcGxveWVlcyA9IGRhdGE7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRDb250YWluZXJzKCkge1xuICAgICAgICAgICAgU2VydmVyRGF0YS5xdWVyeSh7Y2F0ZWdvcnk6ICdjb250YWluZXInfSwgZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgIHZtLmRldmljZXMuYWxsID0gZGF0YTtcbi8vICAgICAgICAgICAgICAgIHZtLmRldmljZXMuYWxsID0gZGF0YS5tYXAoZnVuY3Rpb24oZWwpIHtcbi8vICAgICAgICAgICAgICAgICAgICByZXR1cm4gZWw7XG4vLyAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0T3JncygpIHtcbiAgICAgICAgICAgIFBhc3Nwb3J0LmdldE9yZ3MoKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgdm0ub3JncyA9IGRhdGE7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRMUFVzKG9yZ05hbWUpIHtcbiAgICAgICAgICAgIHZhciBvcmdhbiA9IHZtLm9yZ3MuZmlsdGVyKGZ1bmN0aW9uKGVsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsLm5hbWUgPT09IG9yZ05hbWU7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgUGFzc3BvcnQuZ2V0TFBVcyhvcmdhblswXS5pZClcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHZtLmxwdXMgPSBkYXRhO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4vL1xuLy8gICAgICAgIGZ1bmN0aW9uIGdldFRDbGFzc2VzKCkge1xuLy8gICAgICAgICAgICBQYXNzcG9ydC5nZXRUQ2xhc3NlcygpXG4vLyAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4vLyAgICAgICAgICAgICAgICAgICAgdm0udGNsYXNzZXMuYWxsID0gZGF0YTtcbi8vICAgICAgICAgICAgICAgIH0pO1xuLy8gICAgICAgIH1cbi8vXG4vLyAgICAgICAgZnVuY3Rpb24gcHJvY0tleVByZXNzKGNsaWNrRXZlbnQsIGFycikge1xuLy8gICAgICAgICAgICAvLyBDaGVjayBmb3IgUmV0dXJuIChFbnRlcikga2V5IHByZXNzZWRcbi8vICAgICAgICAgICAgaWYgKGNsaWNrRXZlbnQud2hpY2ggPT09IDEzKSB7XG4vLyAgICAgICAgICAgICAgICBjbGlja0V2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4vLyAgICAgICAgICAgICAgICBhZGRUb0NvbGxlY3Rpb24oYXJyLCBjbGlja0V2ZW50LnRhcmdldC52YWx1ZSk7XG4vLyAgICAgICAgICAgICAgICBjbGlja0V2ZW50LnRhcmdldC52YWx1ZSA9ICcnO1xuLy8gICAgICAgICAgICB9XG4vLyAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNldFNlbGVjdGVkKHNlbGVjdGVkLCBpdGVtKSB7XG4gICAgICAgICAgICB2YXIgaWQgPSBpdGVtLmlkLFxuICAgICAgICAgICAgICAgIGluZGV4ID0gc2VsZWN0ZWQuaW5kZXhPZihpZCk7XG4gICAgICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgc2VsZWN0ZWQuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICBpdGVtLnNlbGVjdGVkID0gZmFsc2U7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGl0ZW0uc2VsZWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHNlbGVjdGVkLnB1c2goaWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gdXBsb2FkKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHZhciBmaWVsZG5hbWUgPSBlbGVtZW50Lm5hbWU7XG4gICAgICAgICAgICBhbmd1bGFyLmZvckVhY2goZWxlbWVudC5maWxlcywgZnVuY3Rpb24oZmlsZSkge1xuICAgICAgICAgICAgICAgIFVwbG9hZC51cGxvYWQoe1xuICAgICAgICAgICAgICAgICAgICB1cmw6ICcvYXBpL3VwbG9hZC8nLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7ZmlsZXVwbG9hZDogZmlsZX1cbiAgICAgICAgICAgICAgICB9KS5cbiAgICAgICAgICAgICAgICB0aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZtLnJlcG9ydC5maWxlc1tmaWVsZG5hbWVdLnB1c2gocmVzcG9uc2UuZGF0YS5pZCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHZtLnJlcG9ydC5maWxlcyk7XG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yIHN0YXR1czogJyArIHJlc3BvbnNlLnN0YXR1cyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCdhcHAuZGVwYXJ0bWVudCcpXG4gICAgICAgIC5mYWN0b3J5KCdEZXBhcnRtZW50JywgRGVwYXJ0bWVudCk7XG5cbiAgICBEZXBhcnRtZW50LiRpbmplY3QgPSBbJyRyZXNvdXJjZSddO1xuXG4gICAgZnVuY3Rpb24gRGVwYXJ0bWVudCgkcmVzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuICRyZXNvdXJjZSgnL2FwaS9kZXBhcnRtZW50LzpkZXBJZC8nLCB7fSwge1xuICAgICAgICAgICAgbWVhc3VyZXJzOiB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnZ2V0JyxcbiAgICAgICAgICAgICAgICBpc0FycmF5OiB0cnVlLFxuICAgICAgICAgICAgICAgIHBhcmFtczoge2RlcElkOiAxfSxcbiAgICAgICAgICAgICAgICB1cmw6ICcvYXBpL2RlcGFydG1lbnQvOmRlcElkL21lYXN1cmVyLydcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgICAgIC5ydW4oWyckaHR0cCcsXG4gICAgICAgICAgICBmdW5jdGlvbigkaHR0cCkge1xuICAgICAgICAgICAgICAgICRodHRwLmRlZmF1bHRzLnhzcmZIZWFkZXJOYW1lID0gJ1gtQ1NSRlRva2VuJztcbiAgICAgICAgICAgICAgICAkaHR0cC5kZWZhdWx0cy54c3JmQ29va2llTmFtZSA9ICdjc3JmdG9rZW4nO1xuICAgICAgICB9XSk7XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCdhcHAubG9naW4nKVxuICAgICAgICAuY29udHJvbGxlcignTG9naW5Db250cm9sbGVyJywgTG9naW5Db250cm9sbGVyKTtcblxuICAgIGZ1bmN0aW9uIExvZ2luQ29udHJvbGxlcihBdXRoZW50aWNhdGlvbikge1xuICAgICAgICAnbmdJbmplY3QnO1xuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuXG4gICAgICAgIHZtLmxvZ2luID0gbG9naW47XG5cbiAgICAgICAgYWN0aXZhdGUoKTtcblxuICAgICAgICBmdW5jdGlvbiBsb2dpbigpIHtcbiAgICAgICAgICAgIEF1dGhlbnRpY2F0aW9uLmxvZ2luKHZtLmVtYWlsLCB2bS5wYXNzd29yZCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgICAgICAgIGlmIChBdXRoZW50aWNhdGlvbi5pc0F1dGhlbnRpY2F0ZWQoKSkge1xuICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnaG9tZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufSkoKTtcblxuIiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnYXBwLm1haW4nKVxuICAgICAgICAuY29udHJvbGxlcignTWFpbkNvbnRyb2xsZXInLCBNYWluQ29udHJvbGxlcik7XG5cbiAgICBNYWluQ29udHJvbGxlci4kaW5qZWN0ID0gWydBdXRoZW50aWNhdGlvbicsICckbG9jYXRpb24nLCAnQ29va2llcycsICckcm9vdFNjb3BlJ107XG5cbiAgICBmdW5jdGlvbiBNYWluQ29udHJvbGxlcihBdXRoZW50aWNhdGlvbiwgJGxvY2F0aW9uLCBDb29raWVzLCAkcm9vdFNjb3BlKSB7XG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG4gICAgICAgIHZtLm1lbnUgPSBbXTtcblxuICAgICAgICBhY3RpdmF0ZSgpO1xuXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgICAgICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICAgICAgICBpZiAoIUF1dGhlbnRpY2F0aW9uLmlzQXV0aGVudGljYXRlZCgpKSB7XG4gICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy9sb2dpbicpO1xuICAgICAgICAgICAgfSBcblxuICAgICAgICAgICAgJHJvb3RTY29wZS4kb24oJ2Nva2tpZXNTZXQnLCBmdW5jdGlvbihldmVudCwgZGF0YSkge1xuICAgICAgICAgICAgICAgIGlmIChkYXRhID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdm0ubWVudSA9IFtdO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNldHVwTWVudSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBzZXR1cE1lbnUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNldHVwTWVudSgpIHtcbiAgICAgICAgICAgICAgICB2bS5tZW51ID0gW3tuYW1lOiAn0J/RgNC+0YTQuNC70YwnLCBsaW5rOiAn0J/RgNC+0YTQuNC70YwnLCByZWY6ICdwcm9maWxlJ31dO1xuXG4gICAgICAgICAgICAgICAgdmFyIGNvb2tpZXMgPSBDb29raWVzLmdldCgpO1xuICAgICAgICAgICAgICAgIGlmIChjb29raWVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlcG9ydF90eXBlcyA9IGNvb2tpZXMuZGVwYXJ0bWVudC5yZXBvcnRfdHlwZXM7XG4gICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChyZXBvcnRfdHlwZXMsIGZ1bmN0aW9uKHJlcG9ydCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdm0ubWVudS5wdXNoKHtuYW1lOiByZXBvcnQubmFtZSwgbGluazogcmVwb3J0Lm5hbWUsIHJlZjogcmVwb3J0LnVybH0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB2bS5pc0F1dGhlbnRpY2F0ZWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBBdXRoZW50aWNhdGlvbi5pc0F1dGhlbnRpY2F0ZWQoKTtcbiAgICAgICAgfTtcbiAgICB9XG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnYXBwLnJlZ2lzdGVyJylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ1JlZ2lzdGVyQ29udHJvbGxlcicsIFJlZ2lzdGVyQ29udHJvbGxlcik7XG5cbiAgICBSZWdpc3RlckNvbnRyb2xsZXIuJGluamVjdCA9IFsnQXV0aGVudGljYXRpb24nLCAnRGVwYXJ0bWVudCddO1xuXG4gICAgZnVuY3Rpb24gUmVnaXN0ZXJDb250cm9sbGVyKEF1dGhlbnRpY2F0aW9uLCBEZXBhcnRtZW50KSB7XG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG5cbiAgICAgICAgdm0ubG9hZERlcGFydG1lbnRzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBEZXBhcnRtZW50LnF1ZXJ5KGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICB2bS5hbGxEZXBzID0gZGF0YTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZtLnJlZ2lzdGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBBdXRoZW50aWNhdGlvbi5yZWdpc3Rlcih2bS5lbWFpbCwgdm0ucGFzc3dvcmQsIHZtLmRlcGFydG1lbnQuaWQpXG4gICAgICAgICAgICAgICAgLnRoZW4ocmVnaXN0ZXJTdWNjZXNzLCByZWdpc3RlckZhaWwpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGFjdGl2YXRlKCk7XG5cbiAgICAgICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICAgICAgICB2bS5sb2FkRGVwYXJ0bWVudHMoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHJlZ2lzdGVyU3VjY2VzcygpIHtcbiAgICAgICAgICAgIEF1dGhlbnRpY2F0aW9uLmxvZ2luKHZtLmVtYWlsLCB2bS5wYXNzd29yZCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiByZWdpc3RlckZhaWwoKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnUmVnaXN0cmF0aW9uIGZhaWxlZCcpO1xuICAgICAgICB9XG4gICAgfVxufSkoKTtcblxuIiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnYXBwLmNvbmZpZycpXG4gICAgICAgIC5jb25maWcoY29uZmlnKVxuICAgICAgICAucnVuKHJ1bik7XG5cbiAgICBjb25maWcuJGluamVjdCA9IFtcbiAgICAgICAgJyRzdGF0ZVByb3ZpZGVyJyxcbiAgICAgICAgJyR1cmxSb3V0ZXJQcm92aWRlcicsXG4gICAgICAgICckcmVzb3VyY2VQcm92aWRlcicsXG4gICAgICAgICckbG9jYXRpb25Qcm92aWRlcidcbiAgICBdO1xuXG4gICAgZnVuY3Rpb24gY29uZmlnKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIsICRyZXNvdXJjZVByb3ZpZGVyLCAkbG9jYXRpb25Qcm92aWRlcikge1xuICAgICAgICAkc3RhdGVQcm92aWRlclxuICAgICAgICAgICAgLnN0YXRlKCdob21lJywge1xuICAgICAgICAgICAgICAgIHVybDogJy8nXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnN0YXRlKCdsb2dpbicsIHtcbiAgICAgICAgICAgICAgICB1cmw6ICcvbG9naW4nLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdMb2dpbkNvbnRyb2xsZXInLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9zdGF0aWMvc3JjL2FwcC91c2VyL2xvZ2luLnRwbC5odG1sJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5zdGF0ZSgncmVnaXN0ZXInLCB7XG4gICAgICAgICAgICAgICAgdXJsOiAnL3JlZ2lzdGVyJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnUmVnaXN0ZXJDb250cm9sbGVyJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvc3RhdGljL3NyYy9hcHAvdXNlci9yZWdpc3Rlci50cGwuaHRtbCdcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuc3RhdGUoJ3Byb2ZpbGUnLCB7XG4gICAgICAgICAgICAgICAgdXJsOiAnL3Byb2ZpbGUnLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdVc2VyRGF0YUNvbnRyb2xsZXInLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9zdGF0aWMvc3JjL2FwcC91c2VyL3Byb2ZpbGUudHBsLmh0bWwnXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnN0YXRlKCd1cGxvYWQnLCB7XG4gICAgICAgICAgICAgICAgdXJsOiAnL3VwbG9hZCcsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ1VwbG9hZENvbnRyb2xsZXInLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9zdGF0aWMvc3JjL2FwcC9maWxlc3RvcmFnZS91cGxvYWQudHBsLmh0bWwnXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnN0YXRlKCdwYXNzcG9ydCcsIHtcbiAgICAgICAgICAgICAgICB1cmw6ICcvcGFzc3BvcnQnLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdQYXNzcG9ydENvbnRyb2xsZXInLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9zdGF0aWMvc3JjL2FwcC9yZXBvcnQvcGFzc3BvcnQudHBsLmh0bWwnXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnN0YXRlKCdyZXBvcnQnLCB7XG4gICAgICAgICAgICAgICAgdXJsOiAnL3JlcG9ydCcsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ1JlcG9ydENvbnRyb2xsZXInLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9zdGF0aWMvc3JjL2FwcC9yZXBvcnQvcmVwb3J0L3JlcG9ydC50cGwuaHRtbCdcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuc3RhdGUoJ3JlcG9ydC1jb250YWluZXInLCB7XG4gICAgICAgICAgICAgICAgdXJsOiAnL3JlcG9ydC1jb250YWluZXInLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdSZXBvcnRDb250YWluZXJDb250cm9sbGVyJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvc3RhdGljL3NyYy9hcHAvcmVwb3J0L3JlcG9ydF9jb250YWluZXIvcmVwb3J0LnRwbC5odG1sJ1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZSgnL2xvZ2luJyk7XG5cbiAgICAgICAgJHJlc291cmNlUHJvdmlkZXIuZGVmYXVsdHMuc3RyaXBUcmFpbGluZ1NsYXNoZXMgPSBmYWxzZTtcblxuICAgICAgICAkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUodHJ1ZSk7XG4gICAgICAgICRsb2NhdGlvblByb3ZpZGVyLmhhc2hQcmVmaXgoJyEnKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBydW4oKSB7XG4gICAgICAgIHZhciBkb2MgPSBhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQpO1xuICAgICAgICBkb2Mub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgbmF2YmFyID0gZG9jLmZpbmQoJy5uYXZiYXItY29sbGFwc2UnKSxcbiAgICAgICAgICAgICAgICBvcGVuZWQgPSBuYXZiYXIuaGFzQ2xhc3MoJ2luJyk7XG4gICAgICAgICAgICBpZiAob3BlbmVkKSB7XG4gICAgICAgICAgICAgICAgbmF2YmFyLmNvbGxhcHNlKCdoaWRlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCdhcHAudG9vbGJhcicpXG4gICAgICAgIC5jb250cm9sbGVyKCdUb29sYmFyQ29udHJvbGxlcicsIFRvb2xiYXJDb250cm9sbGVyKTtcblxuICAgIFRvb2xiYXJDb250cm9sbGVyLiRpbmplY3QgPSBbJ0F1dGhlbnRpY2F0aW9uJ107XG5cbiAgICBmdW5jdGlvbiBUb29sYmFyQ29udHJvbGxlcihBdXRoZW50aWNhdGlvbikge1xuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuXG4gICAgICAgIHZtLmxvZ291dCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgQXV0aGVudGljYXRpb24ubG9nb3V0KCk7XG4gICAgICAgIH07XG4gICAgfVxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ2FwcC5lbmdpbmUuc2VydmljZScpXG4gICAgICAgIC5mYWN0b3J5KCdFbmdpbmUnLCBFbmdpbmUpO1xuXG4gICAgRW5naW5lLiRpbmplY3QgPSBbJyRodHRwJ107XG5cbiAgICBmdW5jdGlvbiBFbmdpbmUoJGh0dHApIHtcbiAgICAgICAgdmFyIGVuZ2luZSA9IHtcbiAgICAgICAgICAgIGdldEFsbEVuZ2luZXM6IGdldEFsbEVuZ2luZXNcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gZW5naW5lO1xuXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgICAgIGZ1bmN0aW9uIGdldEFsbEVuZ2luZXMoKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2VuZ2luZS8nKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnYXBwLnNlcnZlcmRhdGEnKVxuICAgICAgICAuZmFjdG9yeSgnU2VydmVyRGF0YScsIFNlcnZlckRhdGEpO1xuXG4gICAgU2VydmVyRGF0YS4kaW5qZWN0ID0gWyckcmVzb3VyY2UnXTtcblxuICAgIGZ1bmN0aW9uIFNlcnZlckRhdGEoJHJlc291cmNlKSB7XG4gICAgICAgIHJldHVybiAkcmVzb3VyY2UoJy9hcGkvOmNhdGVnb3J5LycpO1xuICAgIH1cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5wYXNzcG9ydCcpXG4gICAgICAgIC5kaXJlY3RpdmUoJ2F1dG9mb2N1cycsIEF1dG9mb2N1c0RpcmVjdGl2ZSk7XG5cbiAgICBBdXRvZm9jdXNEaXJlY3RpdmUuJGluamVjdCA9IFsnJHRpbWVvdXQnXVxuICAgIGZ1bmN0aW9uIEF1dG9mb2N1c0RpcmVjdGl2ZSgkdGltZW91dCkge1xuXHRyZXR1cm4ge1xuXHQgICAgcmVzdHJpY3Q6ICdBJyxcblx0ICAgIGxpbmsgOiBmdW5jdGlvbigkc2NvcGUsICRlbGVtZW50KSB7XG5cdFx0ICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdCAgICAkZWxlbWVudC5mb2N1cygpO1xuXHRcdH0pO1xuXHQgICAgfVxuXHR9XG4gICAgfVxufSkoKTtcblxuIiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAucGFzc3BvcnQnKVxuICAgICAgICAuZGlyZWN0aXZlKCdjaGVja21hcmsnLCBDaGVja21hcmtEaXJlY3RpdmUpO1xuXG4gICAgZnVuY3Rpb24gQ2hlY2ttYXJrRGlyZWN0aXZlKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVxdWlyZTogJ15mb3JtJyxcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICAgICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbSwgYXR0cnMsIGZvcm1Db250cm9sbGVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZvcm1Db250cm9sbGVyLiRuYW1lID09PSAndm0uZG9jc0Zvcm0nKSB7XG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLnNob3dDaGVja21hcmsgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNjb3BlLiR3YXRjaChmb3JtQ29udHJvbGxlci4kbmFtZSArICcuJHZhbGlkJywgZnVuY3Rpb24obmV3VmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld1ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzY29wZS5zaG93Q2hlY2ttYXJrID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLnNob3dDaGVja21hcmsgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNjb3BlOiB0cnVlLFxuICAgICAgICAgICAgdHJhbnNjbHVkZTogdHJ1ZSxcbiAgICAgICAgICAgIHRlbXBsYXRlOiAnPHNwYW4gbmctaWY9XCJzaG93Q2hlY2ttYXJrXCI+JyArXG4gICAgICAgICAgICAgICAgJzxpIGNsYXNzPVwiaWNvbiBpb24tY2hlY2ttYXJrXCIgc3R5bGU9XCJjb2xvcjogIzAwZTY3NlwiPjwvaT4mbmJzcDsnICtcbiAgICAgICAgICAgICAgICAnPC9zcGFuPicgK1xuICAgICAgICAgICAgICAgICc8c3BhbiBuZy10cmFuc2NsdWRlPjwvc3Bhbj4nXG4gICAgICAgIH07XG4gICAgfVxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ2FwcC5wYXNzcG9ydCcpXG4gICAgICAgIC5jb250cm9sbGVyKCdQYXNzcG9ydENvbnRyb2xsZXInLCBQYXNzcG9ydENvbnRyb2xsZXIpO1xuXG4gICAgUGFzc3BvcnRDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICckc3RhdGUnLCAnVXNlckRhdGEnLCAnRGVwYXJ0bWVudCcsICdFbmdpbmUnLCAnUGFzc3BvcnQnLCAnVXBsb2FkJ107XG4gICAgZnVuY3Rpb24gUGFzc3BvcnRDb250cm9sbGVyKCRzY29wZSwgJHN0YXRlLCBVc2VyRGF0YSwgRGVwYXJ0bWVudCwgRW5naW5lLCBQYXNzcG9ydCwgVXBsb2FkKSB7XG5cbiAgICAgICAgJHNjb3BlLnVwbG9hZCA9IHVwbG9hZDtcblxuICAgICAgICB2YXIgdm0gPSB0aGlzLFxuICAgICAgICAgICAgZG9jcyA9IFtcbiAgICAgICAgICAgICAgICB7bmFtZTogJ9CW0YPRgNC90LDQuyDRgNC10LzQvtC90YLQsCDRjdC70LXQutGC0YDQvtC00LLQuNCz0LDRgtC10LvRjycsIHZhbHVlOiB0cnVlfSxcbiAgICAgICAgICAgICAgICB7bmFtZTogJ9CW0YPRgNC90LDQuyDRjdC60YHQv9C70YPQsNGC0LDRhtC40Lgg0Y3Qu9C10LrRgtGA0L7QtNCy0LjQs9Cw0YLQtdC70Y8nLCB2YWx1ZTogdHJ1ZX0sXG4gICAgICAgICAgICAgICAge25hbWU6ICfQmNC90YHRgtGA0YPQutGG0LjRjyDQv9C+INGN0LrRgdC/0LvRg9Cw0YLQsNGG0LjQuCDQt9Cw0LLQvtC00LAt0LjQt9Cz0L7RgtC+0LLQuNGC0LXQu9GPJywgdmFsdWU6IHRydWV9LFxuICAgICAgICAgICAgICAgIHtuYW1lOiAn0J/RgNC+0YLQvtC60L7Qu9GLINGI0YLQsNGC0L3Ri9GFINC40LfQvNC10YDQtdC90LjQuSDQuCDQuNGB0L/Ri9GC0LDQvdC40LknLCB2YWx1ZTogdHJ1ZX0sXG4gICAgICAgICAgICAgICAge25hbWU6ICfQn9Cw0YHQv9C+0YDRgiDQt9Cw0LLQvtC00LAt0LjQt9Cz0L7RgtC+0LLQuNGC0LXQu9GPINC90LAg0LLQt9GA0YvQstC+0LfQsNGJ0LjRidC10L3QvdGL0Lkg0Y3Qu9C10LrRgtGA0L7QtNCy0LjQs9Cw0YLQtdC70YwnLCB2YWx1ZTogdHJ1ZX0sXG4gICAgICAgICAgICAgICAge25hbWU6ICfQodGF0LXQvNCwINGN0LvQtdC60YLRgNC+0YHQvdCw0LHQttC10L3QuNGPINGN0LvQtdC60YLRgNC+0LTQstC40LPQsNGC0LXQu9GPJywgdmFsdWU6IHRydWV9XG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgcGFnZXMgPSBbXG4gICAgICAgICAgICAgICAgJ3RlYW0udHBsLmh0bWwnLFxuICAgICAgICAgICAgICAgICdtZWFzdXJlcnMudHBsLmh0bWwnLFxuICAgICAgICAgICAgICAgICdscHUudHBsLmh0bWwnLFxuICAgICAgICAgICAgICAgICdkYXRlcy50cGwuaHRtbCcsXG4gICAgICAgICAgICAgICAgJ2VuZ2luZXMudHBsLmh0bWwnLFxuICAgICAgICAgICAgICAgICd2YWx1ZXMudHBsLmh0bWwnLFxuICAgICAgICAgICAgICAgICdkb2NzLnRwbC5odG1sJyxcbiAgICAgICAgICAgICAgICAncGhvdG9zLnRwbC5odG1sJyxcbiAgICAgICAgICAgICAgICAndGhlcm0udHBsLmh0bWwnLFxuICAgICAgICAgICAgICAgICd2aWJyby50cGwuaHRtbCcsXG4gICAgICAgICAgICAgICAgJ3Jlc2lzdGFuY2UudHBsLmh0bWwnLFxuICAgICAgICAgICAgICAgICdzaWduZXJzLnRwbC5odG1sJ1xuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIHJhbmtzID0gW1xuICAgICAgICAgICAgICAgICfRgNGD0LrQvtCy0L7QtNC40YLQtdC70Ywg0LHRgNC40LPQsNC00YsnLFxuICAgICAgICAgICAgICAgICfQt9Cw0LwuINGA0YPQutC+0LLQvtC00LjRgtC10LvRjyDQsdGA0LjQs9Cw0LTRiycsXG4gICAgICAgICAgICAgICAgJ9GH0LvQtdC9INCx0YDQuNCz0LDQtNGLJ1xuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIG1lYXN1cmVycyA9IHtcbiAgICAgICAgICAgICAgICBhbGw6IERlcGFydG1lbnQubWVhc3VyZXJzKCksXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWQ6IFtdLFxuICAgICAgICAgICAgICAgIHNvcnRPcmRlcjogJ25hbWUnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZW5naW5lID0ge1xuICAgICAgICAgICAgICAgIGFsbDogW10sXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgJ3R5cGUnOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgJ3NlcmlhbF9udW1iZXInOiAwXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzb3J0T3JkZXI6ICduYW1lJ1xuICAgICAgICAgICAgfTtcblxuXG4gICAgICAgIHZtLmFkZEVtcGxveWVlID0gYWRkRW1wbG95ZWU7XG4gICAgICAgIHZtLmFsbEVtcGxveWVlcyA9IFtdO1xuICAgICAgICB2bS5jcmVhdGVQYXNzcG9ydCA9IGNyZWF0ZVBhc3Nwb3J0O1xuICAgICAgICB2bS5lbmdpbmUgPSBlbmdpbmU7XG4gICAgICAgIHZtLndvcmtCZWdpbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgdm0ud29ya0VuZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdm0uaW52ZXN0aWdhdGlvbkRhdGUgPSB1bmRlZmluZWQ7XG4gICAgICAgIHZtLmxwdXMgPSB7fTtcbiAgICAgICAgdm0ub3JncyA9IHt9O1xuICAgICAgICB2bS5wYWdlcyA9IHBhZ2VzO1xuICAgICAgICB2bS50Y2xhc3NlcyA9IHthbGw6IFtdLCBzZWxlY3RlZDogJyd9O1xuICAgICAgICB2bS5nZXRMUFVzID0gZ2V0TFBVcztcbiAgICAgICAgdm0ubWVhc3VyZXJzID0gbWVhc3VyZXJzO1xuICAgICAgICB2bS5yYW5rcyA9IHJhbmtzO1xuICAgICAgICB2bS5yZXBvcnQgPSB7XG4gICAgICAgICAgICB0ZWFtOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBtZWFzdXJlcnM6IG1lYXN1cmVycy5zZWxlY3RlZCxcbiAgICAgICAgICAgIGZpbGVzOiB7fSxcbiAgICAgICAgICAgIHRoZXJtOiB7fSxcbiAgICAgICAgICAgIHZpYnJvOiB7fSxcbiAgICAgICAgICAgIG9yZGVyOiB7fSxcbiAgICAgICAgICAgIHJlc2lzdGFuY2U6IHt9XG4gICAgICAgIH07XG4gICAgICAgIHZtLnNldFNlbGVjdGVkID0gc2V0U2VsZWN0ZWQ7XG5cbiAgICAgICAgYWN0aXZhdGUoKTtcblxuICAgICAgICBmdW5jdGlvbiB1cGxvYWQoZWxlbWVudCkge1xuICAgICAgICAgICAgdmFyIGZpZWxkbmFtZSA9IGVsZW1lbnQubmFtZTtcbiAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChlbGVtZW50LmZpbGVzLCBmdW5jdGlvbihmaWxlKSB7XG4gICAgICAgICAgICAgICAgVXBsb2FkLnVwbG9hZCh7XG4gICAgICAgICAgICAgICAgICAgIHVybDogJy9hcGkvdXBsb2FkLycsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtmaWxldXBsb2FkOiBmaWxlfVxuICAgICAgICAgICAgICAgIH0pLlxuICAgICAgICAgICAgICAgIHRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdm0ucmVwb3J0LmZpbGVzW2ZpZWxkbmFtZV0gPSByZXNwb25zZS5kYXRhLmlkO1xuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdFcnJvciBzdGF0dXM6ICcgKyByZXNwb25zZS5zdGF0dXMpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgICAgICAgIHZtLnJlcG9ydC50ZWFtID0gW3snbmFtZSc6ICcnLCAncmVxdWlyZWQnOiB0cnVlfV07XG4gICAgICAgICAgICB2bS5yZXBvcnQuZG9jcyA9IGRvY3M7XG4gICAgICAgICAgICBnZXRFbXBsb3llZXMoKTtcbiAgICAgICAgICAgIGdldEVuZ2luZXMoKTtcbiAgICAgICAgICAgIGdldE9yZ3MoKTtcbiAgICAgICAgICAgIGdldFRDbGFzc2VzKCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBhZGRFbXBsb3llZSgpIHtcbiAgICAgICAgICAgIHZtLnJlcG9ydC50ZWFtLnB1c2goe1xuICAgICAgICAgICAgICAgICduYW1lJzogJycsICdyZXF1aXJlZCc6IGZhbHNlXG4gICAgICAgICAgICB9KTtcbi8vICAgICAgICAgICAgY29uc29sZS5kaXIoJ3RlYW06ICcgKyBKU09OLnN0cmluZ2lmeSh2bS5yZXBvcnQudGVhbSkpO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZVBhc3Nwb3J0KCkge1xuXG4vLyAgICAgICAgICAgIGNvbnNvbGUubG9nKCdkb2NzICcgKyBKU09OLnN0cmluZ2lmeSh2bS5yZXBvcnQuZG9jcykpO1xuLy8gICAgICAgICAgICBjb25zb2xlLmxvZygnaW52ZXN0aWdhdGlvbkRhdGUgJyArIHZtLmludmVzdGlnYXRpb25EYXRlLnRvTG9jYWxlU3RyaW5nKCkpO1xuLy8gICAgICAgICAgICBjb25zb2xlLmxvZygnYmVnaW4gJyArIHZtLndvcmtCZWdpbik7XG4vLyAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlbmQgJyArIHZtLndvcmtFbmQudG9Mb2NhbGVTdHJpbmcoKSk7XG4vLyAgICAgICAgICAgIFBhc3Nwb3J0LmNyZWF0ZVBhc3Nwb3J0KHZtLndvcmtCZWdpbik7XG4gICAgICAgICAgICB2bS5yZXBvcnQudHlwZSA9ICdwYXNzcG9ydCc7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygndGVhbTonLCBKU09OLnN0cmluZ2lmeSh2bS5yZXBvcnQpKTtcbi8vICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgZGVsZXRlIHZtLnJlcG9ydC50ZWFtWzBdLnJlcXVpcmVkO1xuLy8gICAgICAgICAgICBjb25zb2xlLmRpcigndm0udGNsYXNzZXMuYWxsOiAnICsgSlNPTi5zdHJpbmdpZnkodm0udGNsYXNzZXMuYWxsKSk7XG4gICAgICAgICAgICB2bS5yZXBvcnQudGhlcm0udGNsYXNzID0gdm0udGNsYXNzZXMuYWxsLmZpbHRlcihmdW5jdGlvbihlbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBlbC5uYW1lID09PSB2bS50Y2xhc3Nlcy5zZWxlY3RlZDtcbiAgICAgICAgICAgIH0pWzBdLmlkO1xuLy8gICAgICAgICAgICBjb25zb2xlLmRpcignc2VsZWN0ZWQgY2xhc3M6ICcgKyBKU09OLnN0cmluZ2lmeSh2bS5yZXBvcnQudGhlcm0pKTtcbiAgICAgICAgICAgIFBhc3Nwb3J0LmNyZWF0ZVBhc3Nwb3J0KHZtLnJlcG9ydCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRFbXBsb3llZXMoKSB7XG4gICAgICAgICAgICBVc2VyRGF0YS5nZXRBbGxVc2VycygpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICB2bS5hbGxFbXBsb3llZXMgPSBkYXRhO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cblxuICAgICAgICBmdW5jdGlvbiBnZXRFbmdpbmVzKCkge1xuICAgICAgICAgICAgRW5naW5lLmdldEFsbEVuZ2luZXMoKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgdm0uZW5naW5lLmFsbCA9IGRhdGE7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRPcmdzKCkge1xuICAgICAgICAgICAgUGFzc3BvcnQuZ2V0T3JncygpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICB2bS5vcmdzID0gZGF0YTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldExQVXMob3JnTmFtZSkge1xuICAgICAgICAgICAgdmFyIG9yZ2FuID0gdm0ub3Jncy5maWx0ZXIoZnVuY3Rpb24oZWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZWwubmFtZSA9PT0gb3JnTmFtZTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBQYXNzcG9ydC5nZXRMUFVzKG9yZ2FuWzBdLmlkKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgdm0ubHB1cyA9IGRhdGE7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRUQ2xhc3NlcygpIHtcbiAgICAgICAgICAgIFBhc3Nwb3J0LmdldFRDbGFzc2VzKClcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHZtLnRjbGFzc2VzLmFsbCA9IGRhdGE7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZXRTZWxlY3RlZChzZWxlY3RlZCwgaXRlbSkge1xuICAgICAgICAgICAgdmFyIGlkID0gaXRlbS5pZCxcbiAgICAgICAgICAgICAgICBpbmRleCA9IHNlbGVjdGVkLmluZGV4T2YoaWQpO1xuICAgICAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIHNlbGVjdGVkLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgaXRlbS5zZWxlY3RlZCA9IGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpdGVtLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBzZWxlY3RlZC5wdXNoKGlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCdhcHAucGFzc3BvcnQuc2VydmljZScpXG4gICAgICAgIC5mYWN0b3J5KCdQYXNzcG9ydCcsIFBhc3Nwb3J0KTtcblxuICAgIFBhc3Nwb3J0LiRpbmplY3QgPSBbJyRodHRwJ107XG5cbiAgICBmdW5jdGlvbiBQYXNzcG9ydCgkaHR0cCkge1xuICAgICAgICB2YXIgcGFzc3BvcnQgPSB7XG4gICAgICAgICAgICBjcmVhdGVQYXNzcG9ydDogY3JlYXRlUGFzc3BvcnQsXG4gICAgICAgICAgICBnZXRMUFVzOiBnZXRMUFVzLFxuICAgICAgICAgICAgZ2V0T3JnczogZ2V0T3JncyxcbiAgICAgICAgICAgIGdldFRDbGFzc2VzOiBnZXRUQ2xhc3Nlc1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBwYXNzcG9ydDtcblxuICAgICAgICBmdW5jdGlvbiBjcmVhdGVQYXNzcG9ydChyZXBvcnRfZGF0YSkge1xuICAgICAgICAgICAgJGh0dHAucG9zdCgnL3JlcG9ydC8nLFxuICAgICAgICAgICAgICAgICAgICB7J3JlcG9ydF9kYXRhJzogcmVwb3J0X2RhdGF9LFxuICAgICAgICAgICAgICAgICAgICB7IHJlc3BvbnNlVHlwZTogJ2FycmF5YnVmZmVyJyxcbiAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ31cbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMsIGhlYWRlcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZpbGUgPSBuZXcgQmxvYihbZGF0YV0sIHt0eXBlOiAnYXBwbGljYXRpb24vcGRmJ30pO1xuICAgICAgICAgICAgICAgICAgICBzYXZlQXMoZmlsZSwgJ3JlcG9ydC5wZGYnKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGhlYWRlcnM7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRMUFVzKG9yZ0lkKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL29yZ2FuaXphdGlvbi8nICsgb3JnSWQgKyAnL2xwdS8nKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEuZGF0YTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldE9yZ3MoKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL29yZ2FuaXphdGlvbi8nKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEuZGF0YTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldFRDbGFzc2VzKCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS90Y2xhc3MvJylcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhLmRhdGE7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAucGFzc3BvcnQnKVxuICAgICAgICAuZGlyZWN0aXZlKCd2YWxpZEZpbGUnLCBWYWxpZEZpbGVEaXJlY3RpdmUpO1xuXG4vLyAgICBWYWxpZEZpbGVEaXJlY3RpdmUuJGluamVjdCA9IFsnVXBsb2FkJ107XG4vL1xuLy8gICAgZnVuY3Rpb24gVmFsaWRGaWxlRGlyZWN0aXZlKFVwbG9hZCkge1xuLy8gICAgICAgIGZ1bmN0aW9uIHVwbG9hZChmaWxlKSB7XG4vLyAgICAgICAgICAgIGNvbnNvbGUubG9nKCd1cGxvYWRpbmcgZmlsZSAnICsgZmlsZSk7XG4vLyAgICAgICAgICAgIFVwbG9hZC51cGxvYWQoe1xuLy8gICAgICAgICAgICAgICAgdXJsOiAnL2FwaS91cGxvYWQvJyxcbi8vICAgICAgICAgICAgICAgIGRhdGE6IHtmaWxldXBsb2FkOiBmaWxlfVxuLy8gICAgICAgICAgICB9KS5cbi8vICAgICAgICAgICAgdGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuLy8gICAgICAgICAgICAgICAgdm0ucmVwb3J0LmZpbGVzW2ZpZWxkbmFtZV0gPSByZXNwb25zZS5kYXRhLmlkO1xuLy8gICAgICAgICAgICB9LCBmdW5jdGlvbihyZXNwb25zZSkge1xuLy8gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yIHN0YXR1czogJyArIHJlc3BvbnNlLnN0YXR1cyk7XG4vLyAgICAgICAgICAgIH0pO1xuLy8gICAgICAgIH1cblxuICAgIGZ1bmN0aW9uIFZhbGlkRmlsZURpcmVjdGl2ZSgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlcXVpcmU6ICduZ01vZGVsJyxcbiAgICAgICAgICAgIHNjb3BlOiB0cnVlLFxuICAgICAgICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsLCBhdHRycywgbmdNb2RlbCl7XG4gICAgICAgICAgICAgICAgZWwuYmluZCgnY2hhbmdlJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZ01vZGVsLiRzZXRWaWV3VmFsdWUoZWwudmFsKCkpO1xuLy8gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZmlsZW5hbWUgJyArIGVsLnZhbCgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5nTW9kZWwuJHJlbmRlcigpO1xuLy8gICAgICAgICAgICAgICAgICAgICAgICB1cGxvYWQoc2NvcGUuaW1nKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCdhcHAudXBsb2FkJylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ1VwbG9hZENvbnRyb2xsZXInLCBVcGxvYWRDb250cm9sbGVyKTtcblxuICAgIFVwbG9hZENvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJ1VwbG9hZCcsICdVcGxvYWRTZXJ2aWNlJ107XG5cbiAgICBmdW5jdGlvbiBVcGxvYWRDb250cm9sbGVyKCRzY29wZSwgVXBsb2FkLCBVcGxvYWRTZXJ2aWNlKSB7XG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG5cbiAgICAgICAgJHNjb3BlLmZpbGVTZWxlY3RlZCA9IGZpbGVTZWxlY3RlZDtcblxuICAgICAgICB2bS5maWxlcyA9IFtdO1xuICAgICAgICB2bS51cGxvYWQgPSB1cGxvYWQ7XG4gICAgICAgIHZtLnVwbG9hZGVkRmlsZXMgPSBbXTtcbiAgICAgICAgdm0ucmVtb3ZlID0gcmVtb3ZlO1xuICAgICAgICB2bS5zZWxlY3RlZCA9IFtdO1xuICAgICAgICB2bS5zb3J0T3JkZXIgPSAnLXVwbG9hZGVkX2F0JztcblxuICAgICAgICBhY3RpdmF0ZSgpO1xuXG4gICAgICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuICAgICAgICAgICAgZ2V0VXBsb2FkZWRGaWxlcygpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZmlsZVNlbGVjdGVkKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHVwbG9hZChlbGVtZW50LmZpbGVzKTtcbiAgICAgICAgICAgIGdldFVwbG9hZGVkRmlsZXMoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHVwbG9hZChmaWxlcykge1xuICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKGZpbGVzLCBmdW5jdGlvbihmaWxlKSB7XG4gICAgICAgICAgICAgICAgVXBsb2FkLnVwbG9hZCh7XG4gICAgICAgICAgICAgICAgICAgIHVybDogJy9hcGkvdXBsb2FkLycsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtmaWxldXBsb2FkOiBmaWxlfVxuICAgICAgICAgICAgICAgIH0pLlxuICAgICAgICAgICAgICAgIHRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGdldFVwbG9hZGVkRmlsZXMoKTtcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbihyZXNwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdFcnJvciBzdGF0dXM6ICcgKyByZXNwLnN0YXR1cyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldFVwbG9hZGVkRmlsZXMoKSB7XG4gICAgICAgICAgICBVcGxvYWRTZXJ2aWNlLnF1ZXJ5KClcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihyZXNwKSB7XG4gICAgICAgICAgICAgICAgICAgIHZtLnVwbG9hZGVkRmlsZXMgPSByZXNwO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlKCkge1xuICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKHZtLnNlbGVjdGVkLCBmdW5jdGlvbihmaWxlKSB7XG4gICAgICAgICAgICAgICAgVXBsb2FkU2VydmljZS5yZW1vdmUoZmlsZS5pZCk7XG4gICAgICAgICAgICAgICAgcmVtb3ZlRmlsZUVudHJ5KGZpbGUuaWQpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHZtLnNlbGVjdGVkID0gW107XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiByZW1vdmVGaWxlRW50cnkoaWQpIHtcbiAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaCh2bS51cGxvYWRlZEZpbGVzLCBmdW5jdGlvbih2LCBrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHZtLnVwbG9hZGVkRmlsZXNba10uaWQgPT09IGlkKSB7XG4gICAgICAgICAgICAgICAgICAgIHZtLnVwbG9hZGVkRmlsZXMuc3BsaWNlKGssIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ2FwcC51cGxvYWQuc2VydmljZScpXG4gICAgICAgIC5mYWN0b3J5KCdVcGxvYWRTZXJ2aWNlJywgVXBsb2FkU2VydmljZSk7XG5cbiAgICBVcGxvYWRTZXJ2aWNlLiRpbmplY3QgPSBbJyRodHRwJ107XG4gICAgZnVuY3Rpb24gVXBsb2FkU2VydmljZSgkaHR0cCkge1xuICAgICAgICB2YXIgc2VydmljZSA9IHtcbiAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeSxcbiAgICAgICAgICAgIHJlbW92ZTogcmVtb3ZlXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHNlcnZpY2U7XG5cbiAgICAgICAgZnVuY3Rpb24gcXVlcnkoKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2ZpbGUvJykuXG4gICAgICAgICAgICAgICAgdGhlbihmdW5jdGlvbihyZXNwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNwLmRhdGE7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiByZW1vdmUoaWQpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5kZWxldGUoJy9hcGkvZmlsZS8nICsgaWQgKyAnLycpLlxuICAgICAgICAgICAgICAgIHRoZW4oZnVuY3Rpb24ocmVzcCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzcC5kYXRhO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLmRhdGVwaWNrZXInKVxuICAgICAgICAuY29udHJvbGxlcignRGF0ZXBpY2tlckNvbnRyb2xsZXInLCBEYXRlcGlja2VyQ29udHJvbGxlcik7XG5cbiAgICBEYXRlcGlja2VyQ29udHJvbGxlci4kaW5qZWN0ID0gWyd1aWJEYXRlcGlja2VyUG9wdXBDb25maWcnXTtcblxuICAgIGZ1bmN0aW9uIERhdGVwaWNrZXJDb250cm9sbGVyKHVpYkRhdGVwaWNrZXJQb3B1cENvbmZpZykge1xuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuXG4gICAgICAgIHVpYkRhdGVwaWNrZXJQb3B1cENvbmZpZy5jbG9zZVRleHQgPSAn0JfQsNC60YDRi9GC0YwnO1xuICAgICAgICB1aWJEYXRlcGlja2VyUG9wdXBDb25maWcuY3VycmVudFRleHQgPSAn0KHQtdCz0L7QtNC90Y8nO1xuICAgICAgICB1aWJEYXRlcGlja2VyUG9wdXBDb25maWcuY2xlYXJUZXh0ID0gJ9Ce0YfQuNGB0YLQuNGC0YwnO1xuLy8gICAgICAgIHVpYkRhdGVwaWNrZXJQb3B1cENvbmZpZy5odG1sNVR5cGVzID0gJ2RhdGV0aW1lLWxvY2FsJztcblxuXG4gICAgICAgIHZtLmRhdGVPcHRpb25zID0ge1xuICAgICAgICAgICAgc3RhcnRpbmdEYXk6IDFcbiAgICAgICAgfTtcblxuICAgICAgICB2bS55ZWFyT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGRhdGVwaWNrZXJNb2RlOiAneWVhcicsXG4gICAgICAgICAgICBtYXhNb2RlOiAneWVhcicsXG4gICAgICAgICAgICBtaW5Nb2RlOiAneWVhcicsXG4gICAgICAgICAgICBmb3JtYXRZZWFyOiAneXl5eSdcbiAgICAgICAgfTtcblxuICAgICAgICB2bS5vcGVuID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdm0ucG9wdXAub3BlbmVkID0gdHJ1ZTtcbiAgICAgICAgfTtcblxuICAgICAgICB2bS5wb3B1cCA9IHtcbiAgICAgICAgICBvcGVuZWQ6IGZhbHNlXG4gICAgICAgIH07XG5cbi8vICAgICAgICB2YXIgdG9tb3Jyb3cgPSBuZXcgRGF0ZSgpO1xuLy8gICAgICAgIHRvbW9ycm93LnNldERhdGUodG9tb3Jyb3cuZ2V0RGF0ZSgpICsgMSk7XG4vLyAgICAgICAgdmFyIGFmdGVyVG9tb3Jyb3cgPSBuZXcgRGF0ZSgpO1xuLy8gICAgICAgIGFmdGVyVG9tb3Jyb3cuc2V0RGF0ZSh0b21vcnJvdy5nZXREYXRlKCkgKyAxKTtcbi8vICAgICAgICB2bS5ldmVudHMgPSBbXG4vLyAgICAgICAgICB7XG4vLyAgICAgICAgICAgIGRhdGU6IHRvbW9ycm93LFxuLy8gICAgICAgICAgICBzdGF0dXM6ICdmdWxsJ1xuLy8gICAgICAgICAgfSxcbi8vICAgICAgICAgIHtcbi8vICAgICAgICAgICAgZGF0ZTogYWZ0ZXJUb21vcnJvdyxcbi8vICAgICAgICAgICAgc3RhdHVzOiAncGFydGlhbGx5J1xuLy8gICAgICAgICAgfVxuLy8gICAgICAgIF07XG4vL1xuLy8gICAgICAgIGZ1bmN0aW9uIGdldERheUNsYXNzKGRhdGEpIHtcbi8vICAgICAgICAgIHZhciBkYXRlID0gZGF0YS5kYXRlLFxuLy8gICAgICAgICAgICBtb2RlID0gZGF0YS5tb2RlO1xuLy8gICAgICAgICAgaWYgKG1vZGUgPT09ICdkYXknKSB7XG4vLyAgICAgICAgICAgIHZhciBkYXlUb0NoZWNrID0gbmV3IERhdGUoZGF0ZSkuc2V0SG91cnMoMCwwLDAsMCk7XG4vL1xuLy8gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZtLmV2ZW50cy5sZW5ndGg7IGkrKykge1xuLy8gICAgICAgICAgICAgIHZhciBjdXJyZW50RGF5ID0gbmV3IERhdGUodm0uZXZlbnRzW2ldLmRhdGUpLnNldEhvdXJzKDAsMCwwLDApO1xuLy9cbi8vICAgICAgICAgICAgICBpZiAoZGF5VG9DaGVjayA9PT0gY3VycmVudERheSkge1xuLy8gICAgICAgICAgICAgICAgcmV0dXJuIHZtLmV2ZW50c1tpXS5zdGF0dXM7XG4vLyAgICAgICAgICAgICAgfVxuLy8gICAgICAgICAgICB9XG4vLyAgICAgICAgICB9XG4vL1xuLy8gICAgICAgICAgcmV0dXJuICcnO1xuLy8gICAgICAgIH1cbiAgICB9XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCdhcHAudXNlcmRhdGEuY29udHJvbGxlcicpXG4gICAgICAgIC5jb250cm9sbGVyKCdVc2VyRGF0YUNvbnRyb2xsZXInLCBVc2VyRGF0YUNvbnRyb2xsZXIpO1xuXG4gICAgVXNlckRhdGFDb250cm9sbGVyLiRpbmplY3QgPSBbJ1VzZXJEYXRhJ107XG5cbiAgICBmdW5jdGlvbiBVc2VyRGF0YUNvbnRyb2xsZXIoVXNlckRhdGEpIHtcbiAgICAgICAgdmFyIHZtID0gdGhpcztcblxuICAgICAgICB2bS51cGRhdGVQcm9maWxlID0gdXBkYXRlUHJvZmlsZTtcbiAgICAgICAgdm0udXNlcmRhdGEgPSBVc2VyRGF0YTtcblxuICAgICAgICBhY3RpdmF0ZSgpO1xuXG4gICAgICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuICAgICAgICAgICAgVXNlckRhdGEuZ2V0KCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiB1cGRhdGVQcm9maWxlKCkge1xuICAgICAgICAgICAgVXNlckRhdGEudXBkYXRlKCk7XG4gICAgICAgIH1cbiAgICB9XG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnYXBwLnVzZXJkYXRhLnNlcnZpY2UnKVxuICAgICAgICAuZmFjdG9yeSgnVXNlckRhdGEnLCBVc2VyRGF0YSk7XG5cbiAgICBVc2VyRGF0YS4kaW5qZWN0ID0gWydDb29raWVzJywgJyRodHRwJywgJyRxJywgJyR0aW1lb3V0J107XG5cbiAgICBmdW5jdGlvbiBVc2VyRGF0YShDb29raWVzLCAkaHR0cCwgJHEsICR0aW1lb3V0KSB7XG4gICAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICAgICAgZW1haWw6ICcnLFxuICAgICAgICAgICAgZmlyc3RfbmFtZTogJycsXG4gICAgICAgICAgICBsYXN0X25hbWU6ICcnLFxuICAgICAgICAgICAgbWlkZGxlX25hbWU6ICcnLFxuICAgICAgICAgICAgZGVwYXJ0bWVudDogJydcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIHVzZXJkYXRhID0ge1xuICAgICAgICAgICAgY2xlYW46IGNsZWFuLFxuICAgICAgICAgICAgZGF0YTogZGF0YSxcbiAgICAgICAgICAgIGdldDogZ2V0LFxuICAgICAgICAgICAgZ2V0QWxsVXNlcnM6IGdldEFsbFVzZXJzLFxuICAgICAgICAgICAgaXNMb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgICAgIHVwZGF0ZTogdXBkYXRlLFxuICAgICAgICAgICAgdXBkYXRlU3VjY2Vzc2Z1bGw6IGZhbHNlXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHVzZXJkYXRhO1xuXG4gICAgICAgIGZ1bmN0aW9uIGNsZWFuKCkge1xuICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKHVzZXJkYXRhLmRhdGEsIGZ1bmN0aW9uKHYsIGspIHtcbiAgICAgICAgICAgICAgICBkYXRhW2tdID0gJyc7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHZhciBjb29raWUgPSBDb29raWVzLmdldCgpO1xuICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKGNvb2tpZSwgZnVuY3Rpb24odiwgaykge1xuICAgICAgICAgICAgICAgIGlmIChrIGluIGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YVtrXSA9IGNvb2tpZVtrXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldEFsbFVzZXJzKCkge1xuICAgICAgICAgICAgdmFyIGNvb2tpZSA9IENvb2tpZXMuZ2V0KCk7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2RlcGFydG1lbnQvJyArIGNvb2tpZS5kZXBhcnRtZW50LmlkICsgJy91c2VyLycpLnRoZW4oXG4gICAgICAgICAgICAgICAgZ2V0QWxsVXNlcnNTdWNjZXNzXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0QWxsVXNlcnNTdWNjZXNzKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZSgpIHtcbiAgICAgICAgICAgIHZhciBjb29raWUgPSBDb29raWVzLmdldCgpO1xuXG4gICAgICAgICAgICB1c2VyZGF0YS5pc0xvYWRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgdXNlcmRhdGEudXBkYXRlU3VjY2Vzc2Z1bGwgPSBmYWxzZTtcblxuICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKGRhdGEsIGZ1bmN0aW9uKHYsIGspIHtcbiAgICAgICAgICAgICAgICBjb29raWVba10gPSBkYXRhW2tdO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIENvb2tpZXMuc2V0KGNvb2tpZSk7XG4gICAgICAgICAgICByZXR1cm4gdXBkYXRlREIoY29va2llKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZURCKGNvb2tpZSkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLnB1dCgnL2FwaS9kZXBhcnRtZW50LycgKyBjb29raWUuZGVwYXJ0bWVudC5pZCArXG4gICAgICAgICAgICAgICAgICAgICcvdXNlci8nICsgY29va2llLnVzZXJuYW1lICsgJy8nLCB7XG4gICAgICAgICAgICAgICAgZmlyc3RfbmFtZTogZGF0YS5maXJzdF9uYW1lLFxuICAgICAgICAgICAgICAgIGxhc3RfbmFtZTogZGF0YS5sYXN0X25hbWUsXG4gICAgICAgICAgICAgICAgbWlkZGxlX25hbWU6IGRhdGEubWlkZGxlX25hbWUsXG4gICAgICAgICAgICAgICAgZW1haWw6IGRhdGEuZW1haWxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbih1cGRhdGVTdWNjZXNzKVxuICAgICAgICAgICAgLmNhdGNoKHVwZGF0ZUZhaWxlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiB1cGRhdGVTdWNjZXNzKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICB1c2VyZGF0YS5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIHVzZXJkYXRhLnVwZGF0ZVN1Y2Nlc3NmdWxsID0gdHJ1ZTtcblxuICAgICAgICAgICAgLy8gT0staW5kaWNhdG9yIHdpbGwgYmUgc2hvd24gZm9yIDMgc2Vjb25kc1xuICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdXNlcmRhdGEudXBkYXRlU3VjY2Vzc2Z1bGwgPSBmYWxzZTtcbiAgICAgICAgICAgIH0sIDMwMDApO1xuXG4vLyAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRGF0YSBmcm9tIHVwZGF0ZTogJXMnLCBKU09OLnN0cmluZ2lmeShyZXNwb25zZS5kYXRhKSk7XG4vLyAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnU3RhdHVzIGZyb20gdXBkYXRlOiAlcycsIHJlc3BvbnNlLnN0YXR1cyk7XG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUZhaWxlZChlKSB7XG4gICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KGUpO1xuICAgICAgICB9XG4gICAgfVxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLmxvZ2luJylcbiAgICAgICAgLmRpcmVjdGl2ZSgnZ21wSW5wdXQnLCBnbXBJbnB1dCk7XG5cbiAgICBmdW5jdGlvbiBnbXBJbnB1dCAoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXN0cmljdDogJ0UnLFxuLy8gICAgICAgICAgICBjb250cm9sbGVyOiBmdW5jdGlvbigkc2NvcGUsICRlbGVtZW50KSB7XG4vLyAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkZWxlbWVudC5hdHRyKCduYW1lJykpO1xuLy8gICAgICAgICAgICAgICAgJHNjb3BlLmhhc0Vycm9yID0gdGhpcy5maWVsZC4kdG91Y2hlZCAmJiB0aGlzLmZpZWxkLiRpbnZhbGlkO1xuLy9cbi8vICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlKSB7XG4gICAgICAgICAgICAgICAgc2NvcGUuaXNWYWxpZCA9IHNjb3BlLnVzZXJGb3JtLmVtYWlsLiR0b3VjaGVkO1xuLy8gICAgICAgICAgICAgICAgc2NvcGUudXNlckZvcm0uZW1haWwuJHRvdWNoZWQuJHdhdGNoKClcblxuICAgICAgICAgICAgfSxcbi8vICAgICAgICAgICAgY29tcGlsZTogZnVuY3Rpb24odEVsZW0sIHRBdHRycykge1xuLy8gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2F0dHJzOiAnICsgdEF0dHJzLmlkKTtcbi8vICAgICAgICAgICAgICAgIHRFbGVtLmZpbmQoJ2xhYmVsJykuYXR0cignZm9yJywgdEF0dHJzLmlkKTtcbi8vICAgICAgICAgICAgICAgIHRFbGVtLmZpbmQoJ2lucHV0JykuYXR0cignaWQnLCB0QXR0cnMuaWQpO1xuLy8gICAgICAgICAgICAgICAgdEVsZW0uZmluZCgnaW5wdXQnKS5hdHRyKCduYW1lJywgJ2VtYWlsJyk7XG4vLyAgICAgICAgICAgIH0sXG4vLyAgICAgICAgICAgIHNjb3BlOiB7XG4vLyAgICAgICAgICAgICAgICB0eXBlOiAnQCcsXG4vLyAgICAgICAgICAgICAgICBtb2RlbDogJz1uZ01vZGVsJyxcbi8vICAgICAgICAgICAgICAgIGZpZWxkOiAnPScsXG4vLyAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogJ0AnXG4vLyAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9zdGF0aWMvc3JjL2FwcC91c2VyL2dtcC1pbnB1dC5kaXJlY3RpdmUudHBsLmh0bWwnXG4gICAgICAgIH07XG4gICAgfVxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ2FwcC5yZXBvcnQnKVxuICAgICAgICAuY29udHJvbGxlcignUmVwb3J0Q29udHJvbGxlcicsIFJlcG9ydENvbnRyb2xsZXIpO1xuXG4gICAgUmVwb3J0Q29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJHN0YXRlJywgJ1VzZXJEYXRhJywgJ0RlcGFydG1lbnQnLCAnRW5naW5lJywgJ1Bhc3Nwb3J0JywgJ1VwbG9hZCddO1xuICAgIGZ1bmN0aW9uIFJlcG9ydENvbnRyb2xsZXIoJHNjb3BlLCAkc3RhdGUsIFVzZXJEYXRhLCBEZXBhcnRtZW50LCBFbmdpbmUsIFBhc3Nwb3J0LCBVcGxvYWQpIHtcblxuICAgICAgICAkc2NvcGUudXBsb2FkID0gdXBsb2FkO1xuXG4gICAgICAgIHZhciB2bSA9IHRoaXMsXG4gICAgICAgICAgICBwYWdlcyA9IFtcbiAgICAgICAgICAgICAgICAncmVwb3J0L3RlYW0udHBsLmh0bWwnLFxuICAgICAgICAgICAgICAgICdyZXBvcnQvcmVwb3J0X2luZm8udHBsLmh0bWwnLFxuICAgICAgICAgICAgICAgICdtZWFzdXJlcnMudHBsLmh0bWwnLFxuICAgICAgICAgICAgICAgICdscHUudHBsLmh0bWwnLFxuICAgICAgICAgICAgICAgICdyZXBvcnQvZGF0ZXMudHBsLmh0bWwnLFxuICAgICAgICAgICAgICAgICdlbmdpbmVzLnRwbC5odG1sJyxcbiAgICAgICAgICAgICAgICAnb3JkZXIudHBsLmh0bWwnLFxuICAgICAgICAgICAgICAgICdyZXBvcnQvcGhvdG9zLnRwbC5odG1sJyxcbi8vICAgICAgICAgICAgICAgICd2YWx1ZXMudHBsLmh0bWwnLFxuLy8gICAgICAgICAgICAgICAgJ2RvY3MudHBsLmh0bWwnLFxuICAgICAgICAgICAgICAgICd0aGVybS50cGwuaHRtbCcsXG4gICAgICAgICAgICAgICAgJ3ZpYnJvLnRwbC5odG1sJyxcbiAgICAgICAgICAgICAgICAncmVzaXN0YW5jZS50cGwuaHRtbCcsXG4vLyAgICAgICAgICAgICAgICAnc2lnbmVycy50cGwuaHRtbCdcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBjb250cm9sX3R5cGVzID0gW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ9CS0JjQmicsXG4gICAgICAgICAgICAgICAgICAgIGZ1bGxfbmFtZTogJ9CS0LjQt9GD0LDQu9GM0L3Ri9C5INC4INC40LfQvNC10YDQuNGC0LXQu9GM0L3Ri9C5INC60L7QvdGC0YDQvtC70YwnXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICfQo9CaJyxcbiAgICAgICAgICAgICAgICAgICAgZnVsbF9uYW1lOiAn0KPQu9GM0YLRgNCw0LfQstGD0LrQvtCy0L7QuSDQutC+0L3RgtGA0L7Qu9GMJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAn0KLQmicsXG4gICAgICAgICAgICAgICAgICAgIGZ1bGxfbmFtZTogJ9Ci0LXQv9C70L7QstC+0Lkg0LrQvtC90YLRgNC+0LvRjCdcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ9CS0JQnLFxuICAgICAgICAgICAgICAgICAgICBmdWxsX25hbWU6ICfQktC40LHRgNC+0LTQuNCw0LPQvdC+0YHRgtC40YfQtdGB0LrQuNC5INC60L7QvdGC0YDQvtC70YwnXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICfQrdCbJyxcbiAgICAgICAgICAgICAgICAgICAgZnVsbF9uYW1lOiAn0K3Qu9C10LrRgtGA0LjRh9C10YHQutC40Lkg0LrQvtC90YLRgNC+0LvRjCdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgbWVhc3VyZXJzID0ge1xuICAgICAgICAgICAgICAgIGFsbDogRGVwYXJ0bWVudC5tZWFzdXJlcnMoKSxcbiAgICAgICAgICAgICAgICBzZWxlY3RlZDogW10sXG4gICAgICAgICAgICAgICAgc29ydE9yZGVyOiAnbmFtZSdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlbmdpbmUgPSB7XG4gICAgICAgICAgICAgICAgYWxsOiBbXSxcbiAgICAgICAgICAgICAgICBzZWxlY3RlZDoge1xuICAgICAgICAgICAgICAgICAgICAndHlwZSc6ICcnLFxuICAgICAgICAgICAgICAgICAgICAnc2VyaWFsX251bWJlcic6IDBcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHNvcnRPcmRlcjogJ25hbWUnXG4gICAgICAgICAgICB9O1xuXG5cbiAgICAgICAgdm0uYWRkVG9Db2xsZWN0aW9uID0gYWRkVG9Db2xsZWN0aW9uO1xuICAgICAgICB2bS5hbGxFbXBsb3llZXMgPSBbXTtcbiAgICAgICAgdm0uY29udHJvbF90eXBlcyA9IGNvbnRyb2xfdHlwZXM7XG4gICAgICAgIHZtLmNyZWF0ZVBhc3Nwb3J0ID0gY3JlYXRlUGFzc3BvcnQ7XG4gICAgICAgIHZtLmVuZ2luZSA9IGVuZ2luZTtcbiAgICAgICAgdm0ud29ya0JlZ2luID0gdW5kZWZpbmVkO1xuICAgICAgICB2bS53b3JrRW5kID0gdW5kZWZpbmVkO1xuICAgICAgICB2bS5scHVzID0ge307XG4gICAgICAgIHZtLm9yZ3MgPSB7fTtcbiAgICAgICAgdm0ucGFnZXMgPSBwYWdlcztcbiAgICAgICAgdm0ucHJvY0tleVByZXNzID0gcHJvY0tleVByZXNzO1xuICAgICAgICB2bS50Y2xhc3NlcyA9IHthbGw6IFtdLCBzZWxlY3RlZDogJyd9O1xuICAgICAgICB2bS5nZXRMUFVzID0gZ2V0TFBVcztcbiAgICAgICAgdm0ubWVhc3VyZXJzID0gbWVhc3VyZXJzO1xuICAgICAgICB2bS5yZXBvcnQgPSB7XG4gICAgICAgICAgICB0ZWFtOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBtZWFzdXJlcnM6IG1lYXN1cmVycy5zZWxlY3RlZCxcbiAgICAgICAgICAgIGZpbGVzOiB7XG4gICAgICAgICAgICAgICAgJ21haW4nOiBbXSxcbiAgICAgICAgICAgICAgICAndGhlcm0xJzogW10sXG4gICAgICAgICAgICAgICAgJ3RoZXJtMic6IFtdLFxuICAgICAgICAgICAgICAgICdsaWNlbnNlcyc6IFtdXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdGhlcm06IHt9LFxuICAgICAgICAgICAgdmlicm86IHt9LFxuICAgICAgICAgICAgb3JkZXI6IHt9LFxuICAgICAgICAgICAgcmVzaXN0YW5jZToge31cbiAgICAgICAgfTtcbiAgICAgICAgdm0uc2V0U2VsZWN0ZWQgPSBzZXRTZWxlY3RlZDtcblxuICAgICAgICBhY3RpdmF0ZSgpO1xuXG4gICAgICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuICAgICAgICAgICAgdm0ucmVwb3J0LmluZm8gPSB7XG4gICAgICAgICAgICAgICAgbGljZW5zZTogJ9CU0L7Qs9C+0LLQvtGAIOKEliAgICAgICAgICDQvtGCICAgICAgICAgINC90LAg0LLRi9C/0L7Qu9C90LXQvdC40LUg0YDQsNCx0L7RgiDQv9C+INGN0LrRgdC/0LXRgNGC0LjQt9C1INC/0YDQvtC80YvRiNC70LXQvdC90L7QuSDQsdC10LfQvtC/0LDRgdC90L7RgdGC0LguJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZtLnJlcG9ydC50ZWFtID0ge307XG4gICAgICAgICAgICB2bS5yZXBvcnQuZG9jcyA9IFtdO1xuICAgICAgICAgICAgdm0ucmVwb3J0Lm9ial9kYXRhID0ge1xuICAgICAgICAgICAgICAgIGRldGFpbF9pbmZvOiBbXVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgZ2V0RW1wbG95ZWVzKCk7XG4gICAgICAgICAgICBnZXRFbmdpbmVzKCk7XG4gICAgICAgICAgICBnZXRPcmdzKCk7XG4gICAgICAgICAgICBnZXRUQ2xhc3NlcygpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gYWRkVG9Db2xsZWN0aW9uKGFyciwgdmFsdWUpIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IHZhbHVlLnRyaW0oKTtcbiAgICAgICAgICAgIC8vIFRlc3QgZm9yIGFic2VuY2Ugb2YgYSBuZXcgdmFsdWUgaW4gYXJyYXkgXG4gICAgICAgICAgICBpZiAodmFsdWUgIT09ICcnICYmIGFyci5pbmRleE9mKHZhbHVlKSA9PT0gLTEgKSB7XG4gICAgICAgICAgICAgICAgYXJyLnB1c2godmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlUGFzc3BvcnQoKSB7XG4vLyAgICAgICAgICAgIGNvbnNvbGUubG9nKCdkb2NzICcgKyBKU09OLnN0cmluZ2lmeSh2bS5yZXBvcnQuZG9jcykpO1xuLy8gICAgICAgICAgICBjb25zb2xlLmxvZygnaW52ZXN0aWdhdGlvbkRhdGUgJyArIHZtLmludmVzdGlnYXRpb25EYXRlLnRvTG9jYWxlU3RyaW5nKCkpO1xuLy8gICAgICAgICAgICBjb25zb2xlLmxvZygnYmVnaW4gJyArIHZtLndvcmtCZWdpbik7XG4vLyAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlbmQgJyArIHZtLndvcmtFbmQudG9Mb2NhbGVTdHJpbmcoKSk7XG4vLyAgICAgICAgICAgIFBhc3Nwb3J0LmNyZWF0ZVBhc3Nwb3J0KHZtLndvcmtCZWdpbik7XG4gICAgICAgICAgICB2bS5yZXBvcnQudHlwZSA9ICAncmVwb3J0JztcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCd0ZWFtOicsIEpTT04uc3RyaW5naWZ5KHZtLnJlcG9ydCkpO1xuLy8gICAgICAgICAgICByZXR1cm47XG4vLyAgICAgICAgICAgIGNvbnNvbGUuZGlyKCd2bS50Y2xhc3Nlcy5hbGw6ICcgKyBKU09OLnN0cmluZ2lmeSh2bS50Y2xhc3Nlcy5hbGwpKTtcbiAgICAgICAgICAgIHZtLnJlcG9ydC50aGVybS50Y2xhc3MgPSB2bS50Y2xhc3Nlcy5hbGwuZmlsdGVyKGZ1bmN0aW9uKGVsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsLm5hbWUgPT09IHZtLnRjbGFzc2VzLnNlbGVjdGVkO1xuICAgICAgICAgICAgfSlbMF0uaWQ7XG4vLyAgICAgICAgICAgIGNvbnNvbGUuZGlyKCdzZWxlY3RlZCBjbGFzczogJyArIEpTT04uc3RyaW5naWZ5KHZtLnJlcG9ydC50aGVybSkpO1xuICAgICAgICAgICAgUGFzc3BvcnQuY3JlYXRlUGFzc3BvcnQodm0ucmVwb3J0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldEVtcGxveWVlcygpIHtcbiAgICAgICAgICAgIFVzZXJEYXRhLmdldEFsbFVzZXJzKClcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHZtLmFsbEVtcGxveWVlcyA9IGRhdGE7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRFbmdpbmVzKCkge1xuICAgICAgICAgICAgRW5naW5lLmdldEFsbEVuZ2luZXMoKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgdm0uZW5naW5lLmFsbCA9IGRhdGE7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRPcmdzKCkge1xuICAgICAgICAgICAgUGFzc3BvcnQuZ2V0T3JncygpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICB2bS5vcmdzID0gZGF0YTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldExQVXMob3JnTmFtZSkge1xuICAgICAgICAgICAgdmFyIG9yZ2FuID0gdm0ub3Jncy5maWx0ZXIoZnVuY3Rpb24oZWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZWwubmFtZSA9PT0gb3JnTmFtZTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBQYXNzcG9ydC5nZXRMUFVzKG9yZ2FuWzBdLmlkKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgdm0ubHB1cyA9IGRhdGE7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRUQ2xhc3NlcygpIHtcbiAgICAgICAgICAgIFBhc3Nwb3J0LmdldFRDbGFzc2VzKClcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHZtLnRjbGFzc2VzLmFsbCA9IGRhdGE7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBwcm9jS2V5UHJlc3MoY2xpY2tFdmVudCwgYXJyKSB7XG4gICAgICAgICAgICAvLyBDaGVjayBmb3IgUmV0dXJuIChFbnRlcikga2V5IHByZXNzZWRcbiAgICAgICAgICAgIGlmIChjbGlja0V2ZW50LndoaWNoID09PSAxMykge1xuICAgICAgICAgICAgICAgIGNsaWNrRXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBhZGRUb0NvbGxlY3Rpb24oYXJyLCBjbGlja0V2ZW50LnRhcmdldC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgY2xpY2tFdmVudC50YXJnZXQudmFsdWUgPSAnJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNldFNlbGVjdGVkKHNlbGVjdGVkLCBpdGVtKSB7XG4gICAgICAgICAgICB2YXIgaWQgPSBpdGVtLmlkLFxuICAgICAgICAgICAgICAgIGluZGV4ID0gc2VsZWN0ZWQuaW5kZXhPZihpZCk7XG4gICAgICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgc2VsZWN0ZWQuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICBpdGVtLnNlbGVjdGVkID0gZmFsc2U7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGl0ZW0uc2VsZWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHNlbGVjdGVkLnB1c2goaWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gdXBsb2FkKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHZhciBmaWVsZG5hbWUgPSBlbGVtZW50Lm5hbWU7XG4gICAgICAgICAgICBhbmd1bGFyLmZvckVhY2goZWxlbWVudC5maWxlcywgZnVuY3Rpb24oZmlsZSkge1xuICAgICAgICAgICAgICAgIFVwbG9hZC51cGxvYWQoe1xuICAgICAgICAgICAgICAgICAgICB1cmw6ICcvYXBpL3VwbG9hZC8nLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7ZmlsZXVwbG9hZDogZmlsZX1cbiAgICAgICAgICAgICAgICB9KS5cbiAgICAgICAgICAgICAgICB0aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZtLnJlcG9ydC5maWxlc1tmaWVsZG5hbWVdLnB1c2gocmVzcG9uc2UuZGF0YS5pZCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHZtLnJlcG9ydC5maWxlcyk7XG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yIHN0YXR1czogJyArIHJlc3BvbnNlLnN0YXR1cyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCdhcHAucmVwb3J0JylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ1JlcG9ydENvbnRhaW5lckNvbnRyb2xsZXInLCBSZXBvcnRDb250YWluZXJDb250cm9sbGVyKTtcblxuICAgIGZ1bmN0aW9uIFJlcG9ydENvbnRhaW5lckNvbnRyb2xsZXIoJHNjb3BlLCBVc2VyRGF0YSwgRGVwYXJ0bWVudCwgUGFzc3BvcnQsIFVwbG9hZCwgU2VydmVyRGF0YSkge1xuICAgICAgICAnbmdJbmplY3QnO1xuXG4gICAgICAgICRzY29wZS51cGxvYWQgPSB1cGxvYWQ7XG5cbiAgICAgICAgdmFyIHZtID0gdGhpcyxcbiAgICAgICAgICAgIHBhZ2VzID0gW1xuICAgICAgICAgICAgICAgICdyZXBvcnRfY29udGFpbmVyL2RldmljZXMudHBsLmh0bWwnLFxuICAgICAgICAgICAgICAgICdyZXBvcnRfY29udGFpbmVyL3JlcG9ydF9pbmZvLnRwbC5odG1sJyxcbiAgICAgICAgICAgICAgICAncmVwb3J0X2NvbnRhaW5lci9vcmRlci50cGwuaHRtbCcsXG4vLyAgICAgICAgICAgICAgICAncmVwb3J0X2NvbnRhaW5lci9kZXZpY2VfbG9jYXRpb24udHBsLmh0bWwnLFxuICAgICAgICAgICAgICAgICdyZXBvcnRfY29udGFpbmVyL3RlYW0udHBsLmh0bWwnLFxuLy8gICAgICAgICAgICAgICAgJ21lYXN1cmVycy50cGwuaHRtbCcsXG4vLyAgICAgICAgICAgICAgICAncmVwb3J0L2RhdGVzLnRwbC5odG1sJyxcbi8vICAgICAgICAgICAgICAgICdlbmdpbmVzLnRwbC5odG1sJyxcbi8vICAgICAgICAgICAgICAgICdyZXBvcnQvcGhvdG9zLnRwbC5odG1sJyxcbi8vICAgICAgICAgICAgICAgICd2YWx1ZXMudHBsLmh0bWwnLFxuLy8gICAgICAgICAgICAgICAgJ2RvY3MudHBsLmh0bWwnLFxuLy8gICAgICAgICAgICAgICAgJ3RoZXJtLnRwbC5odG1sJyxcbi8vICAgICAgICAgICAgICAgICd2aWJyby50cGwuaHRtbCcsXG4vLyAgICAgICAgICAgICAgICAncmVzaXN0YW5jZS50cGwuaHRtbCcsXG4vLyAgICAgICAgICAgICAgICAnc2lnbmVycy50cGwuaHRtbCdcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBtZWFzdXJlcnMgPSB7XG4gICAgICAgICAgICAgICAgYWxsOiBEZXBhcnRtZW50Lm1lYXN1cmVycygpLFxuICAgICAgICAgICAgICAgIHNlbGVjdGVkOiBbXSxcbiAgICAgICAgICAgICAgICBzb3J0T3JkZXI6ICduYW1lJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRldmljZXMgPSB7XG4gICAgICAgICAgICAgICAgYWxsOiBbXSxcbi8vICAgICAgICAgICAgICAgIHNlbGVjdGVkOiB7XG4vLyAgICAgICAgICAgICAgICAgICAgJ3R5cGUnOiAnJyxcbi8vICAgICAgICAgICAgICAgICAgICAnc2VyaWFsX251bWJlcic6IDBcbi8vICAgICAgICAgICAgICAgIH0sXG4vLyAgICAgICAgICAgICAgICBzb3J0T3JkZXI6ICduYW1lJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRldmljZV9jb25kaXRpb25zID0gW1xuICAgICAgICAgICAgICAgICfRgNCw0LHQvtGC0L7RgdC/0L7RgdC+0LHQvdC+0LUnLFxuICAgICAgICAgICAgICAgICfQvdC10YDQsNCx0L7RgtC+0YHQv9C+0YHQvtCx0L3QvtC1JyxcbiAgICAgICAgICAgICAgICAn0L/RgNC10LTQtdC70YzQvdC+0LUnXG4gICAgICAgICAgICBdO1xuXG5cbi8vICAgICAgICB2bS5hZGRUb0NvbGxlY3Rpb24gPSBhZGRUb0NvbGxlY3Rpb247XG4gICAgICAgIHZtLmFsbEVtcGxveWVlcyA9IFtdO1xuLy8gICAgICAgIHZtLmNvbnRyb2xfdHlwZXMgPSBjb250cm9sX3R5cGVzO1xuICAgICAgICB2bS5kZXZpY2VfY29uZGl0aW9ucyA9IGRldmljZV9jb25kaXRpb25zO1xuICAgICAgICB2bS5jcmVhdGVQYXNzcG9ydCA9IGNyZWF0ZVBhc3Nwb3J0O1xuICAgICAgICB2bS5kZXZpY2VzID0gZGV2aWNlcztcbi8vICAgICAgICB2bS53b3JrQmVnaW4gPSB1bmRlZmluZWQ7XG4vLyAgICAgICAgdm0ud29ya0VuZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdm0ubHB1cyA9IHt9O1xuICAgICAgICB2bS5vcmdzID0ge307XG4gICAgICAgIHZtLnBhZ2VzID0gcGFnZXM7XG4vLyAgICAgICAgdm0ucHJvY0tleVByZXNzID0gcHJvY0tleVByZXNzO1xuLy8gICAgICAgIHZtLnRjbGFzc2VzID0ge2FsbDogW10sIHNlbGVjdGVkOiAnJ307XG4gICAgICAgIHZtLmdldExQVXMgPSBnZXRMUFVzO1xuLy8gICAgICAgIHZtLm1lYXN1cmVycyA9IG1lYXN1cmVycztcbiAgICAgICAgdm0ucmVwb3J0ID0ge1xuICAgICAgICAgICAgdGVhbTogW10sXG4gICAgICAgICAgICBpbmZvOiB7XG4gICAgICAgICAgICAgICAgJ2luZm9faW52ZXN0aWdhdGlvbic6ICfQrdC60YHQv9C10YDRgtC40LfQsCDQv9GA0L7QvNGL0YjQu9C10L3QvdC+0Lkg0LHQtdC30L7Qv9Cw0YHQvdC+0YHRgtC4INC/0YDQvtCy0L7QtNC40YLRgdGPINCy0L/QtdGA0LLRi9C1LiAnICtcbiAgICAgICAgICAgICAgICAgICAgJ1xcbtCd0J4sINCS0J4g4oCTIDEg0YDQsNC3INCyIDIg0LPQvtC00LAgKNC+0YLQstC10YLRgdGC0LLQtdC90L3Ri9C5INC30LAg0L7RgdGD0YnQtdGB0YLQstC70LXQvdC40LUgJyArIFxuICAgICAgICAgICAgICAgICAgICAn0L/RgNC+0LjQt9Cy0L7QtNGB0YLQstC10L3QvdC+0LPQviDQutC+0L3RgtGA0L7Qu9GPINC30LAg0Y3QutGB0L/Qu9GD0LDRgtCw0YbQuNC10Lkg0YHQvtGB0YPQtNCwKS4gJyArXG4gICAgICAgICAgICAgICAgICAgICdcXG7QndCeLCDQktCeIOKAkyAxINGA0LDQtyDQsiA0INCz0L7QtNCwICjRg9C/0L7Qu9C90L7QvNC+0YfQtdC90L3QsNGPINGB0L/QtdGG0LjQsNC70LjQt9C40YDQvtCy0LDQvdC90LDRjyDQvtGA0LPQsNC90LjQt9Cw0YbQuNGPLCAnICtcbiAgICAgICAgICAgICAgICAgICAgJ9C+0YLQstC10YLRgdGC0LLQtdC90L3Ri9C5INC30LAg0L7RgdGD0YnQtdGB0YLQstC70LXQvdC40LUg0L/RgNC+0LjQt9Cy0L7QtNGB0YLQstC10L3QvdC+0LPQviDQutC+0L3RgtGA0L7Qu9GPINC30LAg0Y3QutGB0L/Qu9GD0LDRgtCw0YbQuNC10Lkg0YHQvtGB0YPQtNCwKS4gJyArXG4gICAgICAgICAgICAgICAgICAgICdcXG7Qk9CYIOKAkyAxINGA0LDQtyDQsiA4INC70LXRgiAo0YPQv9C+0LvQvdC+0LzQvtGH0LXQvdC90LDRjyDRgdC/0LXRhtC40LDQu9C40LfQuNGA0L7QstCw0L3QvdCw0Y8g0L7RgNCz0LDQvdC40LfQsNGG0LjRjywgJyArIFxuICAgICAgICAgICAgICAgICAgICAn0L7RgtCy0LXRgtGB0YLQstC10L3QvdGL0Lkg0LfQsCDQvtGB0YPRidC10YHRgtCy0LvQtdC90LjQtSDQv9GA0L7QuNC30LLQvtC00YHRgtCy0LXQvdC90L7Qs9C+INC60L7QvdGC0YDQvtC70Y8g0LfQsCDRjdC60YHQv9C70YPQsNGC0LDRhtC40LXQuSDRgdC+0YHRg9C00LApJyxcbiAgICAgICAgICAgICAgICAnaW5mb19yZXBhaXInOiAn0JIg0L/RgNC10LTRgdGC0LDQstC70LXQvdC90L7QuSDRgtC10YXQvdC40YfQtdGB0LrQvtC5INC00L7QutGD0LzQtdC90YLQsNGG0LjQuCDQvdC1INC+0YLQvNC10YfQtdC90L4nLFxuICAgICAgICAgICAgICAgICdkYW5nZXJfcGxhY2VzJzogJ9Cc0LXRgdGC0LAg0LrQvtC90YbQtdC90YLRgNCw0YbQuNC5INC90LDQv9GA0Y/QttC10L3QuNC5IOKAkyDQv9GA0L7QtNC+0LvRjNC90YvQtSDQuCDQutC+0LvRjNGG0LXQstGL0LUg0YHQstCw0YDQvdGL0LUg0YjQstGLLCAnICsgXG4gICAgICAgICAgICAgICAgICAgICfQvNC10YHRgtCwINCy0LLQsNGA0LrQuCDRiNGC0YPRhtC10YDQvtCyOyDQvNC10YHRgtCwINC90LDQuNCx0L7Qu9C10LUg0LLQtdGA0L7Rj9GC0L3QvtCz0L4g0LrQvtGA0YDQvtC30LjQvtC90L3QvtCz0L4g0LjQt9C90L7RgdCwIOKAkyAnICsgXG4gICAgICAgICAgICAgICAgICAgICfQstC90YPRgtGA0LXQvdC90Y/RjyDQv9C+0LLQtdGA0YXQvdC+0YHRgtGMINC90LjQttC90LXQs9C+INC00L3QuNGJ0LAnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbi8vICAgICAgICAgICAgdGVhbTogdW5kZWZpbmVkLFxuLy8gICAgICAgICAgICBtZWFzdXJlcnM6IG1lYXN1cmVycy5zZWxlY3RlZCxcbi8vICAgICAgICAgICAgZmlsZXM6IHtcbi8vICAgICAgICAgICAgICAgICdtYWluJzogW10sXG4vLyAgICAgICAgICAgICAgICAndGhlcm0xJzogW10sXG4vLyAgICAgICAgICAgICAgICAndGhlcm0yJzogW10sXG4vLyAgICAgICAgICAgICAgICAnbGljZW5zZXMnOiBbXVxuLy8gICAgICAgICAgICB9LFxuLy8gICAgICAgICAgICB0aGVybToge30sXG4vLyAgICAgICAgICAgIHZpYnJvOiB7fSxcbi8vICAgICAgICAgICAgb3JkZXI6IHt9LFxuLy8gICAgICAgICAgICByZXNpc3RhbmNlOiB7fVxuLy8gICAgICAgIH07XG4gICAgICAgIHZtLnNldFNlbGVjdGVkID0gc2V0U2VsZWN0ZWQ7XG5cbiAgICAgICAgYWN0aXZhdGUoKTtcblxuICAgICAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgICAgICAgIGdldENvbnRhaW5lcnMoKTtcbiAgICAgICAgICAgIGdldE9yZ3MoKTtcbiAgICAgICAgICAgIGdldEVtcGxveWVlcygpO1xuLy8gICAgICAgICAgICB2bS5yZXBvcnQuaW5mbyA9IHtcbi8vICAgICAgICAgICAgICAgIGxpY2Vuc2U6ICfQlNC+0LPQvtCy0L7RgCDihJYgICAgICAgICAg0L7RgiAgICAgICAgICDQvdCwINCy0YvQv9C+0LvQvdC10L3QuNC1INGA0LDQsdC+0YIg0L/QviDRjdC60YHQv9C10YDRgtC40LfQtSDQv9GA0L7QvNGL0YjQu9C10L3QvdC+0Lkg0LHQtdC30L7Qv9Cw0YHQvdC+0YHRgtC4Lidcbi8vICAgICAgICAgICAgfTtcbi8vICAgICAgICAgICAgdm0ucmVwb3J0LnRlYW0gPSB7fTtcbi8vICAgICAgICAgICAgdm0ucmVwb3J0LmRvY3MgPSBbXTtcbi8vICAgICAgICAgICAgdm0ucmVwb3J0Lm9ial9kYXRhID0ge1xuLy8gICAgICAgICAgICAgICAgZGV0YWlsX2luZm86IFtdXG4vLyAgICAgICAgICAgIH07XG4vL1xuLy8gICAgICAgICAgICBnZXRFbmdpbmVzKCk7XG4vLyAgICAgICAgICAgIGdldFRDbGFzc2VzKCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBhZGRUb0NvbGxlY3Rpb24oYXJyLCB2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gdmFsdWUudHJpbSgpO1xuICAgICAgICAgICAgLy8gVGVzdCBmb3IgYWJzZW5jZSBvZiBhIG5ldyB2YWx1ZSBpbiBhcnJheSBcbiAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gJycgJiYgYXJyLmluZGV4T2YodmFsdWUpID09PSAtMSApIHtcbiAgICAgICAgICAgICAgICBhcnIucHVzaCh2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBjcmVhdGVQYXNzcG9ydCgpIHtcbi8vLy8gICAgICAgICAgICBjb25zb2xlLmxvZygnZG9jcyAnICsgSlNPTi5zdHJpbmdpZnkodm0ucmVwb3J0LmRvY3MpKTtcbi8vLy8gICAgICAgICAgICBjb25zb2xlLmxvZygnaW52ZXN0aWdhdGlvbkRhdGUgJyArIHZtLmludmVzdGlnYXRpb25EYXRlLnRvTG9jYWxlU3RyaW5nKCkpO1xuLy8vLyAgICAgICAgICAgIGNvbnNvbGUubG9nKCdiZWdpbiAnICsgdm0ud29ya0JlZ2luKTtcbi8vLy8gICAgICAgICAgICBjb25zb2xlLmxvZygnZW5kICcgKyB2bS53b3JrRW5kLnRvTG9jYWxlU3RyaW5nKCkpO1xuLy8vLyAgICAgICAgICAgIFBhc3Nwb3J0LmNyZWF0ZVBhc3Nwb3J0KHZtLndvcmtCZWdpbik7XG4gICAgICAgICAgICB2bS5yZXBvcnQudHlwZSA9ICdyZXBvcnQtY29udGFpbmVyJztcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyZXBvcnQ6JywgSlNPTi5zdHJpbmdpZnkodm0ucmVwb3J0KSk7XG4vLy8vICAgICAgICAgICAgcmV0dXJuO1xuLy8vLyAgICAgICAgICAgIGNvbnNvbGUuZGlyKCd2bS50Y2xhc3Nlcy5hbGw6ICcgKyBKU09OLnN0cmluZ2lmeSh2bS50Y2xhc3Nlcy5hbGwpKTtcbi8vICAgICAgICAgICAgdm0ucmVwb3J0LnRoZXJtLnRjbGFzcyA9IHZtLnRjbGFzc2VzLmFsbC5maWx0ZXIoZnVuY3Rpb24oZWwpIHtcbi8vICAgICAgICAgICAgICAgIHJldHVybiBlbC5uYW1lID09PSB2bS50Y2xhc3Nlcy5zZWxlY3RlZDtcbi8vICAgICAgICAgICAgfSlbMF0uaWQ7XG4vLy8vICAgICAgICAgICAgY29uc29sZS5kaXIoJ3NlbGVjdGVkIGNsYXNzOiAnICsgSlNPTi5zdHJpbmdpZnkodm0ucmVwb3J0LnRoZXJtKSk7XG4gICAgICAgICAgICBQYXNzcG9ydC5jcmVhdGVQYXNzcG9ydCh2bS5yZXBvcnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0RW1wbG95ZWVzKCkge1xuICAgICAgICAgICAgVXNlckRhdGEuZ2V0QWxsVXNlcnMoKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgdm0uYWxsRW1wbG95ZWVzID0gZGF0YTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldENvbnRhaW5lcnMoKSB7XG4gICAgICAgICAgICBTZXJ2ZXJEYXRhLnF1ZXJ5KHtjYXRlZ29yeTogJ2NvbnRhaW5lcid9LCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgdm0uZGV2aWNlcy5hbGwgPSBkYXRhO1xuLy8gICAgICAgICAgICAgICAgdm0uZGV2aWNlcy5hbGwgPSBkYXRhLm1hcChmdW5jdGlvbihlbCkge1xuLy8gICAgICAgICAgICAgICAgICAgIHJldHVybiBlbDtcbi8vICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICBmdW5jdGlvbiBnZXRPcmdzKCkge1xuICAgICAgICAgICAgUGFzc3BvcnQuZ2V0T3JncygpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICB2bS5vcmdzID0gZGF0YTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldExQVXMob3JnTmFtZSkge1xuICAgICAgICAgICAgdmFyIG9yZ2FuID0gdm0ub3Jncy5maWx0ZXIoZnVuY3Rpb24oZWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZWwubmFtZSA9PT0gb3JnTmFtZTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBQYXNzcG9ydC5nZXRMUFVzKG9yZ2FuWzBdLmlkKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgdm0ubHB1cyA9IGRhdGE7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbi8vXG4vLyAgICAgICAgZnVuY3Rpb24gZ2V0VENsYXNzZXMoKSB7XG4vLyAgICAgICAgICAgIFBhc3Nwb3J0LmdldFRDbGFzc2VzKClcbi8vICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbi8vICAgICAgICAgICAgICAgICAgICB2bS50Y2xhc3Nlcy5hbGwgPSBkYXRhO1xuLy8gICAgICAgICAgICAgICAgfSk7XG4vLyAgICAgICAgfVxuLy9cbi8vICAgICAgICBmdW5jdGlvbiBwcm9jS2V5UHJlc3MoY2xpY2tFdmVudCwgYXJyKSB7XG4vLyAgICAgICAgICAgIC8vIENoZWNrIGZvciBSZXR1cm4gKEVudGVyKSBrZXkgcHJlc3NlZFxuLy8gICAgICAgICAgICBpZiAoY2xpY2tFdmVudC53aGljaCA9PT0gMTMpIHtcbi8vICAgICAgICAgICAgICAgIGNsaWNrRXZlbnQucHJldmVudERlZmF1bHQoKTtcbi8vICAgICAgICAgICAgICAgIGFkZFRvQ29sbGVjdGlvbihhcnIsIGNsaWNrRXZlbnQudGFyZ2V0LnZhbHVlKTtcbi8vICAgICAgICAgICAgICAgIGNsaWNrRXZlbnQudGFyZ2V0LnZhbHVlID0gJyc7XG4vLyAgICAgICAgICAgIH1cbi8vICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc2V0U2VsZWN0ZWQoc2VsZWN0ZWQsIGl0ZW0pIHtcbiAgICAgICAgICAgIHZhciBpZCA9IGl0ZW0uaWQsXG4gICAgICAgICAgICAgICAgaW5kZXggPSBzZWxlY3RlZC5pbmRleE9mKGlkKTtcbiAgICAgICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICBzZWxlY3RlZC5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgIGl0ZW0uc2VsZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaXRlbS5zZWxlY3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgc2VsZWN0ZWQucHVzaChpZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiB1cGxvYWQoZWxlbWVudCkge1xuICAgICAgICAgICAgdmFyIGZpZWxkbmFtZSA9IGVsZW1lbnQubmFtZTtcbiAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChlbGVtZW50LmZpbGVzLCBmdW5jdGlvbihmaWxlKSB7XG4gICAgICAgICAgICAgICAgVXBsb2FkLnVwbG9hZCh7XG4gICAgICAgICAgICAgICAgICAgIHVybDogJy9hcGkvdXBsb2FkLycsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtmaWxldXBsb2FkOiBmaWxlfVxuICAgICAgICAgICAgICAgIH0pLlxuICAgICAgICAgICAgICAgIHRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdm0ucmVwb3J0LmZpbGVzW2ZpZWxkbmFtZV0ucHVzaChyZXNwb25zZS5kYXRhLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2codm0ucmVwb3J0LmZpbGVzKTtcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRXJyb3Igc3RhdHVzOiAnICsgcmVzcG9uc2Uuc3RhdHVzKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxufSkoKTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
